import{j as e,r as d,b as Vt}from"./react-vendor-DLcyn9fe.js";import{L as Wt,D as Qt,P as K,S as se,K as ct,C as Ue,T as ce,U as It,I as Kt,M as ye,a as $e,b as Yt,c as Zt,d as Je,e as Xt,f as xe,g as xt,h as Dt,i as Be,j as re,B as es,k as ts,l as ss,m as as,n as te,o as Xe,p as rs,q as Ot,r as ls,X as Z,s as me,t as mt,u as ae,v as he,E as we,F as et,w as Et,x as ke,y as Le,z as Se,A as ds,G as ns,H as je,J as jt,N as ze,O as tt,Q as Tt,R as st,V as gt,W as He,Y as Nt,Z as $t,_ as is,$ as os,a0 as Lt,a1 as cs,a2 as xs,a3 as Ee,a4 as ms,a5 as gs,a6 as vt,a7 as Ie,a8 as hs,a9 as wt,aa as kt,ab as Ne,ac as us,ad as at,ae as ys,af as ps,ag as bs,ah as fs,ai as js,aj as Ft,ak as Ns,al as vs,am as _t,an as ws,ao as ks,ap as St}from"./lucide-Br6A0_Vx.js";import{Q as Ss,R as ht,T as Cs,c as Ps,U as As,V as ue,W as $,X as qe,Y as Rt,Z as V,$ as Ct,a0 as ut,a1 as Is,a2 as Ds}from"./vendor-Ck8UGqj_.js";import{R as ve,L as yt,a as Te,B as Mt,b as Ut,C as rt,X as lt,Y as dt,T as nt,P as Bt,c as Jt,d as zt}from"./recharts-DlNFdQNu.js";import{S as Os,R as Es,L as Ts,T as $s}from"./radix-ui-CmHW1S46.js";import pt from"./html2canvas-B0tyYwQk.js";import{E as bt}from"./jspdf-XW0Uhrbb.js";import"./lodash-CRa9LgHQ.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))b(o);new MutationObserver(o=>{for(const h of o)if(h.type==="childList")for(const x of h.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&b(x)}).observe(document,{childList:!0,subtree:!0});function g(o){const h={};return o.integrity&&(h.integrity=o.integrity),o.referrerPolicy&&(h.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?h.credentials="include":o.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function b(o){if(o.ep)return;o.ep=!0;const h=g(o);fetch(o.href,h)}})();const Ls=[{id:"dashboard",label:"Dashboard",icon:Wt,roles:["admin","manager","staff"]},{id:"products",label:"Products",icon:K,roles:["admin","manager"],children:[{id:"data-overview",label:"Data Overview",icon:Qt,roles:["admin","manager"]}]},{id:"orders",label:"Orders",icon:se,roles:["admin","manager","staff"]},{id:"sold-products",label:"Sold Products",icon:ct,roles:["admin","manager"]},{id:"pos",label:"Point of Sale",icon:Ue,roles:["admin","manager","staff"]},{id:"analytics",label:"Analytics & Revenue",icon:ce,roles:["admin","manager"]},{id:"customers",label:"Customers",icon:It,roles:["admin","manager","staff"]},{id:"banners",label:"Banners",icon:Kt,roles:["admin","manager"]},{id:"outlook",label:"Outlook Accounts",icon:ye,roles:["admin"]},{id:"hr",label:"HR & Attendance",icon:$e,roles:["admin","manager"]},{id:"tasks",label:"Tasks",icon:Yt,roles:["admin","manager","staff"]},{id:"team",label:"Team Members",icon:Zt,roles:["admin","manager"]},{id:"roles",label:"Roles & Access",icon:Je,roles:["admin"]},{id:"system",label:"System",icon:Xt,roles:["admin"]},{id:"delivery",label:"Delivery Options",icon:xe,roles:["admin","manager"]},{id:"email-templates",label:"Email Templates",icon:ye,roles:["admin"]},{id:"settings",label:"Settings",icon:xt,roles:["admin","manager"]}];function Fs({collapsed:t,onToggleCollapse:n,onLogout:g,userRole:b="admin",userPermissions:o}){const h=m=>o&&Object.keys(o).length>0?!!(o[m.id]||m.id==="email-templates"&&b==="admin"||m.id==="data-overview"&&(b==="admin"||b==="manager")):b==="admin"?!0:m.roles.includes(b),x=Ls.reduce((m,i)=>{if(h(i)){const c={...i};c.children&&(c.children=c.children.filter(a=>h(a))),m.push(c)}return m},[]),v=(m,i=!1)=>{const c=m.icon;return e.jsxs("div",{className:"mb-1",children:[e.jsxs(Ss,{to:`/admin/${m.id}`,className:({isActive:a})=>`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all ${a?"bg-red-600 text-white shadow-lg shadow-red-500/50":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"} ${i?"text-sm":""}`,title:t?m.label:void 0,children:[e.jsx(c,{className:`${i?"w-4 h-4":"w-5 h-5"} flex-shrink-0`}),!t&&e.jsx("span",{className:"text-sm font-medium",children:m.label})]}),m.children&&m.children.length>0&&!t&&e.jsx("div",{className:"ml-4 pl-2 border-l border-gray-200 dark:border-gray-700 mt-1 space-y-1",children:m.children.map(a=>v(a,!0))})]},m.id)};return e.jsxs("div",{className:`bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 transition-all duration-300 flex flex-col ${t?"w-20":"w-64"}`,children:[e.jsxs("div",{className:"h-16 flex items-center justify-between px-4 border-b border-gray-200 dark:border-gray-700",children:[!t&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-red-500 to-red-700 flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-sm",children:"GU"})}),e.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:"Games - Up"})]}),e.jsx("button",{onClick:n,className:"p-1.5 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-600 dark:text-gray-400",children:e.jsx(Dt,{className:`w-5 h-5 transition-transform ${t?"rotate-180":""}`})})]}),e.jsx("nav",{className:"flex-1 py-4 px-2 overflow-y-auto",children:x.map(m=>v(m))}),e.jsx("div",{className:"p-2 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("button",{onClick:g,className:"w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 transition-all",title:t?"Logout":void 0,children:[e.jsx(Be,{className:"w-5 h-5 flex-shrink-0"}),!t&&e.jsx("span",{className:"text-sm font-medium",children:"Logout"})]})})]})}const q=void 0,_s="/functions/v1/make-server-f6f1fb51",_=_s;let it=null;function De(t){it=t}async function z(t,n={}){const g=it||q,b={"Content-Type":"application/json",Authorization:`Bearer ${g}`,...n.headers};console.log("API Request:",{endpoint:t,hasAccessToken:!!it,tokenPreview:g?`${g.substring(0,20)}...`:"none"});const o=await fetch(`${_}${t}`,{...n,headers:b});if(!o.ok){const h=await o.json().catch(()=>({error:"Request failed"}));throw console.error("API Error:",o.status,h),new Error(h.error||h.message||`Request failed with status ${o.status}`)}return o.json()}const Ge={signup:async(t,n,g)=>{const b=await fetch(`${_}/auth/signup`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:n,name:g})});if(!b.ok){const o=await b.json().catch(()=>({error:"Signup failed"}));throw console.error("Signup Error:",b.status,o),new Error(o.error||o.message||"Signup failed")}return b.json()},login:async(t,n)=>{console.log("Attempting login for:",t);const g=await fetch(`${_}/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:n})});if(!g.ok){const o=await g.json().catch(()=>({error:"Login failed"}));throw console.error("Login Error:",g.status,o),new Error(o.error||o.message||"Invalid login credentials")}const b=await g.json();return console.log("Login successful"),b}},ne={getAll:()=>z("/products"),getPublic:(t,n)=>{const g=new URLSearchParams;return t&&g.append("category",t),n&&g.append("search",n),z(`/public/products?${g.toString()}`)},create:t=>z("/products",{method:"POST",body:JSON.stringify(Object.fromEntries(t)),headers:{"Content-Type":"application/json"}}),update:(t,n)=>z(`/products/${t}`,{method:"PUT",body:JSON.stringify(Object.fromEntries(n)),headers:{"Content-Type":"application/json"}}),delete:t=>z(`/products/${t}`,{method:"DELETE"}),getOverview:t=>z(`/admin/product-overview?productId=${t}`)},ot={getAll:t=>{const n=new URLSearchParams;return t?.status&&n.append("status",t.status),t?.search&&n.append("search",t.search),t?.email&&n.append("email",t.email),t?.product&&n.append("product",t.product),z(`/orders?${n.toString()}`)},update:(t,n)=>z(`/orders/${t}`,{method:"PUT",body:JSON.stringify(n)})},Rs={getAll:()=>z("/admin/customers"),update:(t,n)=>z(`/customers/${t}`,{method:"PUT",body:JSON.stringify(n)})},Pe={getAll:()=>z("/banners"),create:t=>z("/banners",{method:"POST",body:JSON.stringify(t)}),update:(t,n)=>z(`/banners/${t}`,{method:"PUT",body:JSON.stringify(n)}),delete:t=>z(`/banners/${t}`,{method:"DELETE"})},Fe={getAttendance:t=>z(`/hr/attendance?date=${t}`),getEmployees:()=>z("/hr/employees"),markAttendance:t=>z("/hr/attendance",{method:"POST",body:JSON.stringify(t)}),updateAttendance:(t,n)=>z(`/hr/attendance/${t}`,{method:"PUT",body:JSON.stringify(n)})},Ve={getAll:()=>z("/roles"),create:t=>z("/roles",{method:"POST",body:JSON.stringify(t)}),update:(t,n)=>z(`/roles/${t}`,{method:"PUT",body:JSON.stringify(n)}),delete:t=>z(`/roles/${t}`,{method:"DELETE"}),createAdminUser:t=>z("/admin/users",{method:"POST",body:JSON.stringify(t)})},Ms={getSoldProducts:()=>z("/admin/sold-products")},Oe={get:t=>z(t),post:(t,n)=>z(t,{method:"POST",body:JSON.stringify(n)}),put:(t,n)=>z(t,{method:"PUT",body:JSON.stringify(n)}),delete:t=>z(t,{method:"DELETE"})};function Us({isDarkMode:t,onToggleTheme:n,user:g,onLogout:b,onViewWebsite:o}){const h=ht(),[x,v]=d.useState(!1),[m,i]=d.useState(!1),[c,a]=d.useState([]),s=d.useRef(null),l=d.useRef(null),k=async()=>{try{const u=await Oe.get("/notifications");a(u)}catch(u){console.error("Failed to fetch notifications:",u)}},r=async u=>{try{await Oe.post(`/notifications/${u}/read`,{}),a(T=>T.map(W=>W.id===u?{...W,is_read:!0}:W))}catch(T){console.error("Failed to mark notification as read:",T)}},y=async()=>{try{await Oe.post("/notifications/read-all",{}),a(u=>u.map(T=>({...T,is_read:!0})))}catch(u){console.error("Failed to mark all notifications as read:",u)}};d.useEffect(()=>{k();const u=setInterval(k,3e4);return()=>clearInterval(u)},[]);const j=u=>u.split(" ").map(T=>T[0]).join("").toUpperCase().slice(0,2),P=g?.user_metadata?.name||g?.email||"User",S=g?.user_metadata?.role||"admin",w=j(P),p=c.filter(u=>!u.is_read).length;d.useEffect(()=>{const u=T=>{s.current&&!s.current.contains(T.target)&&v(!1),l.current&&!l.current.contains(T.target)&&i(!1)};return document.addEventListener("mousedown",u),()=>document.removeEventListener("mousedown",u)},[]);const A=()=>{v(!1),b&&b()};return e.jsxs("div",{className:"h-16 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between px-6",children:[e.jsx("div",{className:"flex-1 max-w-xl",children:e.jsxs("div",{className:"relative",children:[e.jsx(re,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search anything...",className:"w-full pl-10 pr-4 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-sm text-gray-900 dark:text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-red-500"})]})}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"relative",ref:l,children:[e.jsxs("button",{onClick:()=>i(!m),className:"relative p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-600 dark:text-gray-400",children:[e.jsx(es,{className:"w-5 h-5"}),p>0&&e.jsx("span",{className:"absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full"})]}),m&&e.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-xl z-50 overflow-hidden",children:[e.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center bg-gray-50 dark:bg-gray-700/50",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:"Notifications"}),p>0&&e.jsx("button",{onClick:y,className:"text-xs text-red-600 dark:text-red-400 hover:text-red-700 font-medium",children:"Mark all read"})]}),e.jsx("div",{className:"max-h-96 overflow-y-auto",children:c.length===0?e.jsx("div",{className:"px-4 py-6 text-center text-sm text-gray-500 dark:text-gray-400",children:"No notifications yet"}):c.map(u=>e.jsx("div",{className:`px-4 py-3 border-b border-gray-100 dark:border-gray-700/50 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors ${u.is_read?"":"bg-red-50/50 dark:bg-red-900/10"}`,onClick:()=>!u.is_read&&r(u.id),children:e.jsxs("div",{className:"flex justify-between items-start gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:`text-sm ${u.is_read?"text-gray-700 dark:text-gray-300":"font-semibold text-gray-900 dark:text-white"}`,children:u.title}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:u.message}),e.jsx("p",{className:"text-[10px] text-gray-400 mt-2",children:new Date(u.created_at).toLocaleString()})]}),!u.is_read&&e.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full mt-1.5 flex-shrink-0"})]})},u.id))})]})]}),e.jsx("button",{onClick:n,className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-600 dark:text-gray-400",children:t?e.jsx(ts,{className:"w-5 h-5"}):e.jsx(ss,{className:"w-5 h-5"})}),e.jsxs("div",{className:"relative",ref:s,children:[e.jsxs("button",{onClick:()=>v(!x),className:"flex items-center gap-3 pl-4 border-l border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700/50 rounded-lg transition-colors py-2 pr-2",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-red-500 to-red-700 flex items-center justify-center",children:e.jsx("span",{className:"text-white font-semibold text-sm",children:w})}),e.jsxs("div",{className:"hidden md:block text-left",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:P}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 capitalize",children:S})]}),e.jsx(as,{className:`w-4 h-4 text-gray-400 transition-transform ${x?"rotate-180":""}`})]}),x&&e.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-xl z-50 overflow-hidden",children:[e.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-700/50",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:P}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:g?.email}),e.jsxs("div",{className:"text-xs text-red-600 dark:text-red-400 font-medium mt-1 capitalize",children:[S," Account"]})]}),e.jsxs("div",{className:"py-1",children:[e.jsxs("button",{onClick:()=>v(!1),className:"w-full flex items-center gap-3 px-4 py-2.5 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[e.jsx(te,{className:"w-4 h-4"}),e.jsx("span",{children:"My Profile"})]}),e.jsxs("button",{onClick:()=>{v(!1),h("/admin/settings")},className:"w-full flex items-center gap-3 px-4 py-2.5 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[e.jsx(xt,{className:"w-4 h-4"}),e.jsx("span",{children:"Settings"})]}),e.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 my-1"}),e.jsxs("button",{onClick:A,className:"w-full flex items-center gap-3 px-4 py-2.5 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors font-medium",children:[e.jsx(Be,{className:"w-4 h-4"}),e.jsx("span",{children:"Logout"})]})]})]})]})]})]})}function Bs({onLogin:t}){const[n,g]=d.useState(!1),[b,o]=d.useState(""),[h,x]=d.useState(""),[v,m]=d.useState(""),[i,c]=d.useState(""),[a,s]=d.useState(!1);d.useEffect(()=>{const r=localStorage.getItem("session");if(r)try{const y=JSON.parse(r);(!y.access_token||!y.user)&&(console.log("Clearing invalid session from localStorage"),localStorage.removeItem("session"),localStorage.removeItem("user"))}catch{localStorage.removeItem("session"),localStorage.removeItem("user")}l()},[]);const l=async()=>{try{console.log("Setting up test accounts...");const r=await fetch(`${_}/setup-accounts`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${q}`}});if(r.ok){const y=await r.json();return console.log("Test accounts setup response:",y),console.log("Available credentials:",y.credentials),!0}else{const y=await r.text();return console.error("Setup accounts failed with status:",r.status),console.error("Error response:",y),!1}}catch(r){return console.error("Setup accounts error:",r),!1}},k=async r=>{r.preventDefault(),c(""),s(!0);try{if(n){const y=await Ge.signup(b,h,v),j=await Ge.login(b,h);console.log("Login successful, setting token:",j.session.access_token?"present":"missing"),De(j.session.access_token),t(j.user,j.session)}else{const y=await Ge.login(b,h);console.log("Login successful, session:",y.session?"present":"missing"),console.log("Access token:",y.session?.access_token?"present":"missing"),De(y.session.access_token),t(y.user,y.session)}}catch(y){console.error("Auth error:",y),c(y.message||"Authentication failed")}finally{s(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-600 via-red-700 to-red-900 flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-2xl bg-white shadow-2xl mb-4",children:e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-red-500 to-red-700 flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-xl",children:"GU"})})}),e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Games - Up"}),e.jsx("p",{className:"text-red-100",children:"Admin Dashboard"})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:n?"Create Account":"Welcome Back"}),e.jsx("p",{className:"text-gray-600",children:n?"Sign up to get started":"Sign in to continue to your dashboard"})]}),i&&e.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-red-600",children:i})}),e.jsxs("form",{onSubmit:k,className:"space-y-4",children:[n&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),e.jsx("input",{type:"text",value:v,onChange:r=>m(r.target.value),className:"w-full px-4 py-3 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"John Doe",required:n})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),e.jsx("input",{type:"email",value:b,onChange:r=>o(r.target.value),className:"w-full px-4 py-3 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"admin@psstore.com",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),e.jsx("input",{type:"password",value:h,onChange:r=>x(r.target.value),className:"w-full px-4 py-3 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"••••••••",required:!0})]}),e.jsx("button",{type:"submit",disabled:a,className:"w-full py-3 px-4 bg-gradient-to-r from-red-600 to-red-700 text-white rounded-lg font-medium shadow-lg shadow-red-500/50 hover:shadow-xl hover:shadow-red-500/50 transition-all flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:a?e.jsx("span",{children:"Loading..."}):e.jsxs(e.Fragment,{children:[e.jsx(Xe,{className:"w-5 h-5"}),n?"Create Account":"Sign In"]})})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx("button",{onClick:()=>{g(!n),c("")},className:"text-red-600 hover:text-red-700 font-medium text-sm",children:n?"Already have an account? Sign in":"Don't have an account? Sign up"})}),!n&&e.jsxs("div",{className:"mt-6 p-4 bg-red-50 rounded-lg border border-red-200",children:[e.jsx("p",{className:"text-xs text-red-800 font-semibold mb-2",children:"Demo Admin Credentials:"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm text-red-700 font-mono",children:"Email: admin@gamesup.com"}),e.jsx("p",{className:"text-sm text-red-700 font-mono",children:"Password: admin123"})]}),e.jsx("button",{type:"button",onClick:()=>{o("admin@gamesup.com"),x("admin123")},className:"mt-3 text-xs text-red-600 hover:text-red-700 font-semibold underline",children:"Click to auto-fill credentials"})]})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("button",{onClick:()=>{window.location.hash="#website",window.location.reload()},className:"inline-flex items-center justify-center gap-2 px-6 py-3 bg-white/10 hover:bg-white/20 backdrop-blur-sm text-white rounded-lg font-medium text-sm transition-all border border-white/20 hover:border-white/40",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to Website"]})})]})})}function _e({title:t,value:n,change:g,trend:b,icon:o,chartData:h,chartColor:x,chartType:v="line"}){return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-8 shadow-sm hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1",children:t}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:n}),e.jsxs("div",{className:"flex items-center gap-1 mt-2",children:[b==="up"?e.jsx(ce,{className:"w-4 h-4 text-green-500"}):e.jsx(rs,{className:"w-4 h-4 text-red-500"}),e.jsxs("span",{className:`text-sm font-medium ${b==="up"?"text-green-500":"text-red-500"}`,children:[g,"%"]})]})]}),e.jsx("div",{className:"p-3 rounded-lg bg-gradient-to-br from-red-500 to-red-700 shadow-lg shadow-red-500/30",children:e.jsx(o,{className:"w-5 h-5 text-white"})})]}),e.jsx(ve,{width:"100%",height:60,children:v==="line"?e.jsx(yt,{data:h,children:e.jsx(Te,{type:"monotone",dataKey:"sales",stroke:x,strokeWidth:2,dot:!1})}):e.jsx(Mt,{data:h,children:e.jsx(Ut,{dataKey:"value",fill:x,radius:[4,4,0,0]})})})]})}function fe(...t){return Cs(Ps(t))}function E({className:t,...n}){return e.jsx("div",{"data-slot":"card",className:fe("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",t),...n})}const Js={currency_code:"USD",currency_symbol:"$",tax_rate:8.5,store_name:"",store_email:"",store_phone:"",store_address:"",business_hours:[],payment_methods:[]},Ht=d.createContext(void 0);function zs({children:t}){const[n,g]=d.useState(Js),[b,o]=d.useState(!0),h=async()=>{try{const m=await fetch(`${_}/settings`);if(m.ok){const i=await m.json();let c=[];try{c=i.business_hours?JSON.parse(i.business_hours):[]}catch(s){console.error("Failed to parse business_hours",s)}let a=[];try{a=i.payment_methods?JSON.parse(i.payment_methods):[]}catch(s){console.error("Failed to parse payment_methods",s)}g({currency_code:i.currency_code||"USD",currency_symbol:i.currency_symbol||"$",tax_rate:parseFloat(i.tax_rate)||0,store_name:i.store_name||"",store_email:i.store_email||"",store_phone:i.store_phone||"",store_address:i.store_address||"",business_hours:c,payment_methods:a})}}catch(m){console.error("Failed to fetch settings:",m)}finally{o(!1)}};d.useEffect(()=>{h()},[]);const x=async m=>{try{g(a=>({...a,...m}));const i={...m};if(i.business_hours&&(i.business_hours=JSON.stringify(i.business_hours)),i.payment_methods&&(i.payment_methods=JSON.stringify(i.payment_methods)),!(await fetch(`${_}/settings`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)})).ok)throw new Error("Failed to update settings");await h()}catch(i){throw console.error("Failed to update settings:",i),h(),i}},v=m=>{const i=typeof m=="string"?parseFloat(m):m;return isNaN(i)?`${n.currency_symbol}0.00`:`${n.currency_symbol}${i.toFixed(2)}`};return e.jsx(Ht.Provider,{value:{settings:n,loading:b,formatPrice:v,updateSettings:x,refreshSettings:h},children:t})}function le(){const t=d.useContext(Ht);if(t===void 0)throw new Error("useStoreSettings must be used within a StoreSettingsProvider");return t}const Ae=[{month:"Jan",sales:4200,earning:3200},{month:"Feb",sales:3800,earning:2900},{month:"Mar",sales:5100,earning:3800},{month:"Apr",sales:4600,earning:3500},{month:"May",sales:5400,earning:4100},{month:"Jun",sales:6200,earning:4800},{month:"Jul",sales:5900,earning:4500},{month:"Aug",sales:6800,earning:5200},{month:"Sep",sales:7200,earning:5600},{month:"Oct",sales:6900,earning:5300},{month:"Nov",sales:7800,earning:6100},{month:"Dec",sales:8500,earning:6700}],Hs=[{id:1,name:"PlayStation 5 Console",sales:1245,revenue:623755,image:"https://images.unsplash.com/photo-1606813907291-d86efa9b94db?w=200&h=200&fit=crop"},{id:2,name:"DualSense Controller",sales:2840,revenue:199800,image:"https://images.unsplash.com/photo-1592840496694-26d035b52b48?w=200&h=200&fit=crop"},{id:3,name:"PS5 VR Headset",sales:856,revenue:427144,image:"https://images.unsplash.com/photo-1617802690658-1173a812650d?w=200&h=200&fit=crop"},{id:4,name:"Spider-Man 2",sales:1520,revenue:106400,image:"https://images.unsplash.com/photo-1509198397868-475647b2a1e5?w=200&h=200&fit=crop"}],qs=[{id:"#PS-10234",customer:"Alex Johnson",product:"PS5 Console + 2 Games",status:"completed",amount:599.99,date:"Jan 4, 2026"},{id:"#PS-10235",customer:"Sarah Williams",product:"DualSense Midnight Black",status:"pending",amount:74.99,date:"Jan 4, 2026"},{id:"#PS-10236",customer:"Mike Chen",product:"PS5 Digital Edition",status:"processing",amount:449.99,date:"Jan 3, 2026"},{id:"#PS-10237",customer:"Emma Davis",product:"PlayStation Plus 12-Month",status:"completed",amount:59.99,date:"Jan 3, 2026"},{id:"#PS-10238",customer:"James Wilson",product:"PS VR2 Horizon Bundle",status:"completed",amount:599.99,date:"Jan 2, 2026"}],We=[{name:"Direct",value:35,color:"#DC2626"},{name:"Social",value:25,color:"#EF4444"},{name:"Organic",value:30,color:"#F87171"},{name:"Referral",value:10,color:"#FCA5A5"}];function Gs(){const{formatPrice:t}=le();return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Dashboard"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Here is the summary of overall data"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(_e,{title:"Total Revenue",value:t(847239),change:12.5,trend:"up",icon:Ot,chartData:Ae,chartColor:"#3B82F6"}),e.jsx(_e,{title:"Orders",value:"12,458",change:8.2,trend:"up",icon:se,chartData:Ae.map(n=>({value:n.sales})),chartColor:"#10B981",chartType:"bar"}),e.jsx(_e,{title:"Active Customers",value:"8,234",change:3.8,trend:"up",icon:It,chartData:Ae,chartColor:"#8B5CF6"}),e.jsx(_e,{title:"Conversion Rate",value:"4.8%",change:2.1,trend:"up",icon:ls,chartData:Ae,chartColor:"#EC4899"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs(E,{className:"lg:col-span-2 p-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Product Sales"}),e.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Sales: 2590"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-500"}),e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Total Earning: ",t(27208)]})]})]})]}),e.jsxs("select",{className:"px-3 py-1.5 text-sm border border-gray-200 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{children:"All Category"}),e.jsx("option",{children:"Consoles"}),e.jsx("option",{children:"Accessories"}),e.jsx("option",{children:"Games"})]})]}),e.jsx(ve,{width:"100%",height:300,children:e.jsxs(yt,{data:Ae,children:[e.jsx(rt,{strokeDasharray:"3 3",stroke:"#374151",opacity:.1}),e.jsx(lt,{dataKey:"month",stroke:"#6B7280",fontSize:12}),e.jsx(dt,{stroke:"#6B7280",fontSize:12}),e.jsx(nt,{contentStyle:{backgroundColor:"#1F2937",border:"none",borderRadius:"8px",color:"#fff"}}),e.jsx(Te,{type:"monotone",dataKey:"sales",stroke:"#DC2626",strokeWidth:2,dot:!1}),e.jsx(Te,{type:"monotone",dataKey:"earning",stroke:"#FBBF24",strokeWidth:2,dot:!1})]})})]}),e.jsxs(E,{className:"p-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Sales by Traffic Source"}),e.jsxs("select",{className:"px-3 py-1.5 text-sm border border-gray-200 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{children:"Monthly"}),e.jsx("option",{children:"Weekly"}),e.jsx("option",{children:"Daily"})]})]}),e.jsx(ve,{width:"100%",height:200,children:e.jsx(Bt,{children:e.jsx(Jt,{data:We,cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,paddingAngle:5,dataKey:"value",children:We.map((n,g)=>e.jsx(zt,{fill:n.color},`cell-${g}`))})})}),e.jsx("div",{className:"mt-4 space-y-2",children:We.map(n=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:n.color}}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:n.name})]}),e.jsxs("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[n.value,"%"]})]},n.name))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(E,{className:"p-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Top Selling Products"}),e.jsx("button",{className:"text-sm text-blue-600 dark:text-blue-400 hover:underline",children:"View All"})]}),e.jsx("div",{className:"space-y-4",children:Hs.map(n=>e.jsxs("div",{className:"flex items-center gap-4 p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-16 h-16 rounded-lg object-cover"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:n.name}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[n.sales," sales"]})]}),e.jsx("div",{className:"text-right",children:e.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:t(n.revenue)})})]},n.id))})]}),e.jsxs(E,{className:"p-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Recent Orders"}),e.jsx("button",{className:"text-sm text-blue-600 dark:text-blue-400 hover:underline",children:"View All"})]}),e.jsx("div",{className:"space-y-3",children:qs.map(n=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:n.id}),e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${n.status==="completed"?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":n.status==="pending"?"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400":"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400"}`,children:n.status})]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:n.customer}),e.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-0.5",children:n.date})]}),e.jsx("div",{className:"text-right",children:e.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:t(n.amount)})})]},n.id))})]})]})]})}const Vs=As("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}});function R({className:t,variant:n,size:g,asChild:b=!1,...o}){const h=b?Os:"button";return e.jsx(h,{"data-slot":"button",className:fe(Vs({variant:n,size:g,className:t})),...o})}function pe({isOpen:t,onClose:n,title:g,children:b}){return t?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:g}),e.jsx("button",{onClick:n,className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-500 dark:text-gray-400",children:e.jsx(Z,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"p-6",children:b})]})}):null}const be=({value:t,onSave:n,type:g="text",prefix:b="",options:o})=>{const[h,x]=d.useState(!1),[v,m]=d.useState(t);d.useEffect(()=>{m(t)},[t]);const i=()=>{x(!1),v!=t&&n(v)},c=a=>{a.key==="Enter"&&i()};return h?o?e.jsx("select",{autoFocus:!0,value:v,onChange:a=>m(a.target.value),onBlur:i,onKeyDown:c,className:"w-full min-w-[80px] px-2 py-1 bg-white dark:bg-gray-800 border border-blue-500 rounded text-gray-900 dark:text-white",onClick:a=>a.stopPropagation(),children:o.map(a=>e.jsx("option",{value:a,children:a},a))}):e.jsx("input",{autoFocus:!0,type:g,value:v,onChange:a=>m(a.target.value),onBlur:i,onKeyDown:c,className:"w-full min-w-[80px] px-2 py-1 bg-white dark:bg-gray-800 border border-blue-500 rounded text-gray-900 dark:text-white",onClick:a=>a.stopPropagation()}):e.jsxs("div",{onClick:a=>{a.stopPropagation(),x(!0)},className:"cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 p-1 rounded border border-transparent hover:border-gray-300 transition-all",children:[b,t]})};function Ws(){const{settings:t,formatPrice:n}=le(),[g,b]=d.useState([]),[o,h]=d.useState([]),[x,v]=d.useState([]),[m,i]=d.useState([]),[c,a]=d.useState(!0),[s,l]=d.useState(null),[k,r]=d.useState(!1),[y,j]=d.useState(null),[P,S]=d.useState(""),[w,p]=d.useState("All"),[A,u]=d.useState({name:"",category:"",subCategory:"",price:"",cost:"",stock:0,image:"",attributes:{},digitalItems:[]}),[T,W]=d.useState({email:"",password:"",code:""});d.useEffect(()=>{C()},[]);const C=async()=>{try{a(!0);const[f,I,N,L]=await Promise.all([fetch(`${_}/system/categories`),fetch(`${_}/system/subcategories`),fetch(`${_}/system/attributes`),ne.getAll()]);if(f.ok){const M=await f.json();h(M),M.length>0&&!A.category&&u(J=>({...J,category:M[0].name}))}I.ok&&v(await I.json()),N.ok&&i(await N.json()),b(L.products),l(null)}catch(f){console.error("Failed to load data",f),l(f.message||"Failed to load data")}finally{a(!1)}};async function H(){try{const f=await ne.getAll();b(f.products)}catch(f){console.error(f)}}const U=async(f,I,N,L=!1)=>{try{const M=g.find(G=>G.id===f);if(!M)return;let J;L?J={...M,attributes:{...M.attributes||{},[I]:N}}:J={...M,[I]:N},b(g.map(G=>G.id===f?J:G)),await ne.update(f,J)}catch(M){console.error("Error updating product:",M),H()}},de=async f=>{const I=f.target.files?.[0];if(!I)return;const N=new FormData;N.append("image",I);try{const L=await fetch(`${_}/upload`,{method:"POST",body:N});if(!L.ok)throw new Error("Upload failed");const M=await L.json();u(J=>({...J,image:M.url}))}catch(L){console.error("Error uploading file:",L),alert("Failed to upload file")}},ie=()=>{!T.email&&!T.password&&!T.code||(u(f=>({...f,digitalItems:[...f.digitalItems,T],stock:f.stock+1})),W({email:"",password:"",code:""}))},oe=f=>{u(I=>({...I,digitalItems:I.digitalItems.filter((N,L)=>L!==f),stock:Math.max(0,I.stock-1)}))},O=()=>{const I=["Email,Password,Code"].join(`
`),N=new Blob([I],{type:"text/csv"}),L=window.URL.createObjectURL(N),M=document.createElement("a");M.href=L,M.download="digital_products_template.csv",M.click(),window.URL.revokeObjectURL(L)},B=f=>{const I=f.target.files?.[0];if(!I)return;const N=new FileReader;N.onload=L=>{const J=(L.target?.result).split(`
`),G=[];for(let Q=1;Q<J.length;Q++){const X=J[Q].trim();if(!X)continue;const[ge,Ce,ft]=X.split(",").map(Gt=>Gt.trim());(ge||Ce||ft)&&G.push({email:ge,password:Ce,code:ft})}u(Q=>({...Q,digitalItems:[...Q.digitalItems,...G],stock:Q.stock+G.length}))},N.readAsText(I),f.target.value=""},Y=async()=>{try{const f=A.stock>10?"In Stock":"Low Stock",I={...A,status:f,image:A.image||"https://images.unsplash.com/photo-1606813907291-d86efa9b94db?w=100&h=100&fit=crop"};y?await ne.update(y.id,I):await ne.create(I),await H(),r(!1),j(null),u({name:"",category:o[0]?.name||"",price:"",cost:"",stock:0,image:"",digitalItems:[]}),W({email:"",password:"",code:""})}catch(f){console.error("Error saving product:",f),alert("Failed to save product")}},ee=async f=>{if(confirm("Are you sure you want to delete this product?"))try{await ne.delete(f),await H()}catch(I){console.error("Error deleting product:",I),alert("Failed to delete product")}},D=f=>{j(f),u({name:f.name,category:f.category,price:f.price.toString().replace("$",""),cost:f.cost?f.cost.toString().replace("$",""):"",stock:f.stock,image:f.image,purchasedEmail:f.purchasedEmail||"",purchasedPassword:f.purchasedPassword||"",productCode:f.productCode||"",digitalItems:f.digitalItems||[]}),r(!0)},F=(g||[]).filter(f=>{const I=f.name.toLowerCase().includes(P.toLowerCase()),N=w==="All"||f.category===w;return I&&N});return c?e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:"Loading products..."})}):s?e.jsxs("div",{className:"flex flex-col items-center justify-center h-96 space-y-4",children:[e.jsx("div",{className:"text-red-600 dark:text-red-400",children:s}),e.jsx(R,{onClick:H,children:"Try Again"})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Products"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Manage your product inventory"})]}),e.jsx(R,{onClick:()=>{j(null),u({name:"",category:o[0]?.name||"",price:"",cost:"",stock:0,image:"",digitalItems:[]}),W({email:"",password:"",code:""}),r(!0)},icon:me,children:"Add Product"})]}),e.jsx(E,{className:"p-8",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(re,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search products...",value:P,onChange:f=>S(f.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-sm text-gray-900 dark:text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-red-500"})]}),e.jsxs("select",{value:w,onChange:f=>p(f.target.value),className:"px-4 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-sm text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{children:"All"}),o.map(f=>e.jsx("option",{value:f.name,children:f.name},f.id))]})]})}),e.jsx(E,{className:"p-8",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[e.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-500 dark:text-gray-400",children:"Product"}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-500 dark:text-gray-400",children:"Category"}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-500 dark:text-gray-400",children:"Sub Category"}),m.filter(f=>f.isActive).map(f=>e.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-500 dark:text-gray-400",children:f.name},f.id)),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-500 dark:text-gray-400",children:"Price"}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-500 dark:text-gray-400",children:"Cost"}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-500 dark:text-gray-400",children:"Stock"}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-500 dark:text-gray-400",children:"Status"}),e.jsx("th",{className:"text-right py-3 px-4 text-sm font-medium text-gray-500 dark:text-gray-400",children:"Actions"})]})}),e.jsx("tbody",{children:F.map(f=>e.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:f.image,alt:f.name,className:"w-12 h-12 rounded-lg object-cover"}),e.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:e.jsx(be,{value:f.name,onSave:I=>U(f.id,"name",I)})})]})}),e.jsx("td",{className:"py-4 px-4 text-sm text-gray-600 dark:text-gray-300",children:e.jsx(be,{value:f.category,onSave:I=>U(f.id,"category",I),options:o.map(I=>I.name)})}),e.jsx("td",{className:"py-4 px-4 text-sm text-gray-600 dark:text-gray-300",children:e.jsx(be,{value:f.subCategory||"",onSave:I=>U(f.id,"subCategory",I),options:(()=>{const I=o.find(N=>N.slug===f.categorySlug||N.name===f.category);return I?x.filter(N=>N.categoryId===I.id&&N.isActive).map(N=>N.name):[]})()})}),m.filter(I=>I.isActive).map(I=>e.jsx("td",{className:"py-4 px-4 text-sm text-gray-600 dark:text-gray-300",children:e.jsx(be,{value:f.attributes?.[I.name]||"",onSave:N=>U(f.id,I.name,N,!0),options:I.options&&I.options.length>0?I.options:void 0,type:I.type==="number"?"number":"text"})},I.id)),e.jsx("td",{className:"py-4 px-4 text-sm font-medium text-gray-900 dark:text-white",children:e.jsx(be,{value:f.price,onSave:I=>U(f.id,"price",parseFloat(I)),prefix:t.currency_symbol,type:"number"})}),e.jsx("td",{className:"py-4 px-4 text-sm font-medium text-gray-500 dark:text-gray-400",children:e.jsx(be,{value:f.cost||0,onSave:I=>U(f.id,"cost",parseFloat(I)),prefix:t.currency_symbol,type:"number"})}),e.jsx("td",{className:"py-4 px-4 text-sm text-gray-600 dark:text-gray-300",children:e.jsx(be,{value:f.stock,onSave:I=>U(f.id,"stock",parseInt(I)),type:"number"})}),e.jsx("td",{className:"py-4 px-4",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${f.status==="In Stock"?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400"}`,children:f.status})}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>D(f),className:"p-2 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors",children:e.jsx(mt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>ee(f.id),className:"p-2 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:e.jsx(ae,{className:"w-4 h-4"})})]})})]},f.id))})]})})}),e.jsx(pe,{isOpen:k,onClose:()=>{r(!1),j(null),u({name:"",category:o[0]?.name||"",price:"",cost:"",stock:0,image:"",digitalItems:[]})},title:y?"Edit Product":"Add New Product",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Product Name"}),e.jsx("input",{type:"text",value:A.name,onChange:f=>u({...A,name:f.target.value}),className:"w-full px-4 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:"Enter product name"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Category"}),e.jsx("select",{value:A.category,onChange:f=>u({...A,category:f.target.value}),className:"w-full px-4 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-red-500",children:o.map(f=>e.jsx("option",{value:f.name,children:f.name},f.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Sub Category"}),e.jsxs("select",{value:A.subCategory,onChange:f=>u({...A,subCategory:f.target.value}),className:"w-full px-4 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-red-500",children:[e.jsx("option",{value:"",children:"Select Sub Category"}),(()=>{const f=o.find(I=>I.name===A.category);return f?x.filter(I=>I.categoryId===f.id&&I.isActive).map(I=>e.jsx("option",{value:I.name,children:I.name},I.id)):[]})()]})]})]}),m.filter(f=>f.isActive).length>0&&e.jsx("div",{className:"grid grid-cols-2 gap-4",children:m.filter(f=>f.isActive).map(f=>e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:f.name}),f.options&&f.options.length>0?e.jsxs("select",{value:A.attributes?.[f.name]||"",onChange:I=>u({...A,attributes:{...A.attributes,[f.name]:I.target.value}}),className:"w-full px-4 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-red-500",children:[e.jsxs("option",{value:"",children:["Select ",f.name]}),f.options.map(I=>e.jsx("option",{value:I,children:I},I))]}):e.jsx("input",{type:f.type==="number"?"number":"text",value:A.attributes?.[f.name]||"",onChange:I=>u({...A,attributes:{...A.attributes,[f.name]:I.target.value}}),className:"w-full px-4 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:`Enter ${f.name}`})]},f.id))}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Price (",t.currency_symbol,")"]}),e.jsx("input",{type:"number",step:"0.01",value:A.price,onChange:f=>u({...A,price:parseFloat(f.target.value)||0}),className:"w-full px-4 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Cost (",t.currency_symbol,")"]}),e.jsx("input",{type:"number",step:"0.01",value:A.cost,onChange:f=>u({...A,cost:parseFloat(f.target.value)||0}),className:"w-full px-4 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:"0.00"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Stock Quantity"}),e.jsx("input",{type:"number",value:A.stock,onChange:f=>u({...A,stock:parseInt(f.target.value)||0}),disabled:A.digitalItems.length>0,className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 ${A.digitalItems.length>0?"bg-gray-100 dark:bg-gray-800 text-gray-500 cursor-not-allowed border-gray-200 dark:border-gray-700":"bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white border-gray-200 dark:border-gray-600"}`,placeholder:"0"}),A.digitalItems.length>0&&e.jsx("p",{className:"mt-1 text-xs text-blue-600 dark:text-blue-400",children:"Stock is automatically calculated from the number of digital items."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Image URL (optional)"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"text",value:A.image,onChange:f=>u({...A,image:f.target.value}),className:"w-full px-4 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:"https://..."}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-px bg-gray-200 dark:bg-gray-700 flex-1"}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:"OR UPLOAD"}),e.jsx("div",{className:"h-px bg-gray-200 dark:bg-gray-700 flex-1"})]}),e.jsx("input",{type:"file",accept:"image/*",onChange:de,className:"w-full text-sm text-gray-500 dark:text-gray-400 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-red-50 file:text-red-700 hover:file:bg-red-100 dark:file:bg-red-900/30 dark:file:text-red-400"})]})]}),e.jsxs("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx("span",{className:"px-2 py-0.5 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400 text-xs rounded",children:"Admin Only"}),"Digital Stock Items"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(R,{variant:"secondary",onClick:O,className:"text-xs py-1 h-8 dark:text-white",children:"Download Template"}),e.jsxs("label",{className:"cursor-pointer",children:[e.jsx("span",{className:"inline-flex items-center justify-center px-3 py-1 text-xs font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors h-8",children:"Import CSV"}),e.jsx("input",{type:"file",accept:".csv",onChange:B,className:"hidden"})]})]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg mb-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-3",children:[e.jsx("input",{type:"email",value:T.email,onChange:f=>W({...T,email:f.target.value}),className:"w-full px-3 py-2 text-sm bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:"Email"}),e.jsx("input",{type:"text",value:T.password,onChange:f=>W({...T,password:f.target.value}),className:"w-full px-3 py-2 text-sm bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:"Password"}),e.jsx("input",{type:"text",value:T.code,onChange:f=>W({...T,code:f.target.value}),className:"w-full px-3 py-2 text-sm bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:"Code/Key"})]}),e.jsx(R,{onClick:ie,className:"w-full text-sm py-1",disabled:!T.email&&!T.password&&!T.code,children:"Add Item (+)"})]}),A.digitalItems.length>0&&e.jsx("div",{className:"max-h-48 overflow-y-auto border border-gray-200 dark:border-gray-700 rounded-lg",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900 sticky top-0",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left py-2 px-3 font-medium text-gray-500 dark:text-gray-400",children:"Email"}),e.jsx("th",{className:"text-left py-2 px-3 font-medium text-gray-500 dark:text-gray-400",children:"Password"}),e.jsx("th",{className:"text-left py-2 px-3 font-medium text-gray-500 dark:text-gray-400",children:"Code"}),e.jsx("th",{className:"w-10"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:A.digitalItems.map((f,I)=>e.jsxs("tr",{className:"bg-white dark:bg-gray-800",children:[e.jsx("td",{className:"py-2 px-3 text-gray-900 dark:text-gray-300 truncate max-w-[100px]",children:f.email}),e.jsx("td",{className:"py-2 px-3 text-gray-900 dark:text-gray-300 truncate max-w-[100px]",children:f.password}),e.jsx("td",{className:"py-2 px-3 font-mono text-gray-600 dark:text-gray-400 truncate max-w-[100px]",children:f.code}),e.jsx("td",{className:"py-2 px-3 text-right",children:e.jsx("button",{onClick:()=>oe(I),className:"text-red-500 hover:text-red-700",children:e.jsx(ae,{className:"w-4 h-4"})})})]},I))})]})}),e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Total Digital Stock: ",A.digitalItems.length," items (Stock quantity updated automatically)"]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx(R,{variant:"secondary",onClick:()=>{r(!1),j(null),u({name:"",category:"Consoles",price:"",cost:"",stock:0,image:"",digitalItems:[]})},className:"dark:text-white",children:"Cancel"}),e.jsx(R,{onClick:Y,className:"dark:text-white",children:y?"Update Product":"Add Product"})]})]})})]})}function Qs(){const[t,n]=d.useState([]),[g,b]=d.useState(""),[o,h]=d.useState(!1),[x,v]=d.useState(null),[m,i]=d.useState("overview");d.useEffect(()=>{c()},[]),d.useEffect(()=>{g&&a(g)},[g]);const c=async()=>{try{const s=await ne.getAll();s.products&&(n(s.products),s.products.length>0&&b(s.products[0].id.toString()))}catch(s){console.error("Failed to load products",s)}},a=async s=>{h(!0);try{const l=await ne.getOverview(s);v(l)}catch(l){console.error("Failed to load overview",l)}finally{h(!1)}};return!g&&t.length===0?e.jsx("div",{className:"p-6",children:"Loading products..."}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Product Data Overview"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Track inventory, sales, and customers per product"})]}),e.jsxs("div",{className:"w-full md:w-64",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Select Product"}),e.jsx("select",{value:g,onChange:s=>b(s.target.value),className:"w-full px-4 py-2 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 text-gray-900 dark:text-white",children:t.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))})]})]}),o?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-500",children:"Loading data..."})]}):x?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(E,{className:"p-6 bg-blue-50 dark:bg-blue-900/20 border-blue-100 dark:border-blue-800",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900 rounded-lg",children:e.jsx(K,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-600 dark:text-blue-400",children:"Total Inventory"}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:x.stats.totalRemaining+x.stats.totalSold})]})]})}),e.jsx(E,{className:"p-6 bg-green-50 dark:bg-green-900/20 border-green-100 dark:border-green-800",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-green-100 dark:bg-green-900 rounded-lg",children:e.jsx(se,{className:"w-6 h-6 text-green-600 dark:text-green-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-600 dark:text-green-400",children:"Sold Items"}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:x.stats.totalSold})]})]})}),e.jsx(E,{className:"p-6 bg-orange-50 dark:bg-orange-900/20 border-orange-100 dark:border-orange-800",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-orange-100 dark:bg-orange-900 rounded-lg",children:e.jsx(ct,{className:"w-6 h-6 text-orange-600 dark:text-orange-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-orange-600 dark:text-orange-400",children:"Remaining Stock"}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:x.stats.totalRemaining})]})]})})]}),e.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:e.jsxs("nav",{className:"flex gap-6",children:[e.jsx("button",{onClick:()=>i("overview"),className:`py-4 px-2 border-b-2 font-medium text-sm transition-colors ${m==="overview"?"border-red-600 text-red-600":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:"Overview"}),e.jsx("button",{onClick:()=>i("sold"),className:`py-4 px-2 border-b-2 font-medium text-sm transition-colors ${m==="sold"?"border-red-600 text-red-600":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:"Sold / Used Keys"}),e.jsx("button",{onClick:()=>i("customers"),className:`py-4 px-2 border-b-2 font-medium text-sm transition-colors ${m==="customers"?"border-red-600 text-red-600":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:"Customers"}),e.jsx("button",{onClick:()=>i("inventory"),className:`py-4 px-2 border-b-2 font-medium text-sm transition-colors ${m==="inventory"?"border-red-600 text-red-600":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:"Remaining Inventory"})]})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm overflow-hidden",children:[m==="sold"&&e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-gray-100 dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 font-bold text-gray-900 dark:text-white",children:"Date"}),e.jsx("th",{className:"px-6 py-4 font-bold text-gray-900 dark:text-white",children:"Customer"}),e.jsx("th",{className:"px-6 py-4 font-bold text-gray-900 dark:text-white",children:"Order"}),e.jsx("th",{className:"px-6 py-4 font-bold text-gray-900 dark:text-white",children:"Sent Data (Email / Pass / Code)"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:x.soldItems.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"px-6 py-8 text-center text-gray-500 font-medium",children:"No items sold yet."})}):x.soldItems.map((s,l)=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 text-gray-900 dark:text-gray-100 font-medium",children:new Date(s.date).toLocaleDateString()}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"font-bold text-gray-900 dark:text-white",children:s.customerName}),e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 font-medium",children:s.customerEmail})]}),e.jsx("td",{className:"px-6 py-4 text-blue-700 dark:text-blue-300 font-mono font-bold",children:s.orderNumber}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"space-y-1",children:[s.code&&e.jsxs("div",{className:"text-xs bg-gray-200 dark:bg-gray-600 text-gray-900 dark:text-gray-100 px-2 py-1 rounded inline-block mr-2 font-mono",children:[e.jsx("span",{className:"font-bold",children:"Code:"})," ",s.code]}),s.email&&e.jsxs("div",{className:"text-xs text-gray-800 dark:text-gray-200 font-medium",children:[e.jsx("span",{className:"font-bold",children:"Email:"})," ",s.email]}),s.password&&e.jsxs("div",{className:"text-xs text-gray-800 dark:text-gray-200 font-medium",children:[e.jsx("span",{className:"font-bold",children:"Pass:"})," ",s.password]})]})})]},l))})]})}),m==="customers"&&e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-gray-100 dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 font-bold text-gray-900 dark:text-white",children:"Customer Name"}),e.jsx("th",{className:"px-6 py-4 font-bold text-gray-900 dark:text-white",children:"Email"}),e.jsx("th",{className:"px-6 py-4 font-bold text-gray-900 dark:text-white",children:"Last Purchase Date"}),e.jsx("th",{className:"px-6 py-4 font-bold text-gray-900 dark:text-white",children:"Order Ref"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:x.customers.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"px-6 py-8 text-center text-gray-500",children:"No customers found."})}):x.customers.map((s,l)=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 font-semibold text-gray-900 dark:text-white",children:s.name}),e.jsx("td",{className:"px-6 py-4 text-gray-700 dark:text-gray-300",children:s.email}),e.jsx("td",{className:"px-6 py-4 text-gray-700 dark:text-gray-300",children:new Date(s.date).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 text-gray-700 dark:text-gray-300 font-mono",children:s.orderNumber})]},l))})]})}),m==="inventory"&&e.jsxs("div",{className:"overflow-x-auto",children:[e.jsx("div",{className:"p-4 bg-yellow-50 dark:bg-yellow-900/20 border-b border-yellow-100 dark:border-yellow-800",children:e.jsx("p",{className:"text-sm text-yellow-800 dark:text-yellow-200 font-medium",children:"These items are currently available in stock and will be automatically assigned to new orders."})}),e.jsxs("table",{className:"w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-gray-100 dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 font-bold text-gray-900 dark:text-white",children:"#"}),e.jsx("th",{className:"px-6 py-4 font-bold text-gray-900 dark:text-white",children:"Code"}),e.jsx("th",{className:"px-6 py-4 font-bold text-gray-900 dark:text-white",children:"Account Email"}),e.jsx("th",{className:"px-6 py-4 font-bold text-gray-900 dark:text-white",children:"Account Password"}),e.jsx("th",{className:"px-6 py-4 font-bold text-gray-900 dark:text-white",children:"Status"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:x.remainingItems.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-6 py-8 text-center text-gray-500 font-medium",children:"No items in inventory."})}):x.remainingItems.map((s,l)=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 text-gray-900 dark:text-gray-100 font-medium",children:l+1}),e.jsx("td",{className:"px-6 py-4 font-mono font-bold text-gray-900 dark:text-white",children:s.code||"-"}),e.jsx("td",{className:"px-6 py-4 text-gray-900 dark:text-gray-100 font-medium",children:s.email||"-"}),e.jsx("td",{className:"px-6 py-4 text-gray-900 dark:text-gray-100 font-mono font-medium",children:s.password||"-"}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-bold bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",children:"Available"})})]},l))})]})]}),m==="overview"&&e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Summary"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between border-b border-gray-100 dark:border-gray-700 py-2",children:[e.jsx("span",{className:"text-gray-500",children:"Product Name"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:x.product.name})]}),e.jsxs("div",{className:"flex justify-between border-b border-gray-100 dark:border-gray-700 py-2",children:[e.jsx("span",{className:"text-gray-500",children:"Total Sales Volume"}),e.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[x.stats.totalSold," Units"]})]}),e.jsxs("div",{className:"flex justify-between border-b border-gray-100 dark:border-gray-700 py-2",children:[e.jsx("span",{className:"text-gray-500",children:"Current Stock Level"}),e.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[x.stats.totalRemaining," Units"]})]}),e.jsxs("div",{className:"flex justify-between border-b border-gray-100 dark:border-gray-700 py-2",children:[e.jsx("span",{className:"text-gray-500",children:"Last Sale Date"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:x.soldItems.length>0?new Date(x.soldItems[0].date).toLocaleDateString():"N/A"})]})]})]})]})]}):e.jsx("div",{className:"text-center py-12 text-gray-500",children:"Select a product to view details."})]})}const Re=({value:t,onSave:n,type:g="text",prefix:b="",options:o,className:h=""})=>{const[x,v]=d.useState(!1),[m,i]=d.useState(t);d.useEffect(()=>{i(t)},[t]);const c=()=>{v(!1),m!=t&&n(m)},a=s=>{s.key==="Enter"&&c()};return x?o?e.jsx("select",{autoFocus:!0,value:m,onChange:s=>i(s.target.value),onBlur:c,onKeyDown:a,className:"w-full min-w-[80px] px-2 py-1 bg-white dark:bg-gray-800 border border-blue-500 rounded text-gray-900 dark:text-white",onClick:s=>s.stopPropagation(),children:o.map(s=>e.jsx("option",{value:s,children:s},s))}):e.jsx("input",{autoFocus:!0,type:g,value:m,onChange:s=>i(s.target.value),onBlur:c,onKeyDown:a,className:"w-full min-w-[80px] px-2 py-1 bg-white dark:bg-gray-800 border border-blue-500 rounded text-gray-900 dark:text-white",onClick:s=>s.stopPropagation()}):e.jsxs("div",{onClick:s=>{s.stopPropagation(),v(!0)},className:`cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 p-1 rounded border border-transparent hover:border-gray-300 transition-all ${h}`,children:[b,t||"-"]})};function Ks(){const{settings:t,formatPrice:n}=le(),[g,b]=d.useState([]),[o,h]=d.useState(!0),[x,v]=d.useState(""),[m,i]=d.useState("All"),[c,a]=d.useState("All"),[s,l]=d.useState([]),[k,r]=d.useState(!1),[y,j]=d.useState(!1),[P,S]=d.useState(null),[w,p]=d.useState(null);d.useEffect(()=>{A()},[]);const A=async()=>{try{const O=await ne.getAll();l(O.products||[])}catch(O){console.error("Failed to load products:",O)}};d.useEffect(()=>{u()},[x,m,c]);const u=async()=>{try{h(!0);const O=await ot.getAll({status:m,search:x,product:c});b(O.orders||[])}catch(O){console.error(O)}finally{h(!1)}},T=async(O,B)=>{try{b(g.map(Y=>Y.id===O?{...Y,...B}:Y)),await ot.update(O,B)}catch(Y){console.error("Failed to update order:",Y),u()}},W=async(O,B)=>{T(O,{status:B})},C=async(O,B)=>{S(B)},H=O=>{p(O),j(!0)},U=async()=>{const O=document.getElementById("invoice-content");if(!(!O||!w))try{const B=await pt(O,{scale:2,logging:!1,useCORS:!0,onclone:f=>{f.documentElement.classList.remove("dark");const I=f.getElementById("invoice-content");I&&(I.style.backgroundColor="#ffffff",I.style.color="#111827")}}),Y=B.toDataURL("image/png"),ee=new bt({orientation:"portrait",unit:"mm",format:"a4"}),D=210,F=B.height*D/B.width;ee.addImage(Y,"PNG",0,0,D,F),ee.save(`invoice-${w.orderNumber||w.id}.pdf`)}catch(B){console.error("Error generating PDF:",B),alert("Failed to generate PDF")}},de=()=>{window.print()},ie=O=>{p(O),r(!0)},oe=O=>{switch(O){case"completed":return"bg-green-100 dark:bg-green-900/50 text-green-800 dark:text-green-300 border border-green-200 dark:border-green-800";case"pending":return"bg-yellow-100 dark:bg-yellow-900/50 text-yellow-800 dark:text-yellow-300 border border-yellow-200 dark:border-yellow-800";case"pending_approval":return"bg-orange-100 dark:bg-orange-900/50 text-orange-800 dark:text-orange-300 border border-orange-200 dark:border-orange-800";case"processing":return"bg-blue-100 dark:bg-blue-900/50 text-blue-800 dark:text-blue-300 border border-blue-200 dark:border-blue-800";case"shipped":return"bg-purple-100 dark:bg-purple-900/50 text-purple-800 dark:text-purple-300 border border-purple-200 dark:border-purple-800";case"cancelled":return"bg-red-100 dark:bg-red-900/50 text-red-800 dark:text-red-300 border border-red-200 dark:border-red-800";default:return"bg-gray-100 dark:bg-gray-800 text-gray-800 dark:text-gray-300 border border-gray-200 dark:border-gray-700"}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Orders"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Manage and track all orders"})]}),e.jsxs("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2 shadow-lg shadow-blue-500/30",children:[e.jsx(he,{className:"w-4 h-4"}),"Export"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsxs(E,{className:"text-center p-8",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Orders"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-1",children:g.length})]}),e.jsxs(E,{className:"text-center p-8",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Pending"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400 mt-1",children:g.filter(O=>O.status==="pending").length})]}),e.jsxs(E,{className:"text-center p-8",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Processing"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400 mt-1",children:g.filter(O=>O.status==="processing").length})]}),e.jsxs(E,{className:"text-center p-8",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Completed"}),e.jsx("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400 mt-1",children:g.filter(O=>O.status==="completed").length})]}),e.jsxs(E,{className:"text-center p-8",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Cancelled"}),e.jsx("p",{className:"text-2xl font-bold text-red-600 dark:text-red-400 mt-1",children:g.filter(O=>O.status==="cancelled").length})]})]}),e.jsx(E,{className:"p-8",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(re,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search orders or customers...",value:x,onChange:O=>v(O.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-sm text-gray-900 dark:text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-red-500"})]}),e.jsxs("select",{value:c,onChange:O=>a(O.target.value),className:"px-4 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-sm text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"All",children:"All Products"}),s.map(O=>e.jsx("option",{value:O.name,children:O.name},O.id))]}),e.jsxs("select",{value:m,onChange:O=>i(O.target.value),className:"px-4 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-sm text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{children:"All"}),e.jsx("option",{children:"Pending"}),e.jsx("option",{children:"Processing"}),e.jsx("option",{children:"Shipped"}),e.jsx("option",{children:"Completed"}),e.jsx("option",{children:"Cancelled"})]})]})}),e.jsx(E,{className:"p-8",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[e.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-500 dark:text-gray-400",children:"Order ID"}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-500 dark:text-gray-400",children:"Customer"}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-500 dark:text-gray-400",children:"Product"}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-500 dark:text-gray-400",children:"Digital Email"}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-500 dark:text-gray-400",children:"Digital Password"}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-500 dark:text-gray-400",children:"Digital Code"}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-500 dark:text-gray-400",children:"Inventory ID"}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-500 dark:text-gray-400",children:"Payment Method"}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-500 dark:text-gray-400",children:"Proof"}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-500 dark:text-gray-400",children:"Date"}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-500 dark:text-gray-400",children:"Status"}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-500 dark:text-gray-400",children:"Amount"}),e.jsx("th",{className:"text-right py-3 px-4 text-sm font-medium text-gray-500 dark:text-gray-400",children:"Action"})]})}),e.jsx("tbody",{children:o?e.jsx("tr",{children:e.jsx("td",{colSpan:13,className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"Loading orders..."})}):g.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:13,className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"No orders found"})}):g.map(O=>e.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[e.jsx("td",{className:"py-4 px-4 font-medium text-gray-900 dark:text-white",children:O.id}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:O.customer}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:O.email})]})}),e.jsx("td",{className:"py-4 px-4 text-sm text-gray-600 dark:text-gray-300",children:e.jsxs("div",{children:[e.jsx("p",{children:O.product}),e.jsxs("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:[O.items," item(s)"]})]})}),e.jsx("td",{className:"py-4 px-4 text-sm text-gray-600 dark:text-gray-300 truncate max-w-[100px]",children:e.jsx(Re,{value:O.digital_email||"",onSave:B=>T(O.id,{digital_email:String(B)}),className:"truncate block"})}),e.jsx("td",{className:"py-4 px-4 text-sm text-gray-600 dark:text-gray-300 truncate max-w-[100px]",children:e.jsx(Re,{value:O.digital_password||"",onSave:B=>T(O.id,{digital_password:String(B)}),className:"truncate block"})}),e.jsx("td",{className:"py-4 px-4 text-sm font-mono text-gray-600 dark:text-gray-300 truncate max-w-[100px]",children:e.jsx(Re,{value:O.digital_code||"",onSave:B=>T(O.id,{digital_code:String(B)}),className:"truncate block"})}),e.jsx("td",{className:"py-4 px-4 text-sm text-gray-600 dark:text-gray-300",children:O.inventory_id==="POS"?e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300",children:"POS"}):e.jsx(Re,{value:O.inventory_id||"",onSave:B=>T(O.id,{inventory_id:String(B)})})}),e.jsx("td",{className:"py-4 px-4 text-sm text-gray-600 dark:text-gray-300",children:e.jsx("span",{className:"capitalize",children:O.payment_method?.replace("_"," ")||"N/A"})}),e.jsx("td",{className:"py-4 px-4 text-sm text-gray-600 dark:text-gray-300",children:O.payment_proof?e.jsxs("button",{onClick:()=>C(O.id,O.payment_proof),className:"text-blue-600 hover:underline flex items-center gap-1",children:[e.jsx(we,{className:"w-4 h-4"}),"View"]}):e.jsx("span",{className:"text-gray-400",children:"-"})}),e.jsx("td",{className:"py-4 px-4 text-sm text-gray-600 dark:text-gray-300",children:O.date}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("select",{value:O.status,onChange:B=>W(O.id,B.target.value),className:`px-2 py-1 rounded-full text-xs font-medium border-none focus:ring-2 focus:ring-offset-1 cursor-pointer ${oe(O.status)}`,children:[e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"pending_approval",children:"Pending Approval"}),e.jsx("option",{value:"processing",children:"Processing"}),e.jsx("option",{value:"shipped",children:"Shipped"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})}),e.jsx("td",{className:"py-4 px-4 font-medium text-gray-900 dark:text-white",children:n(O.amount)}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>ie(O),className:"p-2 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors",title:"View Invoice",children:e.jsx(et,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>ie(O),className:"p-2 text-green-600 dark:text-green-400 hover:bg-green-50 dark:hover:bg-green-900/20 rounded-lg transition-colors",title:"Download Invoice",children:e.jsx(he,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>H(O),className:"p-2 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",title:"View Details",children:e.jsx(we,{className:"w-4 h-4"})})]})})]},O.id))})]})})}),e.jsxs(ue,{children:[k&&w&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsx($.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto text-black",children:e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8 print:hidden",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Invoice Generated"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:U,className:"p-2 bg-green-100 text-green-600 rounded-lg hover:bg-green-200 transition-colors",title:"Download PDF",children:e.jsx(he,{className:"w-5 h-5"})}),e.jsx("button",{onClick:de,className:"p-2 bg-blue-100 text-blue-600 rounded-lg hover:bg-blue-200 transition-colors",title:"Print Invoice",children:e.jsx(Et,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>r(!1),className:"p-2 hover:bg-gray-100 rounded-lg",children:e.jsx(Z,{className:"w-6 h-6"})})]})]}),e.jsxs("div",{className:"space-y-6",id:"invoice-content",style:{"--color-gray-50":"#f9fafb","--color-gray-100":"#f3f4f6","--color-gray-200":"#e5e7eb","--color-gray-300":"#d1d5db","--color-gray-400":"#9ca3af","--color-gray-500":"#6b7280","--color-gray-600":"#4b5563","--color-gray-700":"#374151","--color-gray-800":"#1f2937","--color-gray-900":"#111827","--color-red-600":"#dc2626",backgroundColor:"#ffffff",color:"#111827"},children:[e.jsxs("div",{className:"flex justify-between items-start border-b border-gray-200 pb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"GamesUp Store"}),e.jsx("p",{className:"text-gray-500",children:"123 Gaming Street"}),e.jsx("p",{className:"text-gray-500",children:"Tech City, TC 90210"}),e.jsx("p",{className:"text-gray-500",children:"contact@gamesup.com"})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-lg font-bold text-gray-900",children:["Invoice #",w.orderNumber||w.id]}),e.jsx("p",{className:"text-gray-500",children:w.date})]})]}),e.jsx("div",{className:"grid grid-cols-2 gap-8 border-b border-gray-200 pb-6",children:e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-2",children:"Bill To:"}),e.jsx("p",{className:"text-gray-600",children:w.customer}),e.jsx("p",{className:"text-gray-600",children:w.email})]})}),e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("th",{className:"text-left py-2 text-sm font-semibold text-gray-900",children:"Item"}),e.jsx("th",{className:"text-center py-2 text-sm font-semibold text-gray-900",children:"Qty"}),e.jsx("th",{className:"text-right py-2 text-sm font-semibold text-gray-900",children:"Price"}),e.jsx("th",{className:"text-right py-2 text-sm font-semibold text-gray-900",children:"Total"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:e.jsxs("tr",{children:[e.jsx("td",{className:"py-3 text-sm text-gray-600",children:e.jsx("div",{children:w.product})}),e.jsx("td",{className:"py-3 text-center text-sm text-gray-600",children:w.items}),e.jsx("td",{className:"py-3 text-right text-sm text-gray-600",children:n(w.amount)}),e.jsx("td",{className:"py-3 text-right text-sm font-medium text-gray-900",children:n(w.amount)})]})})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-4 space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Subtotal:"}),e.jsx("span",{className:"font-medium text-gray-900",children:n(w.amount)})]}),e.jsxs("div",{className:"flex justify-between text-lg font-bold border-t border-gray-200 pt-2",children:[e.jsx("span",{className:"text-gray-900",children:"Total:"}),e.jsx("span",{className:"text-red-600",children:n(w.amount)})]})]})]}),e.jsx("div",{className:"mt-8 pt-6 border-t border-gray-200 text-center text-sm text-gray-500 print:hidden",children:e.jsx("p",{children:"Thank you for your business!"})})]})})}),y&&w&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsx($.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Order Details"}),e.jsx("button",{onClick:()=>j(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg text-gray-500 dark:text-gray-400",children:e.jsx(Z,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-2",children:"Order ID"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:w.orderNumber||w.id})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-2",children:"Status"}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${oe(w.status)}`,children:w.status.charAt(0).toUpperCase()+w.status.slice(1)})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-2",children:"Date"}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:w.date})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-2",children:"Total Amount"}),e.jsx("p",{className:"text-lg font-bold text-red-600 dark:text-red-400",children:n(w.amount)})]})]}),e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Customer Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Name"}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:w.customer})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Email"}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:w.email})]})]})]}),e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Product Details"}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4",children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:w.product}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[w.items," item(s)"]})]})]}),e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"p-1 bg-blue-100 dark:bg-blue-900/30 rounded text-blue-600 dark:text-blue-400",children:e.jsx(et,{className:"w-4 h-4"})}),"Digital Delivery"]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 bg-blue-50 dark:bg-blue-900/10 rounded-xl p-6 border border-blue-100 dark:border-blue-800",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-1",children:"Digital Email"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("input",{type:"text",value:w.digital_email||"",readOnly:!0,className:"flex-1 bg-white dark:bg-gray-800 border-none rounded-lg py-2 px-3 text-gray-900 dark:text-white shadow-sm"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-1",children:"Password"}),e.jsx("input",{type:"text",value:w.digital_password||"",readOnly:!0,className:"w-full bg-white dark:bg-gray-800 border-none rounded-lg py-2 px-3 text-gray-900 dark:text-white shadow-sm font-mono"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-1",children:"License Code"}),e.jsx("input",{type:"text",value:w.digital_code||"",readOnly:!0,className:"w-full bg-white dark:bg-gray-800 border-none rounded-lg py-2 px-3 text-gray-900 dark:text-white shadow-sm font-mono tracking-widest"})]})]}),w.inventory_id&&e.jsx("div",{className:"pt-2 border-t border-blue-200 dark:border-blue-800/50 mt-2",children:e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Linked Inventory ID: ",e.jsx("span",{className:"font-mono text-gray-700 dark:text-gray-300",children:w.inventory_id})]})})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2 italic",children:"* These credentials are provided to the customer upon order completion."})]})]}),e.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-200 dark:border-gray-700 flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>j(!1),className:"px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Close"}),e.jsx("button",{onClick:()=>{j(!1),r(!0)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"View Invoice"})]})]})})}),P&&e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:()=>S(null),children:e.jsxs($.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",onClick:O=>O.stopPropagation(),children:[e.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Payment Proof"}),e.jsx("button",{onClick:()=>S(null),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg text-gray-500 dark:text-gray-400",children:e.jsx(Z,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"flex-1 overflow-auto p-4 bg-gray-100 dark:bg-gray-900 flex items-center justify-center",children:e.jsx("img",{src:P,alt:"Payment Proof",className:"max-w-full max-h-full object-contain rounded-lg shadow-lg"})}),e.jsxs("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 flex justify-end gap-3",children:[e.jsxs("button",{onClick:()=>window.open(P,"_blank"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[e.jsx(he,{className:"w-4 h-4"}),"Open Original"]}),e.jsx("button",{onClick:()=>S(null),className:"px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Close"})]})]})})]})]})}const Pt=[{month:"Jan",revenue:45200,orders:234,profit:18500},{month:"Feb",revenue:38900,orders:198,profit:15800},{month:"Mar",revenue:52300,orders:276,profit:21200},{month:"Apr",revenue:48700,orders:251,profit:19400},{month:"May",revenue:59100,orders:312,profit:24100},{month:"Jun",revenue:67800,orders:358,profit:28300},{month:"Jul",revenue:63400,orders:334,profit:26200},{month:"Aug",revenue:72500,orders:389,profit:30800},{month:"Sep",revenue:78900,orders:421,profit:33500},{month:"Oct",revenue:71200,orders:374,profit:29800},{month:"Nov",revenue:84600,orders:456,profit:36200},{month:"Dec",revenue:92300,orders:498,profit:39500}],Qe=[{name:"Consoles",value:42,color:"#DC2626"},{name:"Games",value:28,color:"#EF4444"},{name:"Accessories",value:20,color:"#F87171"},{name:"Services",value:10,color:"#FCA5A5"}],Ys=[{region:"North America",revenue:342500,growth:15.2,flag:"🇺🇸"},{region:"Europe",revenue:289300,growth:12.8,flag:"🇪🇺"},{region:"Asia Pacific",revenue:215600,growth:24.5,flag:"🇯🇵"},{region:"Latin America",revenue:98400,growth:18.3,flag:"🇧🇷"},{region:"Middle East",revenue:54200,growth:9.7,flag:"🇦🇪"}];function Zs(){const{formatPrice:t}=le(),[n,g]=d.useState("12months");return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Analytics & Revenue"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Detailed insights and performance metrics"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("select",{value:n,onChange:b=>g(b.target.value),className:"px-4 py-2 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg text-sm text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"7days",children:"Last 7 Days"}),e.jsx("option",{value:"30days",children:"Last 30 Days"}),e.jsx("option",{value:"3months",children:"Last 3 Months"}),e.jsx("option",{value:"12months",children:"Last 12 Months"})]}),e.jsx(R,{icon:he,children:"Export Report"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(E,{className:"p-8",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Revenue"}),e.jsx("h3",{className:"text-3xl font-bold text-gray-900 dark:text-white mt-2",children:t(847239)}),e.jsxs("div",{className:"flex items-center gap-1 mt-2",children:[e.jsx(ce,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{className:"text-sm font-medium text-green-500",children:"+18.2%"}),e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"vs last year"})]})]}),e.jsx("div",{className:"p-3 rounded-lg bg-gradient-to-br from-green-500 to-green-700 shadow-lg shadow-green-500/30",children:e.jsx(ce,{className:"w-6 h-6 text-white"})})]})}),e.jsx(E,{className:"p-8",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Net Profit"}),e.jsx("h3",{className:"text-3xl font-bold text-gray-900 dark:text-white mt-2",children:t(312845)}),e.jsxs("div",{className:"flex items-center gap-1 mt-2",children:[e.jsx(ce,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{className:"text-sm font-medium text-green-500",children:"+22.4%"}),e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"vs last year"})]})]}),e.jsx("div",{className:"p-3 rounded-lg bg-gradient-to-br from-blue-500 to-blue-700 shadow-lg shadow-blue-500/30",children:e.jsx(ce,{className:"w-6 h-6 text-white"})})]})}),e.jsx(E,{className:"p-8",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Avg. Order Value"}),e.jsx("h3",{className:"text-3xl font-bold text-gray-900 dark:text-white mt-2",children:t(68.02)}),e.jsxs("div",{className:"flex items-center gap-1 mt-2",children:[e.jsx(ce,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{className:"text-sm font-medium text-green-500",children:"+5.8%"}),e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"vs last year"})]})]}),e.jsx("div",{className:"p-3 rounded-lg bg-gradient-to-br from-purple-500 to-purple-700 shadow-lg shadow-purple-500/30",children:e.jsx(ce,{className:"w-6 h-6 text-white"})})]})})]}),e.jsxs(E,{className:"p-8",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Revenue Overview"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Monthly revenue and profit trends"})]})}),e.jsx(ve,{width:"100%",height:350,children:e.jsxs(yt,{data:Pt,children:[e.jsx(rt,{strokeDasharray:"3 3",stroke:"#374151",opacity:.1}),e.jsx(lt,{dataKey:"month",stroke:"#6B7280",fontSize:12}),e.jsx(dt,{stroke:"#6B7280",fontSize:12}),e.jsx(nt,{contentStyle:{backgroundColor:"#1F2937",border:"none",borderRadius:"8px",color:"#fff"}}),e.jsx(Te,{type:"monotone",dataKey:"revenue",stroke:"#3B82F6",strokeWidth:3,dot:{r:4}}),e.jsx(Te,{type:"monotone",dataKey:"profit",stroke:"#10B981",strokeWidth:3,dot:{r:4}})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(E,{className:"p-8",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-6",children:"Revenue by Category"}),e.jsx("div",{className:"flex items-center justify-center mb-6",children:e.jsx(ve,{width:"100%",height:200,children:e.jsx(Bt,{children:e.jsx(Jt,{data:Qe,cx:"50%",cy:"50%",innerRadius:60,outerRadius:90,paddingAngle:5,dataKey:"value",children:Qe.map((b,o)=>e.jsx(zt,{fill:b.color},`cell-${o}`))})})})}),e.jsx("div",{className:"space-y-3",children:Qe.map(b=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:b.color}}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:b.name})]}),e.jsxs("span",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:[b.value,"%"]})]},b.name))})]}),e.jsxs(E,{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-6",children:"Top Regions by Revenue"}),e.jsx("div",{className:"space-y-4",children:Ys.map((b,o)=>e.jsxs("div",{className:"flex items-center gap-4 p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-lg bg-gray-100 dark:bg-gray-700 text-2xl",children:b.flag}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:b.region}),e.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:t(b.revenue)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex-1 h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-red-500 to-red-600 rounded-full",style:{width:`${b.growth*3}%`}})}),e.jsxs("span",{className:"text-xs font-medium text-green-500",children:["+",b.growth,"%"]})]})]})]},b.region))})]})]}),e.jsxs(E,{className:"p-8",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Monthly Orders"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Total orders processed each month"})]})}),e.jsx(ve,{width:"100%",height:250,children:e.jsxs(Mt,{data:Pt,children:[e.jsx(rt,{strokeDasharray:"3 3",stroke:"#374151",opacity:.1}),e.jsx(lt,{dataKey:"month",stroke:"#6B7280",fontSize:12}),e.jsx(dt,{stroke:"#6B7280",fontSize:12}),e.jsx(nt,{contentStyle:{backgroundColor:"#1F2937",border:"none",borderRadius:"8px",color:"#fff"}}),e.jsx(Ut,{dataKey:"orders",fill:"#DC2626",radius:[8,8,0,0]})]})})]})]})}function Xs(){const{settings:t,formatPrice:n}=le(),[g,b]=d.useState([]),[o,h]=d.useState(!0),[x,v]=d.useState(""),[m,i]=d.useState(null),[c,a]=d.useState([]),[s,l]=d.useState(!1);d.useEffect(()=>{r()},[]),d.useEffect(()=>{m?.email&&k(m.email)},[m]);const k=async j=>{try{l(!0);const P=await ot.getAll({email:j});a(P.orders||[])}catch(P){console.error("Failed to load customer orders:",P),a([])}finally{l(!1)}},r=async()=>{try{h(!0);const j=await Rs.getAll();j&&j.customers&&b(j.customers)}catch(j){console.error("Failed to load customers:",j)}finally{h(!1)}},y=g.filter(j=>j.name.toLowerCase().includes(x.toLowerCase())||j.email.toLowerCase().includes(x.toLowerCase()));return o?e.jsx("div",{className:"p-8 text-center text-gray-500",children:"Loading customers..."}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Customers"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Manage customer profiles and relationships"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs(E,{className:"text-center p-8",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Customers"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-1",children:g.length})]}),e.jsxs(E,{className:"text-center p-8",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"VIP Customers"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400 mt-1",children:g.filter(j=>j.status==="VIP").length})]}),e.jsxs(E,{className:"text-center p-8",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Avg. Orders"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-1",children:g.length>0?Math.round(g.reduce((j,P)=>j+P.orders,0)/g.length):0})]}),e.jsxs(E,{className:"text-center p-8",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Lifetime Value"}),e.jsx("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400 mt-1",children:n(g.reduce((j,P)=>j+P.spent,0))})]})]}),e.jsx(E,{className:"p-8",children:e.jsxs("div",{className:"relative",children:[e.jsx(re,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search customers...",value:x,onChange:j=>v(j.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-sm text-gray-900 dark:text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-red-500"})]})}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:y.length===0?e.jsx("div",{className:"col-span-full text-center py-12 text-gray-500",children:"No customers found."}):y.map(j=>e.jsx(E,{className:"cursor-pointer hover:shadow-lg hover:border-red-500 dark:hover:border-red-500 transition-all p-8",onClick:()=>i(j),children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("img",{src:j.avatar,alt:j.name,className:"w-16 h-16 rounded-full object-cover"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:j.name}),j.status==="VIP"&&e.jsxs("span",{className:"px-2 py-0.5 bg-gradient-to-r from-yellow-400 to-yellow-600 text-white text-xs font-medium rounded-full flex items-center gap-1",children:[e.jsx(ke,{className:"w-3 h-3"}),"VIP"]})]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-3",children:j.email}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Orders"}),e.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:j.orders})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Spent"}),e.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:n(j.spent)})]})]})]})]})},j.id))}),m&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-end",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>i(null)}),e.jsxs("div",{className:"relative w-full max-w-lg h-full bg-white dark:bg-gray-800 shadow-2xl overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 p-6 flex items-center justify-between z-10",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Customer Details"}),e.jsx("button",{onClick:()=>i(null),className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-500 dark:text-gray-400",children:e.jsx(Z,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("img",{src:m.avatar,alt:m.name,className:"w-20 h-20 rounded-full object-cover"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:m.name}),m.status==="VIP"&&e.jsxs("span",{className:"px-2 py-0.5 bg-gradient-to-r from-yellow-400 to-yellow-600 text-white text-xs font-medium rounded-full flex items-center gap-1",children:[e.jsx(ke,{className:"w-3 h-3"}),"VIP"]})]}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Customer since ",m.joinDate]})]})]}),e.jsxs(E,{className:"p-8",children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-4",children:"Contact Information"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-blue-50 dark:bg-blue-900/20",children:e.jsx(ye,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Email"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:m.email})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-green-50 dark:bg-green-900/20",children:e.jsx(Le,{className:"w-4 h-4 text-green-600 dark:text-green-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Phone"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:m.phone})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-purple-50 dark:bg-purple-900/20",children:e.jsx(Se,{className:"w-4 h-4 text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Location"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:m.location})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs(E,{className:"p-8",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Orders"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-1",children:m.orders})]}),e.jsxs(E,{className:"p-8",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Spent"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-1",children:n(m.spent)})]})]}),e.jsxs(E,{children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-4",children:"Recent Orders"}),e.jsx("div",{className:"space-y-3",children:s?e.jsx("div",{className:"text-center py-4 text-gray-500",children:"Loading orders..."}):c.length===0?e.jsx("div",{className:"text-center py-4 text-gray-500",children:"No orders found."}):c.map(j=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-gray-50 dark:bg-gray-700/50",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:j.orderNumber}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:j.product}),e.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1",children:j.date})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:n(j.amount)}),e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${j.status==="completed"||j.status==="delivered"?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":j.status==="pending"?"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"}`,children:j.status.charAt(0).toUpperCase()+j.status.slice(1)})]})]},j.id))})]}),e.jsxs(E,{children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-4",children:"Notes"}),e.jsx("textarea",{className:"w-full px-4 py-3 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-sm text-gray-900 dark:text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none",rows:4,placeholder:"Add notes about this customer..."})]})]})]})]})]})}const ea=[{name:"Alex Johnson",avatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=100&h=100&fit=crop"},{name:"Sarah Williams",avatar:"https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=100&h=100&fit=crop"},{name:"Mike Chen",avatar:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=100&h=100&fit=crop"},{name:"Emma Davis",avatar:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=100&h=100&fit=crop"},{name:"James Wilson",avatar:"https://images.unsplash.com/photo-1500648767791-00dcc994a43e?w=100&h=100&fit=crop"}],ta=[{id:1,title:"Update product inventory",description:"Review and update stock levels for PS5 consoles",status:"todo",priority:"high",assignees:[{name:"Alex Johnson",avatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=100&h=100&fit=crop"}],deadline:"2026-01-08"},{id:2,title:"Process refund requests",description:"Handle pending refund requests from last week",status:"todo",priority:"medium",assignees:[{name:"Sarah Williams",avatar:"https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=100&h=100&fit=crop"}],deadline:"2026-01-06"},{id:3,title:"Create marketing campaign",description:"Design email campaign for new game releases",status:"inprogress",priority:"high",assignees:[{name:"Mike Chen",avatar:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=100&h=100&fit=crop"}],deadline:"2026-01-10"},{id:4,title:"Customer support tickets",description:"Respond to high-priority support tickets",status:"inprogress",priority:"high",assignees:[{name:"Emma Davis",avatar:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=100&h=100&fit=crop"}],deadline:"2026-01-05"},{id:5,title:"Monthly sales report",description:"Compile and analyze December sales data",status:"completed",priority:"medium",assignees:[{name:"James Wilson",avatar:"https://images.unsplash.com/photo-1500648767791-00dcc994a43e?w=100&h=100&fit=crop"}],deadline:"2026-01-03"},{id:6,title:"Website maintenance",description:"Update product pages and fix broken links",status:"completed",priority:"low",assignees:[{name:"Alex Johnson",avatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=100&h=100&fit=crop"}],deadline:"2026-01-02"}];function sa(){const[t,n]=d.useState(ta),[g,b]=d.useState(!1),[o,h]=d.useState("kanban"),[x,v]=d.useState({title:"",description:"",priority:"medium",status:"todo",assignees:[],deadline:""}),m=l=>{switch(l){case"high":return"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400";case"medium":return"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400";case"low":return"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400"}},i=l=>t.filter(k=>k.status===l&&k.assignees.length>0),c=()=>{if(!x.title||!x.deadline||!x.assignees||x.assignees.length===0)return;const l={id:t.length+1,title:x.title||"",description:x.description||"",status:"todo",priority:x.priority||"medium",assignees:x.assignees,deadline:x.deadline};n([...t,l]),b(!1),v({title:"",description:"",priority:"medium",status:"todo",assignees:[],deadline:""})},a=l=>{const k=x.assignees||[],r=k.find(y=>y.name===l.name);v(r?{...x,assignees:k.filter(y=>y.name!==l.name)}:{...x,assignees:[...k,l]})},s=({task:l})=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:shadow-md transition-shadow cursor-pointer",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:l.title}),e.jsxs("span",{className:`px-2 py-0.5 rounded text-xs font-medium flex items-center gap-1 ${m(l.priority)}`,children:[e.jsx(ds,{className:"w-3 h-3"}),l.priority]})]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:l.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center -space-x-2",children:l.assignees.map((k,r)=>e.jsx("img",{src:k.avatar,alt:k.name,className:"w-6 h-6 rounded-full border-2 border-white dark:border-gray-800",title:k.name},r))}),e.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500 dark:text-gray-400",children:[e.jsx(ns,{className:"w-3 h-3"}),new Date(l.deadline).toLocaleDateString()]})]})]});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Tasks"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Manage team tasks and assignments"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 p-1 bg-gray-100 dark:bg-gray-700 rounded-lg",children:[e.jsx("button",{onClick:()=>h("kanban"),className:`px-3 py-1.5 rounded text-sm font-medium transition-colors ${o==="kanban"?"bg-white dark:bg-gray-600 text-gray-900 dark:text-white shadow-sm":"text-gray-600 dark:text-gray-400"}`,children:"Kanban"}),e.jsx("button",{onClick:()=>h("list"),className:`px-3 py-1.5 rounded text-sm font-medium transition-colors ${o==="list"?"bg-white dark:bg-gray-600 text-gray-900 dark:text-white shadow-sm":"text-gray-600 dark:text-gray-400"}`,children:"List"})]}),e.jsx(R,{onClick:()=>b(!0),icon:me,children:"Create Task"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs(E,{className:"text-center p-8",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Tasks"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-1",children:t.filter(l=>l.assignees&&l.assignees.length>0).length})]}),e.jsxs(E,{className:"text-center p-8",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"To Do"}),e.jsx("p",{className:"text-2xl font-bold text-red-600 dark:text-red-400 mt-1",children:i("todo").length})]}),e.jsxs(E,{className:"text-center p-8",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"In Progress"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400 mt-1",children:i("inprogress").length})]}),e.jsxs(E,{className:"text-center p-8",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Completed"}),e.jsx("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400 mt-1",children:i("completed").length})]})]}),o==="kanban"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),"To Do",e.jsxs("span",{className:"text-sm font-normal text-gray-500 dark:text-gray-400",children:["(",i("todo").length,")"]})]})}),e.jsx("div",{className:"space-y-3",children:i("todo").map(l=>e.jsx(s,{task:l},l.id))})]}),e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-500"}),"In Progress",e.jsxs("span",{className:"text-sm font-normal text-gray-500 dark:text-gray-400",children:["(",i("inprogress").length,")"]})]})}),e.jsx("div",{className:"space-y-3",children:i("inprogress").map(l=>e.jsx(s,{task:l},l.id))})]}),e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"}),"Completed",e.jsxs("span",{className:"text-sm font-normal text-gray-500 dark:text-gray-400",children:["(",i("completed").length,")"]})]})}),e.jsx("div",{className:"space-y-3",children:i("completed").map(l=>e.jsx(s,{task:l},l.id))})]})]}),o==="list"&&e.jsx(E,{className:"p-8",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[e.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-500 dark:text-gray-400",children:"Task"}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-500 dark:text-gray-400",children:"Assignees"}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-500 dark:text-gray-400",children:"Priority"}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-500 dark:text-gray-400",children:"Status"}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-500 dark:text-gray-400",children:"Deadline"})]})}),e.jsx("tbody",{children:t.filter(l=>l.assignees&&l.assignees.length>0).map(l=>e.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:l.title}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:l.description})]})}),e.jsx("td",{className:"py-4 px-4",children:e.jsx("div",{className:"flex items-center -space-x-2",children:l.assignees.map((k,r)=>e.jsx("img",{src:k.avatar,alt:k.name,className:"w-8 h-8 rounded-full border-2 border-white dark:border-gray-800",title:k.name},r))})}),e.jsx("td",{className:"py-4 px-4",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${m(l.priority)}`,children:l.priority})}),e.jsx("td",{className:"py-4 px-4",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${l.status==="completed"?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":l.status==="inprogress"?"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400":"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400"}`,children:l.status==="inprogress"?"In Progress":l.status==="todo"?"To Do":"Completed"})}),e.jsx("td",{className:"py-4 px-4 text-sm text-gray-600 dark:text-gray-300",children:l.deadline})]},l.id))})]})})}),e.jsx(pe,{isOpen:g,onClose:()=>b(!1),title:"Create New Task",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Task Title"}),e.jsx("input",{type:"text",value:x.title,onChange:l=>v({...x,title:l.target.value}),className:"w-full px-4 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter task title"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description"}),e.jsx("textarea",{value:x.description,onChange:l=>v({...x,description:l.target.value}),className:"w-full px-4 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none",rows:3,placeholder:"Task description"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Priority"}),e.jsxs("select",{value:x.priority,onChange:l=>v({...x,priority:l.target.value}),className:"w-full px-4 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Deadline"}),e.jsx("input",{type:"date",value:x.deadline,onChange:l=>v({...x,deadline:l.target.value}),className:"w-full px-4 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Assign To"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:ea.map(l=>{const k=x.assignees?.some(r=>r.name===l.name);return e.jsxs("button",{onClick:()=>a(l),className:`flex items-center gap-2 px-3 py-1.5 rounded-full border transition-colors ${k?"bg-blue-100 dark:bg-blue-900/30 border-blue-200 dark:border-blue-800 text-blue-700 dark:text-blue-300":"bg-gray-50 dark:bg-gray-700 border-gray-200 dark:border-gray-600 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600"}`,children:[e.jsx("img",{src:l.avatar,alt:l.name,className:"w-5 h-5 rounded-full"}),e.jsx("span",{className:"text-sm",children:l.name})]},l.name)})})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx(R,{variant:"secondary",onClick:()=>b(!1),children:"Cancel"}),e.jsx(R,{onClick:c,children:"Create Task"})]})]})})]})}function aa(){const[t,n]=d.useState([]),[g,b]=d.useState(!0),[o,h]=d.useState(!1),[x,v]=d.useState(null),[m,i]=d.useState({name:"",email:"",password:"",role:"staff",job_title:"",phone:"",avatar:"",identity_document:""}),[c,a]=d.useState(null),[s,l]=d.useState(null);d.useEffect(()=>{k()},[]);const k=async()=>{try{const p=await fetch(`${_}/admin/users`,{headers:{Authorization:`Bearer ${q}`}});if(p.ok){const A=await p.json();n(A)}}catch(p){console.error("Error fetching users:",p)}finally{b(!1)}},r=async p=>{const A=new FormData;A.append("image",p);const u=await fetch(`${_}/upload`,{method:"POST",body:A});if(!u.ok)throw new Error("Upload failed");return(await u.json()).url},y=async p=>{p.preventDefault();try{let A=m.avatar,u=m.identity_document;c&&(A=await r(c)),s&&(u=await r(s));const T={...m,avatar:A,identity_document:u},W=x?`${_}/admin/users/${x.id}`:`${_}/admin/users`,H=await fetch(W,{method:x?"PUT":"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${q}`},body:JSON.stringify(T)});if(H.ok)h(!1),k(),w();else{const U=await H.json();alert(U.error||"Operation failed")}}catch(A){console.error("Error saving user:",A),alert("Failed to save user")}},j=async p=>{if(confirm("Are you sure you want to delete this user?"))try{(await fetch(`${_}/admin/users/${p}`,{method:"DELETE",headers:{Authorization:`Bearer ${q}`}})).ok&&k()}catch(A){console.error("Error deleting user:",A)}},P=()=>{v(null),w(),h(!0)},S=p=>{v(p),i({name:p.name,email:p.email,password:"",role:p.role,job_title:p.job_title||"",phone:p.phone||"",avatar:p.avatar||"",identity_document:p.identity_document||""}),a(null),l(null),h(!0)},w=()=>{i({name:"",email:"",password:"",role:"staff",job_title:"",phone:"",avatar:"",identity_document:""}),a(null),l(null)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Employees"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Manage your team members and roles"})]}),e.jsxs(R,{onClick:P,className:"bg-red-600 hover:bg-red-700 text-white shadow-lg shadow-red-500/30",children:[e.jsx(me,{className:"w-4 h-4 mr-2"}),"Add Employee"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(p=>e.jsxs(E,{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-200 dark:bg-gray-700 overflow-hidden",children:p.avatar?e.jsx("img",{src:p.avatar,alt:p.name,className:"w-full h-full object-cover"}):e.jsx(te,{className:"w-full h-full p-2 text-gray-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:p.name}),e.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:p.job_title||p.role})]})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>S(p),className:"p-1 text-gray-400 hover:text-blue-500 transition-colors",children:e.jsx(je,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>j(p.id),className:"p-1 text-gray-400 hover:text-red-500 transition-colors",children:e.jsx(ae,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"space-y-3 text-sm text-gray-600 dark:text-gray-300",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ye,{className:"w-4 h-4"}),p.email]}),p.phone&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Le,{className:"w-4 h-4"}),p.phone]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Je,{className:"w-4 h-4"}),e.jsxs("span",{className:"capitalize",children:[p.role," Access"]})]}),p.identity_document&&e.jsxs("div",{className:"flex items-center gap-2 text-green-600 dark:text-green-400",children:[e.jsx(et,{className:"w-4 h-4"}),e.jsx("a",{href:p.identity_document,target:"_blank",rel:"noopener noreferrer",className:"hover:underline",children:"View ID Document"})]})]})]},p.id))}),e.jsx(pe,{isOpen:o,onClose:()=>h(!1),title:x?"Edit Employee":"Add New Employee",children:e.jsxs("form",{onSubmit:y,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Full Name"}),e.jsx("input",{type:"text",required:!0,value:m.name,onChange:p=>i({...m,name:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Email"}),e.jsx("input",{type:"email",required:!0,value:m.email,onChange:p=>i({...m,email:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:x?"New Password (leave blank to keep current)":"Password"}),e.jsx("input",{type:"password",required:!x,value:m.password,onChange:p=>i({...m,password:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:x?"Enter to reset password":""})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Role (Access)"}),e.jsxs("select",{value:m.role,onChange:p=>i({...m,role:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"admin",children:"Admin"}),e.jsx("option",{value:"manager",children:"Manager"}),e.jsx("option",{value:"staff",children:"Staff"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Job Title"}),e.jsx("input",{type:"text",value:m.job_title,onChange:p=>i({...m,job_title:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"e.g. Sales Manager"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Phone"}),e.jsx("input",{type:"tel",value:m.phone,onChange:p=>i({...m,phone:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Avatar"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:p=>a(p.target.files?.[0]||null),className:"hidden",id:"avatar-upload"}),e.jsxs("label",{htmlFor:"avatar-upload",className:"cursor-pointer flex items-center justify-center px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 text-sm",children:[e.jsx(jt,{className:"w-4 h-4 mr-2"}),"Choose File"]}),(c||m.avatar)&&e.jsx("span",{className:"text-xs text-green-500",children:"Selected"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"National ID / Passport"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"file",accept:"image/*,.pdf",onChange:p=>l(p.target.files?.[0]||null),className:"hidden",id:"id-upload"}),e.jsxs("label",{htmlFor:"id-upload",className:"cursor-pointer flex items-center justify-center px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 text-sm",children:[e.jsx(jt,{className:"w-4 h-4 mr-2"}),"Upload ID"]}),(s||m.identity_document)&&e.jsx("span",{className:"text-xs text-green-500",children:"Selected"})]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(R,{type:"submit",className:"flex-1",children:"Save Employee"}),e.jsx(R,{type:"button",variant:"secondary",onClick:()=>h(!1),className:"flex-1",children:"Cancel"})]})]})})]})}function ra(){const{settings:t,updateSettings:n}=le(),[g,b]=d.useState("store"),[o,h]=d.useState({currency_code:"USD",currency_symbol:"$",tax_rate:8.5,store_name:"",store_email:"",store_phone:"",store_address:"",business_hours:[],payment_methods:[]});d.useEffect(()=>{if(t){const a=[{name:"Credit/Debit Cards",enabled:!0},{name:"PayPal",enabled:!0},{name:"Apple Pay",enabled:!0},{name:"Google Pay",enabled:!1},{name:"Cryptocurrency",enabled:!1}],s=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].map(l=>({day:l,open:"09:00",close:"18:00"}));h({currency_code:t.currency_code,currency_symbol:t.currency_symbol,tax_rate:t.tax_rate,store_name:t.store_name||"",store_email:t.store_email||"",store_phone:t.store_phone||"",store_address:t.store_address||"",business_hours:t.business_hours&&t.business_hours.length>0?t.business_hours:s,payment_methods:t.payment_methods&&t.payment_methods.length>0?t.payment_methods:a})}},[t]);const x=async()=>{try{await n(o),alert("Settings saved successfully!")}catch{alert("Failed to save settings")}},v=a=>{const s=a.target.value;let l="$";switch(s){case"USD":l="$";break;case"EUR":l="€";break;case"GBP":l="£";break;case"JPY":l="¥";break;case"EGP":l="E£";break;default:l="$"}h({...o,currency_code:s,currency_symbol:l})},m=a=>{h(s=>({...s,payment_methods:s.payment_methods.map(l=>l.name===a?{...l,enabled:!l.enabled}:l)}))},i=(a,s,l)=>{h(k=>({...k,business_hours:k.business_hours.map(r=>r.day===a?{...r,[s]:l}:r)}))},c=[{id:"store",label:"Store Info"},{id:"payments",label:"Payments"},{id:"shipping",label:"Shipping"},{id:"notifications",label:"Notifications"},{id:"security",label:"Security"},{id:"integrations",label:"Integrations"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Settings"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Manage your store settings and preferences"})]}),e.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:e.jsx("div",{className:"flex gap-4 overflow-x-auto",children:c.map(a=>e.jsx("button",{onClick:()=>b(a.id),className:`px-4 py-3 text-sm font-medium border-b-2 transition-colors whitespace-nowrap ${g===a.id?"border-red-600 text-red-600 dark:text-red-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}`,children:a.label},a.id))})}),g==="store"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs(E,{className:"p-8",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-4",children:"Store Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Store Name"}),e.jsx("input",{type:"text",value:o.store_name,onChange:a=>h({...o,store_name:a.target.value}),placeholder:"PlayStation Store Admin",className:"w-full px-4 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Store Email"}),e.jsx("input",{type:"email",value:o.store_email,onChange:a=>h({...o,store_email:a.target.value}),placeholder:"store@playstation.com",className:"w-full px-4 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Store Phone"}),e.jsx("input",{type:"tel",value:o.store_phone,onChange:a=>h({...o,store_phone:a.target.value}),placeholder:"+1 (555) 123-4567",className:"w-full px-4 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Store Address"}),e.jsx("textarea",{value:o.store_address,onChange:a=>h({...o,store_address:a.target.value}),placeholder:"2207 Bridgepointe Parkway, San Mateo, CA 94404",className:"w-full px-4 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none",rows:3})]})]})]}),e.jsxs(E,{className:"p-8",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-4",children:"Business Hours"}),e.jsx("div",{className:"space-y-3",children:o.business_hours.map(a=>e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-24 text-sm text-gray-700 dark:text-gray-300",children:a.day}),e.jsx("input",{type:"time",value:a.open,onChange:s=>i(a.day,"open",s.target.value),className:"px-3 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-sm text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"to"}),e.jsx("input",{type:"time",value:a.close,onChange:s=>i(a.day,"close",s.target.value),className:"px-3 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-sm text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]},a.day))})]})]}),g==="payments"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs(E,{className:"p-8",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-4",children:"Payment Methods"}),e.jsx("div",{className:"space-y-3",children:o.payment_methods.map(a=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:a.name}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:a.enabled,onChange:()=>m(a.name),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-red-300 dark:peer-focus:ring-red-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-red-600"})]})]},a.name))})]}),e.jsxs(E,{className:"p-8",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-4",children:"Currency Settings"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Default Currency"}),e.jsxs("select",{value:o.currency_code,onChange:v,className:"w-full px-4 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-red-500",children:[e.jsx("option",{value:"USD",children:"USD - US Dollar"}),e.jsx("option",{value:"EUR",children:"EUR - Euro"}),e.jsx("option",{value:"GBP",children:"GBP - British Pound"}),e.jsx("option",{value:"JPY",children:"JPY - Japanese Yen"}),e.jsx("option",{value:"EGP",children:"EGP - Egyptian Pound"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Tax Rate (%)"}),e.jsx("input",{type:"number",value:o.tax_rate,onChange:a=>h({...o,tax_rate:parseFloat(a.target.value)}),step:"0.1",className:"w-full px-4 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]})]}),g==="shipping"&&e.jsxs(E,{className:"p-8",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-4",children:"Shipping Options"}),e.jsx("div",{className:"space-y-4",children:[{name:"Standard Shipping",price:"$5.99",time:"5-7 business days"},{name:"Express Shipping",price:"$12.99",time:"2-3 business days"},{name:"Next Day Delivery",price:"$24.99",time:"1 business day"}].map(a=>e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:a.name}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",defaultChecked:!0,className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"})]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500 dark:text-gray-400",children:[e.jsx("span",{children:a.price}),e.jsx("span",{children:"•"}),e.jsx("span",{children:a.time})]})]},a.name))})]}),g==="notifications"&&e.jsxs(E,{className:"p-8",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-4",children:"Notification Preferences"}),e.jsx("div",{className:"space-y-4",children:[{title:"New Orders",description:"Get notified when new orders are placed"},{title:"Low Stock Alerts",description:"Receive alerts when products are running low"},{title:"Customer Messages",description:"Get notified of new customer support messages"},{title:"Sales Reports",description:"Receive daily sales summary reports"},{title:"System Updates",description:"Get notified about system updates and maintenance"}].map(a=>e.jsxs("div",{className:"flex items-start justify-between p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:a.title}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:a.description})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer ml-4",children:[e.jsx("input",{type:"checkbox",defaultChecked:!0,className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"})]})]},a.title))})]}),g==="security"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs(E,{className:"p-8",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-4",children:"Change Password"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Current Password"}),e.jsx("input",{type:"password",className:"w-full px-4 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"New Password"}),e.jsx("input",{type:"password",className:"w-full px-4 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Confirm New Password"}),e.jsx("input",{type:"password",className:"w-full px-4 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]}),e.jsxs(E,{className:"p-8",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-4",children:"Two-Factor Authentication"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:"Add an extra layer of security to your account"}),e.jsx(R,{children:"Enable 2FA"})]}),e.jsxs(E,{className:"p-8",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-4",children:"Active Sessions"}),e.jsx("div",{className:"space-y-3",children:e.jsx("div",{className:"p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"MacBook Pro - Chrome"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"San Francisco, CA • Active now"})]}),e.jsx("span",{className:"px-2 py-1 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 text-xs rounded-full",children:"Current"})]})})})]})]}),g==="integrations"&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[{name:"Stripe",description:"Payment processing",connected:!0,logo:"💳"},{name:"Mailchimp",description:"Email marketing",connected:!0,logo:"📧"},{name:"Slack",description:"Team communication",connected:!1,logo:"💬"},{name:"Google Analytics",description:"Website analytics",connected:!0,logo:"📊"},{name:"Shopify",description:"E-commerce platform",connected:!1,logo:"🛍️"},{name:"Zendesk",description:"Customer support",connected:!1,logo:"🎧"}].map(a=>e.jsx(E,{className:"p-8",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg bg-gray-100 dark:bg-gray-700 flex items-center justify-center text-2xl",children:a.logo}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:a.name}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-3",children:a.description}),a.connected?e.jsx(R,{variant:"secondary",children:"Disconnect"}):e.jsx(R,{children:"Connect"})]})]})},a.name))}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(R,{onClick:x,children:[e.jsx(ze,{className:"w-4 h-4 mr-2"}),"Save Changes"]})})]})}const Me=["dashboard","products","orders","pos","analytics","customers","banners","outlook","hr","tasks","team","roles","system","delivery","settings"],Ke={dashboard:"Dashboard",products:"Products",orders:"Orders",pos:"Point of Sale",analytics:"Analytics",customers:"Customers",banners:"Banners",outlook:"Outlook Accounts",hr:"HR & Attendance",tasks:"Tasks",team:"Team Members",roles:"Roles & Access",system:"System",delivery:"Delivery Options",settings:"Settings"};function la(){const[t,n]=d.useState([]),[g,b]=d.useState(!0),[o,h]=d.useState(!1),[x,v]=d.useState({name:"",description:"",permissions:Me.reduce((r,y)=>({...r,[y]:!1}),{})}),[m,i]=d.useState(!1),[c,a]=d.useState({name:"",email:"",password:"",role:""});d.useEffect(()=>{s()},[]);const s=async()=>{try{b(!0);const r=await Ve.getAll();n(Array.isArray(r)?r:[])}catch(r){console.error("Error loading roles:",r)}finally{b(!1)}},l=async()=>{try{await Ve.create(x),await s(),h(!1),v({name:"",description:"",permissions:Me.reduce((r,y)=>({...r,[y]:!1}),{})})}catch(r){console.error("Error creating role:",r),alert("Failed to create role")}},k=async()=>{try{await Ve.createAdminUser(c),alert("User created successfully"),i(!1),a({name:"",email:"",password:"",role:""})}catch(r){console.error("Error creating user:",r),alert("Failed to create user. Email might be taken.")}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Roles & Access"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Manage user roles and permissions"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(R,{onClick:()=>i(!0),variant:"outline",className:"flex items-center gap-2",children:[e.jsx(tt,{className:"w-4 h-4"}),"Create User Account"]}),e.jsxs(R,{onClick:()=>h(!0),className:"flex items-center gap-2 bg-red-600 hover:bg-red-700 text-white",children:[e.jsx(Je,{className:"w-4 h-4"}),"Create New Role"]})]})]}),g?e.jsx("div",{className:"text-center py-12",children:"Loading roles..."}):e.jsx("div",{className:"grid grid-cols-1 gap-6",children:t.map(r=>e.jsxs(E,{className:"p-6",children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[r.name,r.name==="admin"&&e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-red-100 text-red-600 text-xs font-medium",children:"System"})]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:r.description})]})}),e.jsxs("div",{className:"border-t border-gray-100 dark:border-gray-700 pt-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Permissions (Sidebar Access)"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-3",children:Me.map(y=>{const j=r.permissions&&r.permissions[y];return e.jsxs("div",{className:`flex items-center gap-2 text-sm p-2 rounded-lg ${j?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-400":"bg-gray-50 dark:bg-gray-800/50 text-gray-400 dark:text-gray-500"}`,children:[j?e.jsx(Tt,{className:"w-4 h-4 flex-shrink-0"}):e.jsx(Z,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{className:"truncate",title:Ke[y],children:Ke[y]})]},y)})})]})]},r.id))}),e.jsx(pe,{isOpen:o,onClose:()=>h(!1),title:"Create New Role",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Role Name"}),e.jsx("input",{type:"text",value:x.name,onChange:r=>v({...x,name:r.target.value}),className:"w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-red-500",placeholder:"e.g. Sales Associate"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description"}),e.jsx("input",{type:"text",value:x.description,onChange:r=>v({...x,description:r.target.value}),className:"w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-red-500",placeholder:"Brief description of the role"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Permissions"}),e.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-60 overflow-y-auto p-2 border border-gray-200 rounded-lg",children:Me.map(r=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer p-1 hover:bg-gray-50 rounded",children:[e.jsx("input",{type:"checkbox",checked:x.permissions[r],onChange:y=>v({...x,permissions:{...x.permissions,[r]:y.target.checked}}),className:"rounded border-gray-300 text-red-600 focus:ring-red-500"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:Ke[r]})]},r))})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx(R,{variant:"outline",onClick:()=>h(!1),children:"Cancel"}),e.jsx(R,{onClick:l,className:"bg-red-600 text-white hover:bg-red-700",children:"Create Role"})]})]})}),e.jsx(pe,{isOpen:m,onClose:()=>i(!1),title:"Create User Account",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Full Name"}),e.jsx("input",{type:"text",value:c.name,onChange:r=>a({...c,name:r.target.value}),className:"w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-red-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Email Address"}),e.jsx("input",{type:"email",value:c.email,onChange:r=>a({...c,email:r.target.value}),className:"w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-red-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Password"}),e.jsx("input",{type:"password",value:c.password,onChange:r=>a({...c,password:r.target.value}),className:"w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-red-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Assign Role"}),e.jsxs("select",{value:c.role,onChange:r=>a({...c,role:r.target.value}),className:"w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-red-500",children:[e.jsx("option",{value:"",children:"Select a role"}),t.map(r=>e.jsx("option",{value:r.name,children:r.name},r.id))]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx(R,{variant:"outline",onClick:()=>i(!1),children:"Cancel"}),e.jsx(R,{onClick:k,className:"bg-red-600 text-white hover:bg-red-700",children:"Create Account"})]})]})})]})}const da=[{id:1,email:"gaming.store01@outlook.com",password:"SecurePass123!",recoveryEmail:"backup01@gmail.com",status:"Active",createdDate:"Jan 1, 2026",lastLogin:"Jan 4, 2026",productName:"PlayStation 5 Console"},{id:2,email:"gaming.store02@outlook.com",password:"SecurePass456!",recoveryEmail:"backup02@gmail.com",status:"Active",createdDate:"Jan 2, 2026",lastLogin:"Jan 3, 2026",productName:"DualSense Controller"},{id:3,email:"gaming.store03@outlook.com",password:"SecurePass789!",status:"Inactive",createdDate:"Dec 28, 2025",productName:"PS5 VR Headset"}];function na(){const[t,n]=d.useState(da),[g,b]=d.useState(!1),[o,h]=d.useState(!1),[x,v]=d.useState(null),[m,i]=d.useState(""),[c,a]=d.useState({}),[s,l]=d.useState({email:"",password:"",recoveryEmail:"",status:"Active",productName:""}),k=()=>{const p={...s,createdDate:x?x.createdDate:new Date().toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})};n(x?t.map(A=>A.id===x.id?{...p,id:x.id}:A):[...t,{...p,id:Date.now()}]),h(!1),v(null),l({email:"",password:"",recoveryEmail:"",status:"Active",productName:""})},r=p=>{confirm("Are you sure you want to delete this Outlook account?")&&n(t.filter(A=>A.id!==p))},y=p=>{v(p),l({email:p.email,password:p.password,recoveryEmail:p.recoveryEmail||"",status:p.status,productName:p.productName||""}),h(!0)},j=(p,A)=>{navigator.clipboard.writeText(p),alert(`${A} copied to clipboard!`)},P=p=>{a(A=>({...A,[p]:!A[p]}))},S=t.filter(p=>p.email.toLowerCase().includes(m.toLowerCase())||p.productName&&p.productName.toLowerCase().includes(m.toLowerCase())),w=p=>{switch(p){case"Active":return"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400";case"Inactive":return"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-400";case"Suspended":return"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400";default:return"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-400"}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Outlook Accounts"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Manage product-linked Outlook accounts"})]}),e.jsx(R,{onClick:()=>{v(null),l({email:"",password:"",recoveryEmail:"",status:"Active",productName:""}),h(!0)},icon:me,children:"Add Account"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs(E,{className:"text-center p-8",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Accounts"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-1",children:t.length})]}),e.jsxs(E,{className:"text-center p-8",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Active"}),e.jsx("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400 mt-1",children:t.filter(p=>p.status==="Active").length})]}),e.jsxs(E,{className:"text-center p-8",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Inactive"}),e.jsx("p",{className:"text-2xl font-bold text-gray-600 dark:text-gray-400 mt-1",children:t.filter(p=>p.status==="Inactive").length})]}),e.jsxs(E,{className:"text-center p-8",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Suspended"}),e.jsx("p",{className:"text-2xl font-bold text-red-600 dark:text-red-400 mt-1",children:t.filter(p=>p.status==="Suspended").length})]})]}),e.jsx(E,{className:"p-8",children:e.jsxs("div",{className:"relative",children:[e.jsx(re,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search accounts or products...",value:m,onChange:p=>i(p.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-sm text-gray-900 dark:text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-red-500"})]})}),e.jsx(E,{className:"p-8",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[e.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-500 dark:text-gray-400",children:"Email"}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-500 dark:text-gray-400",children:"Password"}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-500 dark:text-gray-400",children:"Product"}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-500 dark:text-gray-400",children:"Status"}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-500 dark:text-gray-400",children:"Created"}),e.jsx("th",{className:"text-right py-3 px-4 text-sm font-medium text-gray-500 dark:text-gray-400",children:"Actions"})]})}),e.jsx("tbody",{children:S.map(p=>e.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ye,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:p.email}),e.jsx("button",{onClick:()=>j(p.email,"Email"),className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:e.jsx(st,{className:"w-3 h-3 text-gray-400"})})]})}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ct,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"font-mono text-sm text-gray-900 dark:text-white",children:c[p.id]?p.password:"••••••••••"}),e.jsx("button",{onClick:()=>P(p.id),className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:c[p.id]?e.jsx(gt,{className:"w-3 h-3 text-gray-400"}):e.jsx(we,{className:"w-3 h-3 text-gray-400"})}),e.jsx("button",{onClick:()=>j(p.password,"Password"),className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:e.jsx(st,{className:"w-3 h-3 text-gray-400"})})]})}),e.jsx("td",{className:"py-4 px-4 text-sm text-gray-600 dark:text-gray-300",children:p.productName||"-"}),e.jsx("td",{className:"py-4 px-4",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${w(p.status)}`,children:p.status})}),e.jsx("td",{className:"py-4 px-4 text-sm text-gray-600 dark:text-gray-300",children:p.createdDate}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>y(p),className:"p-2 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:e.jsx(mt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>r(p.id),className:"p-2 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:e.jsx(ae,{className:"w-4 h-4"})})]})})]},p.id))})]})})}),e.jsx(pe,{isOpen:o,onClose:()=>{h(!1),v(null),l({email:"",password:"",recoveryEmail:"",status:"Active",productName:""})},title:x?"Edit Outlook Account":"Add New Outlook Account",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),e.jsx("input",{type:"email",value:s.email,onChange:p=>l({...s,email:p.target.value}),className:"w-full px-4 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"account@outlook.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Password"}),e.jsx("input",{type:"text",value:s.password,onChange:p=>l({...s,password:p.target.value}),className:"w-full px-4 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter password"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Recovery Email (Optional)"}),e.jsx("input",{type:"email",value:s.recoveryEmail,onChange:p=>l({...s,recoveryEmail:p.target.value}),className:"w-full px-4 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"recovery@email.com"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Status"}),e.jsxs("select",{value:s.status,onChange:p=>l({...s,status:p.target.value}),className:"w-full px-4 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"Active",children:"Active"}),e.jsx("option",{value:"Inactive",children:"Inactive"}),e.jsx("option",{value:"Suspended",children:"Suspended"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Linked Product"}),e.jsx("input",{type:"text",value:s.productName,onChange:p=>l({...s,productName:p.target.value}),className:"w-full px-4 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Product name"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx(R,{variant:"secondary",onClick:()=>{h(!1),v(null),l({email:"",password:"",recoveryEmail:"",status:"Active",productName:""})},children:"Cancel"}),e.jsx(R,{onClick:k,children:x?"Update Account":"Add Account"})]})]})})]})}function ia(){const[t,n]=d.useState([]),[g,b]=d.useState(!0),[o,h]=d.useState(null),[x,v]=d.useState(!1),[m,i]=d.useState(null),[c,a]=d.useState({title:"",imageUrl:"",link:"",position:1,isActive:!0,startDate:"",endDate:""}),[s,l]=d.useState({badge:"🎮 Your Ultimate Gaming Destination",title:"GAMES UP",subtitle:"Experience the next level of gaming with our premium collection of consoles, accessories, and titles.",ctaPrimary:"Shop Now",ctaSecondary:"Learn More"}),[k,r]=d.useState({title:"SPECIAL OFFER",subtitle:"Up to 50% Off on Selected Items"});d.useEffect(()=>{P();const u=localStorage.getItem("specialOfferConfig");u&&r(JSON.parse(u));const T=localStorage.getItem("heroConfig");T&&l(JSON.parse(T))},[]);const y=()=>{localStorage.setItem("heroConfig",JSON.stringify(s)),window.dispatchEvent(new Event("heroConfigUpdated")),window.dispatchEvent(new Event("storage")),alert("Hero section updated successfully!")},j=()=>{localStorage.setItem("specialOfferConfig",JSON.stringify(k)),window.dispatchEvent(new Event("specialOfferUpdated")),window.dispatchEvent(new Event("storage")),alert("Special Offer updated successfully!")};async function P(){try{b(!0);const u=await Pe.getAll();n(u.banners||[]),h(null)}catch(u){console.error("Error loading banners:",u),h(u.message||"Failed to load banners")}finally{b(!1)}}const S=async()=>{try{m?await Pe.update(m.id,c):await Pe.create(c),await P(),v(!1),i(null),a({title:"",imageUrl:"",link:"",position:1,isActive:!0,startDate:"",endDate:""})}catch(u){console.error("Error saving banner:",u),alert("Failed to save banner")}},w=async u=>{if(confirm("Are you sure you want to delete this banner?"))try{await Pe.delete(u),await P()}catch(T){console.error("Error deleting banner:",T),alert("Failed to delete banner")}},p=async u=>{try{await Pe.update(u.id,{...u,isActive:!u.isActive}),await P()}catch(T){console.error("Error toggling banner:",T),alert("Failed to update banner")}},A=u=>{i(u),a({title:u.title,imageUrl:u.imageUrl,link:u.link,position:u.position,isActive:u.isActive,startDate:u.startDate||"",endDate:u.endDate||""}),v(!0)};return g?e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:"Loading banners..."})}):o?e.jsxs("div",{className:"flex flex-col items-center justify-center h-96 space-y-4",children:[e.jsx("div",{className:"text-red-600 dark:text-red-400",children:o}),e.jsx(R,{onClick:P,children:"Try Again"})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Website Banners"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Manage promotional banners for your website"})]}),e.jsx(R,{onClick:()=>{i(null),a({title:"",imageUrl:"",link:"",position:1,isActive:!0,startDate:"",endDate:""}),v(!0)},icon:me,children:"Add Banner"})]}),e.jsxs(E,{className:"p-8",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-6",children:"Hero Section"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Badge Text"}),e.jsx("input",{type:"text",value:s.badge,onChange:u=>l({...s,badge:u.target.value}),className:"w-full px-4 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:"🎮 Your Ultimate Gaming Destination"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Main Title"}),e.jsx("input",{type:"text",value:s.title,onChange:u=>l({...s,title:u.target.value}),className:"w-full px-4 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:"GAMES UP"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Subtitle"}),e.jsx("textarea",{value:s.subtitle,onChange:u=>l({...s,subtitle:u.target.value}),className:"w-full px-4 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:"Description text...",rows:3})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Primary Button Text"}),e.jsx("input",{type:"text",value:s.ctaPrimary,onChange:u=>l({...s,ctaPrimary:u.target.value}),className:"w-full px-4 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:"Shop Now"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Secondary Button Text"}),e.jsx("input",{type:"text",value:s.ctaSecondary,onChange:u=>l({...s,ctaSecondary:u.target.value}),className:"w-full px-4 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:"Learn More"})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(R,{onClick:y,className:"bg-red-600 hover:bg-red-700 text-white",children:"Save Hero Section"})})]}),e.jsxs(E,{className:"p-8",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-6",children:"Special Offer Section"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Section Title"}),e.jsx("input",{type:"text",value:k.title,onChange:u=>r({...k,title:u.target.value}),className:"w-full px-4 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:"SPECIAL OFFER"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Offer Text"}),e.jsx("input",{type:"text",value:k.subtitle,onChange:u=>r({...k,subtitle:u.target.value}),className:"w-full px-4 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:"Up to 50% Off on Selected Items"})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(R,{onClick:j,className:"bg-red-600 hover:bg-red-700 text-white",children:"Save Special Offer"})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.map(u=>e.jsx(E,{className:"p-8",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative rounded-lg overflow-hidden bg-gray-100 dark:bg-gray-700",children:[e.jsx("img",{src:u.imageUrl,alt:u.title,className:"w-full h-48 object-cover",onError:T=>{T.target.src="https://images.unsplash.com/photo-1557821552-17105176677c?w=800&h=400&fit=crop"}}),e.jsxs("div",{className:"absolute top-3 right-3 flex gap-2",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${u.isActive?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"}`,children:u.isActive?"Active":"Inactive"}),e.jsxs("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400",children:["Position ",u.position]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-1",children:u.title}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 truncate",children:["Link: ",u.link||"No link"]}),(u.startDate||u.endDate)&&e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[u.startDate&&`From: ${new Date(u.startDate).toLocaleDateString()}`,u.endDate&&` | To: ${new Date(u.endDate).toLocaleDateString()}`]})]}),e.jsxs("div",{className:"flex items-center gap-2 pt-2 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("button",{onClick:()=>p(u),className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:[u.isActive?e.jsx(gt,{className:"w-4 h-4"}):e.jsx(we,{className:"w-4 h-4"}),u.isActive?"Deactivate":"Activate"]}),e.jsx("button",{onClick:()=>A(u),className:"p-2 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors",children:e.jsx(mt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>w(u.id),className:"p-2 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:e.jsx(ae,{className:"w-4 h-4"})})]})]})},u.id)),t.length===0&&e.jsx("div",{className:"col-span-2 text-center py-12 text-gray-500 dark:text-gray-400",children:'No banners yet. Click "Add Banner" to create your first one.'})]}),e.jsx(pe,{isOpen:x,onClose:()=>{v(!1),i(null),a({title:"",imageUrl:"",link:"",position:1,isActive:!0,startDate:"",endDate:""})},title:m?"Edit Banner":"Add New Banner",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Banner Title"}),e.jsx("input",{type:"text",value:c.title,onChange:u=>a({...c,title:u.target.value}),className:"w-full px-4 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:"Summer Sale 2024"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Image URL"}),e.jsx("input",{type:"text",value:c.imageUrl,onChange:u=>a({...c,imageUrl:u.target.value}),className:"w-full px-4 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:"https://..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Link URL (optional)"}),e.jsx("input",{type:"text",value:c.link,onChange:u=>a({...c,link:u.target.value}),className:"w-full px-4 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:"https://..."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Position"}),e.jsx("input",{type:"number",min:"1",value:c.position,onChange:u=>a({...c,position:parseInt(u.target.value)||1}),className:"w-full px-4 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-red-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Status"}),e.jsxs("select",{value:c.isActive?"active":"inactive",onChange:u=>a({...c,isActive:u.target.value==="active"}),className:"w-full px-4 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-red-500",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Start Date (optional)"}),e.jsx("input",{type:"date",value:c.startDate,onChange:u=>a({...c,startDate:u.target.value}),className:"w-full px-4 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-red-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"End Date (optional)"}),e.jsx("input",{type:"date",value:c.endDate,onChange:u=>a({...c,endDate:u.target.value}),className:"w-full px-4 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-red-500"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx(R,{variant:"secondary",onClick:()=>{v(!1),i(null),a({title:"",imageUrl:"",link:"",position:1,isActive:!0,startDate:"",endDate:""})},children:"Cancel"}),e.jsx(R,{onClick:S,children:m?"Update Banner":"Add Banner"})]})]})})]})}function oa(){const[t,n]=d.useState([]),[g,b]=d.useState([]),[o,h]=d.useState(!0),[x,v]=d.useState(null),[m,i]=d.useState(new Date().toISOString().split("T")[0]),[c,a]=d.useState("all"),[s,l]=d.useState("all");d.useEffect(()=>{k()},[m]);async function k(){try{h(!0);const[S,w]=await Promise.all([Fe.getAttendance(m),Fe.getEmployees()]);n(S.attendance||[]),b(w.employees||[]),v(null)}catch(S){console.error("Error loading HR data:",S),v(S.message||"Failed to load HR data")}finally{h(!1)}}const r=async(S,w,p)=>{try{const A=new Date,u=`${A.getHours().toString().padStart(2,"0")}:${A.getMinutes().toString().padStart(2,"0")}`;await Fe.markAttendance({employeeId:S,date:m,status:w,shift:p,checkIn:u,checkOut:""}),await k()}catch(A){console.error("Error marking attendance:",A),alert("Failed to mark attendance")}},y=async S=>{try{const w=new Date,p=`${w.getHours().toString().padStart(2,"0")}:${w.getMinutes().toString().padStart(2,"0")}`;await Fe.updateAttendance(S,{checkOut:p}),await k()}catch(w){console.error("Error checking out:",w),alert("Failed to check out")}},j=t.filter(S=>{const w=c==="all"||S.shift===c,p=s==="all"||S.status===s;return w&&p}),P={total:g.length,present:t.filter(S=>S.status==="present").length,absent:g.length-t.length,late:t.filter(S=>S.status==="late").length,morningShift:g.filter(S=>S.shift==="morning").length,nightShift:g.filter(S=>S.shift==="night").length};return o?e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:"Loading HR data..."})}):x?e.jsxs("div",{className:"flex flex-col items-center justify-center h-96 space-y-4",children:[e.jsx("div",{className:"text-red-600 dark:text-red-400",children:x}),e.jsx(R,{onClick:k,children:"Try Again"})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"HR & Attendance"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Track employee attendance and shifts"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("input",{type:"date",value:m,onChange:S=>i(S.target.value),className:"px-4 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-sm text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-red-500"}),e.jsx(R,{icon:he,children:"Export Report"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(E,{className:"p-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Employees"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-1",children:P.total})]}),e.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center",children:e.jsx(He,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})})]})}),e.jsx(E,{className:"p-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Present Today"}),e.jsx("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400 mt-1",children:P.present})]}),e.jsx("div",{className:"w-12 h-12 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center",children:e.jsx(He,{className:"w-6 h-6 text-green-600 dark:text-green-400"})})]})}),e.jsx(E,{className:"p-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Absent Today"}),e.jsx("p",{className:"text-2xl font-bold text-red-600 dark:text-red-400 mt-1",children:P.absent})]}),e.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 dark:bg-red-900/30 flex items-center justify-center",children:e.jsx(Nt,{className:"w-6 h-6 text-red-600 dark:text-red-400"})})]})}),e.jsx(E,{className:"p-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Late Arrivals"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400 mt-1",children:P.late})]}),e.jsx("div",{className:"w-12 h-12 rounded-full bg-yellow-100 dark:bg-yellow-900/30 flex items-center justify-center",children:e.jsx($e,{className:"w-6 h-6 text-yellow-600 dark:text-yellow-400"})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(E,{className:"p-8",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-4",children:"Morning Shift"}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"7:00 AM - 3:00 PM"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[P.morningShift," employees"]})]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${P.morningShift/P.total*100}%`}})})]})})]}),e.jsxs(E,{className:"p-8",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-4",children:"Night Shift"}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"3:00 PM - 11:00 PM"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[P.nightShift," employees"]})]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"bg-purple-600 h-2 rounded-full",style:{width:`${P.nightShift/P.total*100}%`}})})]})})]})]}),e.jsx(E,{className:"p-8",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($t,{className:"w-5 h-5 text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Filters:"})]}),e.jsxs("select",{value:c,onChange:S=>a(S.target.value),className:"px-4 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-sm text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-red-500",children:[e.jsx("option",{value:"all",children:"All Shifts"}),e.jsx("option",{value:"morning",children:"Morning Shift"}),e.jsx("option",{value:"night",children:"Night Shift"})]}),e.jsxs("select",{value:s,onChange:S=>l(S.target.value),className:"px-4 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-sm text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-red-500",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"present",children:"Present"}),e.jsx("option",{value:"absent",children:"Absent"}),e.jsx("option",{value:"late",children:"Late"})]})]})}),e.jsx(E,{className:"p-8",children:e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[e.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-500 dark:text-gray-400",children:"Employee"}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-500 dark:text-gray-400",children:"Role"}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-500 dark:text-gray-400",children:"Shift"}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-500 dark:text-gray-400",children:"Check In"}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-500 dark:text-gray-400",children:"Check Out"}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-500 dark:text-gray-400",children:"Hours"}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-500 dark:text-gray-400",children:"Status"}),e.jsx("th",{className:"text-right py-3 px-4 text-sm font-medium text-gray-500 dark:text-gray-400",children:"Actions"})]})}),e.jsx("tbody",{children:j.map(S=>e.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[e.jsx("td",{className:"py-4 px-4",children:e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:S.employeeName})}),e.jsx("td",{className:"py-4 px-4 text-sm text-gray-600 dark:text-gray-300",children:g.find(w=>w.id===S.employeeId)?.role||"N/A"}),e.jsx("td",{className:"py-4 px-4",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${S.shift==="morning"?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400":"bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400"}`,children:S.shift==="morning"?"Morning":"Night"})}),e.jsx("td",{className:"py-4 px-4 text-sm text-gray-600 dark:text-gray-300",children:S.checkIn||"-"}),e.jsx("td",{className:"py-4 px-4 text-sm text-gray-600 dark:text-gray-300",children:S.checkOut||"-"}),e.jsx("td",{className:"py-4 px-4 text-sm text-gray-600 dark:text-gray-300",children:S.hoursWorked?`${S.hoursWorked}h`:"-"}),e.jsx("td",{className:"py-4 px-4",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${S.status==="present"?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":S.status==="late"?"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400":S.status==="absent"?"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"}`,children:S.status})}),e.jsx("td",{className:"py-4 px-4",children:e.jsx("div",{className:"flex items-center justify-end gap-2",children:!S.checkOut&&e.jsx("button",{onClick:()=>y(S.id),className:"px-3 py-1 text-xs font-medium text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors",children:"Check Out"})})})]},S.id))})]}),j.length===0&&e.jsx("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:"No attendance records for selected filters."})]})}),e.jsxs(E,{className:"p-8",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-4",children:"Quick Mark Attendance"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:g.map(S=>{const w=t.some(p=>p.employeeId===S.id);return e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 dark:border-gray-700 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:S.name}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[S.role," • ",S.shift," shift"]})]}),!w&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>r(S.id,"present",S.shift),className:"p-2 text-green-600 dark:text-green-400 hover:bg-green-50 dark:hover:bg-green-900/20 rounded-lg transition-colors",title:"Mark Present",children:e.jsx(He,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>r(S.id,"absent",S.shift),className:"p-2 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",title:"Mark Absent",children:e.jsx(Nt,{className:"w-4 h-4"})})]}),w&&e.jsx("span",{className:"text-xs text-green-600 dark:text-green-400 font-medium",children:"✓ Marked"})]},S.id)})})]})]})}function ca(){const{settings:t,formatPrice:n}=le(),[g,b]=d.useState([]),[o,h]=d.useState([]),[x,v]=d.useState([]),[m,i]=d.useState(null),[c,a]=d.useState(""),[s,l]=d.useState(null),[k,r]=d.useState(!1),[y,j]=d.useState({name:"",email:"",phone:"",address:"",city:"",state:"",zipCode:""}),[P,S]=d.useState("grid"),[w,p]=d.useState(!1),[A,u]=d.useState(!1),[T,W]=d.useState(null);d.useEffect(()=>{C(),H()},[m]);const C=async()=>{try{const N=await fetch(`${_}/system/categories`,{headers:{Authorization:`Bearer ${q}`}});if(N.ok){const L=await N.json();h(L.filter(M=>M.isActive))}}catch(N){console.error("Error loading categories:",N)}},H=async()=>{try{const N=m?`${_}/public/products?category=${m}`:`${_}/public/products`,L=await fetch(N,{headers:{Authorization:`Bearer ${q}`}});if(L.ok){const M=await L.json();b(M.products||[])}}catch(N){console.error("Error loading products:",N)}},U=g.filter(N=>N.name.toLowerCase().includes(c.toLowerCase())||N.description?.toLowerCase().includes(c.toLowerCase())),de=(N,L=1)=>{const M=x.find(J=>J.id===N.id);v(M?x.map(J=>J.id===N.id?{...J,quantity:J.quantity+L}:J):[...x,{...N,quantity:L}]),l(null)},ie=(N,L)=>{L<=0?oe(N):v(x.map(M=>M.id===N?{...M,quantity:L}:M))},oe=N=>{v(x.filter(L=>L.id!==N))},O=()=>{v([])},B=()=>{if(x.length===0){alert("Cart is empty!");return}r(!0)},Y=async()=>{const N=document.getElementById("invoice-content");if(N)try{const L=await pt(N,{scale:2,logging:!1,useCORS:!0}),M=L.toDataURL("image/png"),J=new bt({orientation:"portrait",unit:"mm",format:"a4"}),G=210,Q=L.height*G/L.width;J.addImage(M,"PNG",0,0,G,Q),J.save(`invoice-${T?.invoiceNumber||Date.now()}.pdf`)}catch(L){console.error("Error generating PDF:",L),alert("Failed to generate PDF")}},ee=()=>{window.print()},D=async()=>{if(!y.name||!y.email||!y.phone){alert("Please fill in all required customer information");return}p(!0);try{const N=x.reduce((Q,X)=>Q+X.price*X.quantity,0),L=N*(t.tax_rate/100),M=N+L,J={customerEmail:y.email,customerName:y.name,items:x,total:M,deliveryMethod:"In-Store Pickup",shippingAddress:y},G=await fetch(`${_}/customer-orders`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${q}`},body:JSON.stringify(J)});if(G.ok){const Q=await G.json(),X=(Q.purchasedItems||[]).map(Ce=>({...Ce,digitalItem:Ce.digital_key})),ge={invoiceNumber:Q.orderNumber||`INV-${Date.now()}`,date:new Date().toISOString(),customer:y,items:X.length>0?X:[...x],subtotal:N,tax:L,total:M};W(ge),u(!0),v([]),j({name:"",email:"",phone:"",address:"",city:"",state:"",zipCode:""}),r(!1)}}catch(N){console.error("Error completing checkout:",N),alert("Failed to complete checkout")}finally{p(!1)}},F=x.reduce((N,L)=>N+L.price*L.quantity,0),f=F*(t.tax_rate/100),I=F+f;return e.jsxs("div",{className:"h-screen flex bg-gray-50 dark:bg-gray-900 overflow-hidden",children:[e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Point of Sale"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>S("grid"),className:`p-2 rounded-lg ${P==="grid"?"bg-red-100 text-red-600":"text-gray-600 hover:bg-gray-100"}`,children:e.jsx(is,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>S("list"),className:`p-2 rounded-lg ${P==="list"?"bg-red-100 text-red-600":"text-gray-600 hover:bg-gray-100"}`,children:e.jsx(os,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(re,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search products...",value:c,onChange:N=>a(N.target.value),className:"w-full pl-10 pr-4 py-3 bg-gray-50 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500"})]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 p-4",children:e.jsxs("div",{className:"flex gap-2 overflow-x-auto",children:[e.jsx("button",{onClick:()=>i(null),className:`px-4 py-2 rounded-lg font-medium whitespace-nowrap ${m?"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300":"bg-red-600 text-white"}`,children:"All Products"}),o.map(N=>e.jsxs("button",{onClick:()=>i(N.slug),className:`px-4 py-2 rounded-lg font-medium whitespace-nowrap flex items-center gap-2 ${m===N.slug?"bg-red-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"}`,children:[e.jsx("span",{children:N.icon}),N.name]},N.id))]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[P==="grid"?e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:U.map(N=>e.jsxs($.div,{whileHover:{y:-4},onClick:()=>l(N),className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden cursor-pointer border-2 border-transparent hover:border-red-500 transition-all",children:[e.jsxs("div",{className:"aspect-square bg-gray-100 dark:bg-gray-700 relative overflow-hidden",children:[N.image?e.jsx("img",{src:N.image,alt:N.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(K,{className:"w-12 h-12 text-gray-400"})}),N.stock<=0&&e.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold",children:"Out of Stock"})})]}),e.jsxs("div",{className:"p-3",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-sm line-clamp-1",children:N.name}),e.jsx("p",{className:"text-lg font-bold text-red-600 mt-1",children:n(N.price)}),e.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:["Stock: ",N.stock]})]})]},N.id))}):e.jsx("div",{className:"space-y-2",children:U.map(N=>e.jsxs($.div,{whileHover:{x:4},onClick:()=>l(N),className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 cursor-pointer border-2 border-transparent hover:border-red-500 transition-all flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 dark:bg-gray-700 rounded-lg overflow-hidden flex-shrink-0",children:N.image?e.jsx("img",{src:N.image,alt:N.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(K,{className:"w-6 h-6 text-gray-400"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:N.name}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-1",children:N.description})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xl font-bold text-red-600",children:n(N.price)}),e.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:["Stock: ",N.stock]})]})]},N.id))}),U.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(K,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No products found"})]})]})]}),e.jsxs("div",{className:"w-96 bg-white dark:bg-gray-800 border-l border-gray-200 dark:border-gray-700 flex flex-col",children:[e.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-lg flex items-center justify-center",children:e.jsx(se,{className:"w-5 h-5 text-red-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Current Order"}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[x.length," items"]})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:x.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(se,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Cart is empty"})]}):x.map(N=>e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-3",children:[e.jsxs("div",{className:"flex gap-3 mb-2",children:[e.jsx("img",{src:N.image,alt:N.name,className:"w-12 h-12 rounded object-cover"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-semibold text-sm text-gray-900 dark:text-white truncate",children:N.name}),e.jsx("p",{className:"text-sm font-bold text-red-600",children:n(N.price)})]}),e.jsx("button",{onClick:()=>oe(N.id),className:"text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 p-1 rounded",children:e.jsx(ae,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>ie(N.id,N.quantity-1),className:"w-8 h-8 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded flex items-center justify-center",children:e.jsx(Lt,{className:"w-4 h-4"})}),e.jsx("span",{className:"w-12 text-center font-semibold text-gray-900 dark:text-white",children:N.quantity}),e.jsx("button",{onClick:()=>ie(N.id,N.quantity+1),className:"w-8 h-8 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded flex items-center justify-center",children:e.jsx(me,{className:"w-4 h-4"})}),e.jsx("span",{className:"ml-auto font-bold text-gray-900 dark:text-white",children:n(N.price*N.quantity)})]})]},N.id))}),x.length>0&&e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 p-4 space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-gray-600 dark:text-gray-400",children:[e.jsx("span",{children:"Subtotal"}),e.jsx("span",{className:"font-semibold",children:n(F)})]}),e.jsxs("div",{className:"flex justify-between text-gray-600 dark:text-gray-400",children:[e.jsxs("span",{children:["Tax (",t.tax_rate,"%)"]}),e.jsx("span",{className:"font-semibold",children:n(f)})]}),e.jsxs("div",{className:"flex justify-between text-xl font-bold text-gray-900 dark:text-white pt-2 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("span",{children:"Total"}),e.jsx("span",{className:"text-red-600",children:n(I)})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:O,className:"flex-1 py-3 border-2 border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg font-semibold hover:bg-gray-50 dark:hover:bg-gray-700",children:"Clear"}),e.jsx("button",{onClick:B,className:"flex-1 py-3 bg-gradient-to-r from-red-600 to-red-500 text-white rounded-lg font-semibold shadow-lg hover:shadow-xl transition-all",children:"Checkout"})]})]})]}),e.jsx(ue,{children:s&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsx($.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Product Details"}),e.jsx("button",{onClick:()=>l(null),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:e.jsx(Z,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsx("div",{className:"aspect-square bg-gray-100 dark:bg-gray-700 rounded-xl overflow-hidden",children:s.image?e.jsx("img",{src:s.image,alt:s.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(K,{className:"w-24 h-24 text-gray-400"})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:s.name}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:s.description}),e.jsx("p",{className:"text-3xl font-bold text-red-600 mb-4",children:n(s.price)}),e.jsxs("div",{className:"space-y-2 mb-6",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Category"}),e.jsx("span",{className:"font-semibold",children:s.categorySlug||"N/A"})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Stock"}),e.jsxs("span",{className:`font-semibold ${s.stock>0?"text-green-600":"text-red-600"}`,children:[s.stock," units"]})]}),s.attributes&&Object.entries(s.attributes).map(([N,L])=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:N}),e.jsx("span",{className:"font-semibold",children:String(L)})]},N))]}),e.jsxs("button",{onClick:()=>de(s),disabled:s.stock<=0,className:"w-full py-3 bg-gradient-to-r from-red-600 to-red-500 text-white rounded-lg font-semibold shadow-lg hover:shadow-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[e.jsx(se,{className:"w-5 h-5"}),"Add to Cart"]})]})]})]})})})}),e.jsx(ue,{children:A&&T&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsx($.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8 print:hidden",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Invoice Generated"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:Y,className:"p-2 bg-green-100 text-green-600 rounded-lg hover:bg-green-200 transition-colors",title:"Download PDF",children:e.jsx(he,{className:"w-5 h-5"})}),e.jsx("button",{onClick:ee,className:"p-2 bg-blue-100 text-blue-600 rounded-lg hover:bg-blue-200 transition-colors",title:"Print Invoice",children:e.jsx(Et,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>u(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:e.jsx(Z,{className:"w-6 h-6"})})]})]}),e.jsxs("div",{className:"space-y-6",id:"invoice-content",children:[e.jsxs("div",{className:"flex justify-between items-start border-b border-gray-200 dark:border-gray-700 pb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"GamesUp Store"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"123 Gaming Street"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Tech City, TC 90210"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"contact@gamesup.com"})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-lg font-bold text-gray-900 dark:text-white",children:["Invoice #",T.invoiceNumber]}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:new Date(T.date).toLocaleDateString()})]})]}),e.jsx("div",{className:"grid grid-cols-2 gap-8 border-b border-gray-200 dark:border-gray-700 pb-6",children:e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-2",children:"Bill To:"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:T.customer.name}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:T.customer.email}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:T.customer.phone})]})}),e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[e.jsx("th",{className:"text-left py-2 text-sm font-semibold text-gray-900 dark:text-white",children:"Item"}),e.jsx("th",{className:"text-center py-2 text-sm font-semibold text-gray-900 dark:text-white",children:"Qty"}),e.jsx("th",{className:"text-right py-2 text-sm font-semibold text-gray-900 dark:text-white",children:"Price"}),e.jsx("th",{className:"text-right py-2 text-sm font-semibold text-gray-900 dark:text-white",children:"Total"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:T.items.map((N,L)=>e.jsxs("tr",{children:[e.jsxs("td",{className:"py-3 text-sm text-gray-600 dark:text-gray-300",children:[e.jsx("div",{className:"font-medium",children:N.name}),N.attributes&&Object.entries(N.attributes).length>0&&e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:Object.entries(N.attributes).map(([M,J])=>e.jsxs("span",{className:"mr-2",children:[M,": ",String(J)]},M))}),N.digitalItem&&e.jsxs("div",{className:"mt-2 text-xs bg-gray-50 dark:bg-gray-700/50 p-2 rounded border border-gray-100 dark:border-gray-600",children:[N.digitalItem.email&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx("span",{className:"font-semibold text-gray-700 dark:text-gray-300",children:"Email:"})," ",e.jsx("span",{className:"font-mono text-gray-600 dark:text-gray-400 select-all",children:N.digitalItem.email})]}),N.digitalItem.password&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx("span",{className:"font-semibold text-gray-700 dark:text-gray-300",children:"Password:"})," ",e.jsx("span",{className:"font-mono text-gray-600 dark:text-gray-400 select-all",children:N.digitalItem.password})]}),N.digitalItem.code&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx("span",{className:"font-semibold text-gray-700 dark:text-gray-300",children:"Code:"})," ",e.jsx("span",{className:"font-mono text-gray-600 dark:text-gray-400 select-all",children:N.digitalItem.code})]})]})]}),e.jsx("td",{className:"py-3 text-center text-sm text-gray-600 dark:text-gray-300",children:N.quantity||1}),e.jsx("td",{className:"py-3 text-right text-sm text-gray-600 dark:text-gray-300",children:n(N.price)}),e.jsx("td",{className:"py-3 text-right text-sm font-medium text-gray-900 dark:text-white",children:n(N.price*(N.quantity||1))})]},L))})]}),e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4 space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Subtotal:"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:n(T.subtotal)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:["Tax (",t.tax_rate,"%):"]}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:n(T.tax)})]}),e.jsxs("div",{className:"flex justify-between text-lg font-bold border-t border-gray-200 dark:border-gray-700 pt-2",children:[e.jsx("span",{className:"text-gray-900 dark:text-white",children:"Total:"}),e.jsx("span",{className:"text-red-600",children:n(T.total)})]})]})]}),e.jsx("div",{className:"mt-8 pt-6 border-t border-gray-200 dark:border-gray-700 text-center text-sm text-gray-500 dark:text-gray-400 print:hidden",children:e.jsx("p",{children:"Thank you for your business!"})})]})})})}),e.jsx("div",{className:"hidden print:block print:fixed print:inset-0 print:bg-white print:z-[100] p-8",children:T&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-start border-b border-gray-200 pb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"GamesUp Store"}),e.jsx("p",{className:"text-gray-500",children:"123 Gaming Street"}),e.jsx("p",{className:"text-gray-500",children:"Tech City, TC 90210"}),e.jsx("p",{className:"text-gray-500",children:"contact@gamesup.com"})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-lg font-bold text-gray-900",children:["Invoice #",T.invoiceNumber]}),e.jsx("p",{className:"text-gray-500",children:new Date(T.date).toLocaleDateString()})]})]}),e.jsx("div",{className:"grid grid-cols-2 gap-8 border-b border-gray-200 pb-6",children:e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-2",children:"Bill To:"}),e.jsx("p",{className:"text-gray-600",children:T.customer.name}),e.jsx("p",{className:"text-gray-600",children:T.customer.email}),e.jsx("p",{className:"text-gray-600",children:T.customer.phone})]})}),e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("th",{className:"text-left py-2 text-sm font-semibold text-gray-900",children:"Item"}),e.jsx("th",{className:"text-center py-2 text-sm font-semibold text-gray-900",children:"Qty"}),e.jsx("th",{className:"text-right py-2 text-sm font-semibold text-gray-900",children:"Price"}),e.jsx("th",{className:"text-right py-2 text-sm font-semibold text-gray-900",children:"Total"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:T.items.map((N,L)=>e.jsxs("tr",{children:[e.jsxs("td",{className:"py-3 text-sm text-gray-600",children:[e.jsx("div",{className:"font-medium",children:N.name}),N.digitalItem&&e.jsxs("div",{className:"mt-1 text-xs border border-gray-200 p-1 rounded",children:[N.digitalItem.email&&e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Email:"})," ",N.digitalItem.email]}),N.digitalItem.password&&e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Password:"})," ",N.digitalItem.password]}),N.digitalItem.code&&e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Code:"})," ",N.digitalItem.code]})]})]}),e.jsx("td",{className:"py-3 text-center text-sm text-gray-600",children:N.quantity||1}),e.jsx("td",{className:"py-3 text-right text-sm text-gray-600",children:n(N.price)}),e.jsx("td",{className:"py-3 text-right text-sm font-medium text-gray-900",children:n(N.price*(N.quantity||1))})]},L))})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-4 space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Subtotal:"}),e.jsx("span",{className:"font-medium text-gray-900",children:n(T.subtotal)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-600",children:["Tax (",t.tax_rate,"%):"]}),e.jsx("span",{className:"font-medium text-gray-900",children:n(T.tax)})]}),e.jsxs("div",{className:"flex justify-between text-lg font-bold border-t border-gray-200 pt-2",children:[e.jsx("span",{className:"text-gray-900",children:"Total:"}),e.jsx("span",{className:"text-gray-900",children:n(T.total)})]})]}),e.jsx("div",{className:"mt-8 pt-6 border-t border-gray-200 text-center text-sm text-gray-500",children:e.jsx("p",{children:"Thank you for your business!"})})]})}),e.jsx(ue,{children:k&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsx($.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Customer Information"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Enter customer details to complete the order"})]}),e.jsx("button",{onClick:()=>r(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg text-gray-500 dark:text-gray-400",children:e.jsx(Z,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(te,{className:"w-4 h-4 inline mr-2"}),"Full Name *"]}),e.jsx("input",{type:"text",value:y.name,onChange:N=>j({...y,name:N.target.value}),className:"w-full px-4 py-3 bg-gray-50 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400",placeholder:"John Doe",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(ye,{className:"w-4 h-4 inline mr-2"}),"Email *"]}),e.jsx("input",{type:"email",value:y.email,onChange:N=>j({...y,email:N.target.value}),className:"w-full px-4 py-3 bg-gray-50 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400",placeholder:"john@example.com",required:!0})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(Le,{className:"w-4 h-4 inline mr-2"}),"Phone Number *"]}),e.jsx("input",{type:"tel",value:y.phone,onChange:N=>j({...y,phone:N.target.value}),className:"w-full px-4 py-3 bg-gray-50 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400",placeholder:"+1 (555) 000-0000",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(Se,{className:"w-4 h-4 inline mr-2"}),"Address"]}),e.jsx("input",{type:"text",value:y.address,onChange:N=>j({...y,address:N.target.value}),className:"w-full px-4 py-3 bg-gray-50 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400",placeholder:"123 Main St"})]})]}),e.jsxs("div",{className:"mt-6 p-4 bg-gray-50 dark:bg-gray-900 rounded-xl",children:[e.jsx("h3",{className:"font-bold text-gray-900 dark:text-white mb-2",children:"Order Summary"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Items"}),e.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:x.length})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Subtotal"}),e.jsxs("span",{className:"font-semibold text-gray-900 dark:text-white",children:["$",F.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Tax"}),e.jsxs("span",{className:"font-semibold text-gray-900 dark:text-white",children:["$",f.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-lg font-bold pt-2 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("span",{className:"text-gray-900 dark:text-white",children:"Total"}),e.jsxs("span",{className:"text-red-600",children:["$",I.toFixed(2)]})]})]})]}),e.jsxs("div",{className:"flex gap-4 mt-6",children:[e.jsx("button",{onClick:()=>r(!1),className:"flex-1 py-3 border-2 border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg font-semibold hover:bg-gray-50 dark:hover:bg-gray-700",children:"Cancel"}),e.jsx("button",{onClick:D,disabled:w,className:"flex-1 py-3 bg-gradient-to-r from-red-600 to-red-500 text-white rounded-lg font-semibold shadow-lg hover:shadow-xl transition-all disabled:opacity-50 flex items-center justify-center gap-2",children:w?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ue,{className:"w-5 h-5"}),"Complete Order"]})})]})]})})})})]})}function xa({message:t,type:n="success",show:g}){if(!g)return null;const b={success:"bg-green-50 dark:bg-green-900/30 border-green-200 dark:border-green-800 text-green-800 dark:text-green-200",error:"bg-red-50 dark:bg-red-900/30 border-red-200 dark:border-red-800 text-red-800 dark:text-red-200",info:"bg-red-50 dark:bg-red-900/30 border-red-200 dark:border-red-800 text-red-800 dark:text-red-200"},h={success:Ee,error:xs,info:cs}[n];return e.jsxs("div",{className:`fixed top-4 right-4 z-50 flex items-center gap-3 px-4 py-3 rounded-lg border shadow-lg ${b[n]} animate-slide-in`,children:[e.jsx(h,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:t})]})}function ma(){const[t,n]=d.useState("categories"),[g,b]=d.useState([]),[o,h]=d.useState([]),[x,v]=d.useState([]),[m,i]=d.useState(!1),[c,a]=d.useState(null),[s,l]=d.useState(!1),[k,r]=d.useState(null);d.useEffect(()=>{y()},[t]);const y=async()=>{i(!0);try{const H=await fetch(`${_}/system/${t==="categories"?"categories":t==="subcategories"?"subcategories":"attributes"}`,{headers:{Authorization:`Bearer ${q}`}});if(!H.ok)throw new Error(`Failed to load ${t}`);const U=await H.json();t==="categories"?b(U):t==="subcategories"?h(U):v(U)}catch(C){console.error("Error loading data:",C),r({message:`Failed to load ${t}`,type:"error"})}finally{i(!1)}},j=async()=>{try{const C=t==="categories"?"categories":t==="subcategories"?"subcategories":"attributes",H=c?.id?"PUT":"POST",U=c?.id?`${_}/system/${C}/${c.id}`:`${_}/system/${C}`;if(!(await fetch(U,{method:H,headers:{Authorization:`Bearer ${q}`,"Content-Type":"application/json"},body:JSON.stringify(c)})).ok)throw new Error("Failed to save");r({message:`${t} saved successfully!`,type:"success"}),l(!1),a(null),y()}catch(C){console.error("Error saving:",C),r({message:"Failed to save",type:"error"})}},P=async C=>{if(confirm("Are you sure you want to delete this item?"))try{if(!(await fetch(`${_}/system/${t==="categories"?"categories":t==="subcategories"?"subcategories":"attributes"}/${C}`,{method:"DELETE",headers:{Authorization:`Bearer ${q}`}})).ok)throw new Error("Failed to delete");r({message:"Deleted successfully!",type:"success"}),y()}catch(H){console.error("Error deleting:",H),r({message:"Failed to delete",type:"error"})}},S=async()=>{if(confirm("This will create demo categories, subcategories, and attributes. Continue?")){i(!0);try{const C=[{name:"Consoles",slug:"consoles",icon:"🎮",description:"Gaming consoles and hardware",displayOrder:1,isActive:!0},{name:"Games",slug:"games",icon:"🎯",description:"Video games for all platforms",displayOrder:2,isActive:!0},{name:"Accessories",slug:"accessories",icon:"🎧",description:"Gaming accessories and peripherals",displayOrder:3,isActive:!0},{name:"Digital",slug:"digital",icon:"💳",description:"Digital codes and subscriptions",displayOrder:4,isActive:!0}];for(const H of C)await fetch(`${_}/system/categories`,{method:"POST",headers:{Authorization:`Bearer ${q}`,"Content-Type":"application/json"},body:JSON.stringify(H)});r({message:"Demo data initialized successfully!",type:"success"}),y()}catch(C){console.error("Error initializing demo data:",C),r({message:"Failed to initialize demo data",type:"error"})}finally{i(!1)}}},w=()=>{a(t==="categories"?{name:"",description:"",slug:"",icon:"",displayOrder:0,isActive:!0}:t==="subcategories"?{categoryId:g[0]?.id||"",name:"",description:"",slug:"",displayOrder:0,isActive:!0}:{name:"",type:"text",options:[],isRequired:!1,displayOrder:0,isActive:!0}),l(!0)},p=C=>{a({...C}),l(!0)},A=()=>e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[e.jsx("th",{className:"text-left p-4 text-sm font-semibold text-gray-900 dark:text-white",children:"Name"}),e.jsx("th",{className:"text-left p-4 text-sm font-semibold text-gray-900 dark:text-white",children:"Slug"}),e.jsx("th",{className:"text-left p-4 text-sm font-semibold text-gray-900 dark:text-white",children:"Icon"}),e.jsx("th",{className:"text-left p-4 text-sm font-semibold text-gray-900 dark:text-white",children:"Order"}),e.jsx("th",{className:"text-left p-4 text-sm font-semibold text-gray-900 dark:text-white",children:"Status"}),e.jsx("th",{className:"text-right p-4 text-sm font-semibold text-gray-900 dark:text-white",children:"Actions"})]})}),e.jsx("tbody",{children:g.map(C=>e.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-800 hover:bg-gray-50 dark:hover:bg-gray-800/50",children:[e.jsx("td",{className:"p-4 text-sm text-gray-900 dark:text-white font-medium",children:C.name}),e.jsx("td",{className:"p-4 text-sm text-gray-600 dark:text-gray-400",children:C.slug}),e.jsx("td",{className:"p-4 text-sm text-gray-600 dark:text-gray-400",children:C.icon}),e.jsx("td",{className:"p-4 text-sm text-gray-600 dark:text-gray-400",children:C.displayOrder}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${C.isActive?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-400"}`,children:C.isActive?"Active":"Inactive"})}),e.jsxs("td",{className:"p-4 text-right",children:[e.jsx("button",{onClick:()=>p(C),className:"p-2 text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg mr-2",children:e.jsx(je,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>P(C.id),className:"p-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg",children:e.jsx(ae,{className:"w-4 h-4"})})]})]},C.id))})]})}),u=()=>e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[e.jsx("th",{className:"text-left p-4 text-sm font-semibold text-gray-900 dark:text-white",children:"Name"}),e.jsx("th",{className:"text-left p-4 text-sm font-semibold text-gray-900 dark:text-white",children:"Category"}),e.jsx("th",{className:"text-left p-4 text-sm font-semibold text-gray-900 dark:text-white",children:"Slug"}),e.jsx("th",{className:"text-left p-4 text-sm font-semibold text-gray-900 dark:text-white",children:"Order"}),e.jsx("th",{className:"text-left p-4 text-sm font-semibold text-gray-900 dark:text-white",children:"Status"}),e.jsx("th",{className:"text-right p-4 text-sm font-semibold text-gray-900 dark:text-white",children:"Actions"})]})}),e.jsx("tbody",{children:o.map(C=>e.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-800 hover:bg-gray-50 dark:hover:bg-gray-800/50",children:[e.jsx("td",{className:"p-4 text-sm text-gray-900 dark:text-white font-medium",children:C.name}),e.jsx("td",{className:"p-4 text-sm text-gray-600 dark:text-gray-400",children:g.find(H=>H.id===C.categoryId)?.name||"Unknown"}),e.jsx("td",{className:"p-4 text-sm text-gray-600 dark:text-gray-400",children:C.slug}),e.jsx("td",{className:"p-4 text-sm text-gray-600 dark:text-gray-400",children:C.displayOrder}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${C.isActive?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-400"}`,children:C.isActive?"Active":"Inactive"})}),e.jsxs("td",{className:"p-4 text-right",children:[e.jsx("button",{onClick:()=>p(C),className:"p-2 text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg mr-2",children:e.jsx(je,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>P(C.id),className:"p-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg",children:e.jsx(ae,{className:"w-4 h-4"})})]})]},C.id))})]})}),T=()=>e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[e.jsx("th",{className:"text-left p-4 text-sm font-semibold text-gray-900 dark:text-white",children:"Name"}),e.jsx("th",{className:"text-left p-4 text-sm font-semibold text-gray-900 dark:text-white",children:"Type"}),e.jsx("th",{className:"text-left p-4 text-sm font-semibold text-gray-900 dark:text-white",children:"Required"}),e.jsx("th",{className:"text-left p-4 text-sm font-semibold text-gray-900 dark:text-white",children:"Order"}),e.jsx("th",{className:"text-left p-4 text-sm font-semibold text-gray-900 dark:text-white",children:"Status"}),e.jsx("th",{className:"text-right p-4 text-sm font-semibold text-gray-900 dark:text-white",children:"Actions"})]})}),e.jsx("tbody",{children:x.map(C=>e.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-800 hover:bg-gray-50 dark:hover:bg-gray-800/50",children:[e.jsx("td",{className:"p-4 text-sm text-gray-900 dark:text-white font-medium",children:C.name}),e.jsx("td",{className:"p-4 text-sm text-gray-600 dark:text-gray-400 capitalize",children:C.type}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${C.isRequired?"bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-400":"bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-400"}`,children:C.isRequired?"Required":"Optional"})}),e.jsx("td",{className:"p-4 text-sm text-gray-600 dark:text-gray-400",children:C.displayOrder}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${C.isActive?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-400"}`,children:C.isActive?"Active":"Inactive"})}),e.jsxs("td",{className:"p-4 text-right",children:[e.jsx("button",{onClick:()=>p(C),className:"p-2 text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg mr-2",children:e.jsx(je,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>P(C.id),className:"p-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg",children:e.jsx(ae,{className:"w-4 h-4"})})]})]},C.id))})]})}),W=()=>c?e.jsx(pe,{isOpen:s,onClose:()=>l(!1),title:`${c.id?"Edit":"Add"} ${t}`,children:e.jsxs("div",{className:"space-y-4",children:[t==="categories"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Name"}),e.jsx("input",{type:"text",value:c.name,onChange:C=>a({...c,name:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description"}),e.jsx("textarea",{value:c.description,onChange:C=>a({...c,description:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",rows:3})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Slug"}),e.jsx("input",{type:"text",value:c.slug,onChange:C=>a({...c,slug:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Icon (emoji or text)"}),e.jsx("input",{type:"text",value:c.icon,onChange:C=>a({...c,icon:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Display Order"}),e.jsx("input",{type:"number",value:c.displayOrder,onChange:C=>a({...c,displayOrder:parseInt(C.target.value)}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:c.isActive,onChange:C=>a({...c,isActive:C.target.checked}),className:"mr-2"}),e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Active"})]})]}),t==="subcategories"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Parent Category"}),e.jsx("select",{value:c.categoryId,onChange:C=>a({...c,categoryId:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:g.map(C=>e.jsx("option",{value:C.id,children:C.name},C.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Name"}),e.jsx("input",{type:"text",value:c.name,onChange:C=>a({...c,name:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description"}),e.jsx("textarea",{value:c.description,onChange:C=>a({...c,description:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",rows:3})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Slug"}),e.jsx("input",{type:"text",value:c.slug,onChange:C=>a({...c,slug:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Display Order"}),e.jsx("input",{type:"number",value:c.displayOrder,onChange:C=>a({...c,displayOrder:parseInt(C.target.value)}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:c.isActive,onChange:C=>a({...c,isActive:C.target.checked}),className:"mr-2"}),e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Active"})]})]}),t==="attributes"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Name"}),e.jsx("input",{type:"text",value:c.name,onChange:C=>a({...c,name:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Type"}),e.jsxs("select",{value:c.type,onChange:C=>a({...c,type:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"text",children:"Text"}),e.jsx("option",{value:"number",children:"Number"}),e.jsx("option",{value:"select",children:"Select"}),e.jsx("option",{value:"boolean",children:"Boolean"})]})]}),c.type==="select"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Options (comma-separated)"}),e.jsx("input",{type:"text",value:c.options?.join(", ")||"",onChange:C=>a({...c,options:C.target.value.split(",").map(H=>H.trim())}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Display Order"}),e.jsx("input",{type:"number",value:c.displayOrder,onChange:C=>a({...c,displayOrder:parseInt(C.target.value)}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:c.isRequired,onChange:C=>a({...c,isRequired:C.target.checked}),className:"mr-2"}),e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Required"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:c.isActive,onChange:C=>a({...c,isActive:C.target.checked}),className:"mr-2"}),e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Active"})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsxs(R,{onClick:j,className:"flex-1",children:[e.jsx(ze,{className:"w-4 h-4 mr-2"}),"Save"]}),e.jsxs(R,{onClick:()=>l(!1),variant:"secondary",className:"flex-1",children:[e.jsx(Z,{className:"w-4 h-4 mr-2"}),"Cancel"]})]})]})}):null;return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"System Configuration"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Manage categories, sub-categories, and product attributes"})]})}),e.jsxs("div",{className:"flex gap-2 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("button",{onClick:()=>n("categories"),className:`px-4 py-3 font-medium text-sm flex items-center gap-2 border-b-2 transition-colors ${t==="categories"?"border-red-600 text-red-600 dark:text-red-400":"border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:[e.jsx(ms,{className:"w-4 h-4"}),"Categories"]}),e.jsxs("button",{onClick:()=>n("subcategories"),className:`px-4 py-3 font-medium text-sm flex items-center gap-2 border-b-2 transition-colors ${t==="subcategories"?"border-red-600 text-red-600 dark:text-red-400":"border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:[e.jsx(gs,{className:"w-4 h-4"}),"Sub-Categories"]}),e.jsxs("button",{onClick:()=>n("attributes"),className:`px-4 py-3 font-medium text-sm flex items-center gap-2 border-b-2 transition-colors ${t==="attributes"?"border-red-600 text-red-600 dark:text-red-400":"border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:[e.jsx(xt,{className:"w-4 h-4"}),"Attributes"]})]}),e.jsx(E,{className:"p-8",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white capitalize",children:t}),e.jsxs("div",{className:"flex gap-2",children:[t==="categories"&&g.length===0&&e.jsx(R,{onClick:S,variant:"secondary",children:"Initialize Demo Data"}),e.jsxs(R,{onClick:w,children:[e.jsx(me,{className:"w-4 h-4 mr-2"}),"Add ",t==="categories"?"Category":t==="subcategories"?"Sub-Category":"Attribute"]})]})]}),m?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-red-600"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-4",children:"Loading..."})]}):e.jsxs(e.Fragment,{children:[t==="categories"&&A(),t==="subcategories"&&u(),t==="attributes"&&T()]})]})}),W(),k&&e.jsx(xa,{message:k.message,type:k.type,onClose:()=>r(null)})]})}function ga(){const[t,n]=d.useState([]),[g,b]=d.useState(!1),[o,h]=d.useState(null),[x,v]=d.useState(!1),[m,i]=d.useState({name:"",description:"",price:0,estimatedDays:"",active:!0});d.useEffect(()=>{c()},[]);const c=async()=>{try{const r=await fetch(`${_}/delivery-options/all`,{headers:{Authorization:`Bearer ${q}`}});if(r.ok){const y=await r.json();n(y.deliveryOptions||[])}}catch(r){console.error("Error loading delivery options:",r)}},a=r=>{r?(h(r),i({name:r.name,description:r.description,price:r.price,estimatedDays:r.estimatedDays,active:r.active})):(h(null),i({name:"",description:"",price:0,estimatedDays:"",active:!0})),b(!0)},s=()=>{b(!1),h(null),i({name:"",description:"",price:0,estimatedDays:"",active:!0})},l=async()=>{v(!0);try{const r=o?`${_}/delivery-options/${o.id}`:`${_}/delivery-options`;(await fetch(r,{method:o?"PUT":"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${q}`},body:JSON.stringify(m)})).ok&&(await c(),s())}catch(r){console.error("Error saving delivery option:",r)}finally{v(!1)}},k=async r=>{if(confirm("Are you sure you want to delete this delivery option?"))try{(await fetch(`${_}/delivery-options/${r}`,{method:"DELETE",headers:{Authorization:`Bearer ${q}`}})).ok&&await c()}catch(y){console.error("Error deleting delivery option:",y)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Delivery Options"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Manage shipping and delivery methods for your store"})]}),e.jsxs("button",{onClick:()=>a(),className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-red-600 to-red-500 text-white rounded-lg font-medium shadow-lg shadow-red-500/30 hover:shadow-xl transition-all",children:[e.jsx(me,{className:"w-5 h-5"}),"Add Delivery Option"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[t.map(r=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-8 border-2 border-gray-200 dark:border-gray-700 hover:border-red-500 transition-all",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-red-500 to-red-700 flex items-center justify-center",children:e.jsx(xe,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-gray-900 dark:text-white",children:r.name}),e.jsx("span",{className:`inline-block px-2 py-1 text-xs font-semibold rounded-full mt-1 ${r.active?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}`,children:r.active?"Active":"Inactive"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>a(r),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:e.jsx(je,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"})}),e.jsx("button",{onClick:()=>k(r.id),className:"p-2 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:e.jsx(ae,{className:"w-4 h-4 text-red-600 dark:text-red-400"})})]})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:r.description}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-400",children:[e.jsx($e,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:r.estimatedDays})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ot,{className:"w-5 h-5 text-red-600"}),e.jsx("span",{className:"text-xl font-bold text-red-600",children:r.price===0?"FREE":r.price.toFixed(2)})]})]})]},r.id)),t.length===0&&e.jsxs("div",{className:"col-span-full bg-white dark:bg-gray-800 rounded-xl shadow-lg p-12 text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center mx-auto mb-4",children:e.jsx(xe,{className:"w-8 h-8 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"No delivery options yet"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Add your first delivery option to start offering shipping to customers"}),e.jsx("button",{onClick:()=>a(),className:"px-6 py-3 bg-gradient-to-r from-red-600 to-red-500 text-white rounded-lg font-medium shadow-lg shadow-red-500/30 hover:shadow-xl transition-all",children:"Add Delivery Option"})]})]}),g&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:o?"Edit Delivery Option":"Add Delivery Option"}),e.jsx("button",{onClick:s,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:e.jsx(Z,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Delivery Name"}),e.jsx("input",{type:"text",value:m.name,onChange:r=>i({...m,name:r.target.value}),className:"w-full px-4 py-3 bg-gray-50 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 text-gray-900 dark:text-white",placeholder:"e.g., Standard Shipping"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description"}),e.jsx("input",{type:"text",value:m.description,onChange:r=>i({...m,description:r.target.value}),className:"w-full px-4 py-3 bg-gray-50 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 text-gray-900 dark:text-white",placeholder:"e.g., Delivered in 5-7 business days"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Price ($)"}),e.jsx("input",{type:"number",value:m.price,onChange:r=>i({...m,price:parseFloat(r.target.value)||0}),className:"w-full px-4 py-3 bg-gray-50 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 text-gray-900 dark:text-white",placeholder:"0.00",step:"0.01",min:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Estimated Time"}),e.jsx("input",{type:"text",value:m.estimatedDays,onChange:r=>i({...m,estimatedDays:r.target.value}),className:"w-full px-4 py-3 bg-gray-50 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 text-gray-900 dark:text-white",placeholder:"5-7 business days"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",id:"active",checked:m.active,onChange:r=>i({...m,active:r.target.checked}),className:"w-5 h-5 text-red-600 rounded focus:ring-2 focus:ring-red-500"}),e.jsx("label",{htmlFor:"active",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Active (available for customers to select)"})]})]}),e.jsxs("div",{className:"flex gap-4 p-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{onClick:s,className:"flex-1 px-6 py-3 border-2 border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg font-semibold hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:l,disabled:x||!m.name||!m.description,className:"flex-1 px-6 py-3 bg-gradient-to-r from-red-600 to-red-500 text-white rounded-lg font-semibold shadow-lg shadow-red-500/30 hover:shadow-xl transition-all disabled:opacity-50 flex items-center justify-center gap-2",children:[e.jsx(ze,{className:"w-5 h-5"}),x?"Saving...":"Save Delivery Option"]})]})]})})]})}function ha(){const{formatPrice:t}=le(),[n,g]=d.useState([]),[b,o]=d.useState(!0),[h,x]=d.useState(""),[v,m]=d.useState(null);d.useEffect(()=>{i()},[]);const i=async()=>{try{o(!0);const s=await Ms.getSoldProducts();g(s||[])}catch(s){console.error(s)}finally{o(!1)}},c=(s,l)=>{navigator.clipboard.writeText(s),m(l),setTimeout(()=>m(null),2e3)},a=n.filter(s=>s.productName.toLowerCase().includes(h.toLowerCase())||s.customerName.toLowerCase().includes(h.toLowerCase())||s.customerEmail.toLowerCase().includes(h.toLowerCase())||s.orderNumber.toLowerCase().includes(h.toLowerCase()));return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Sold Products"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Track and manage sold digital keys"})]})}),e.jsx(E,{className:"p-4",children:e.jsxs("div",{className:"relative",children:[e.jsx(re,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search products, customers, or order numbers...",value:h,onChange:s=>x(s.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-sm text-gray-900 dark:text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-red-500"})]})}),b?e.jsx("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:"Loading sold products..."}):a.length===0?e.jsx("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:"No sold products found matching your search."}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map(s=>e.jsxs(E,{className:"p-6 flex flex-col h-full hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-gray-900 dark:text-white text-lg",children:s.productName}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:s.orderNumber})]}),e.jsx("div",{className:"bg-green-100 text-green-800 text-xs font-semibold px-2 py-1 rounded-full",children:"Sold"})]}),e.jsxs("div",{className:"space-y-3 flex-grow",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Customer:"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:s.customerName})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Email:"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white truncate max-w-[180px]",title:s.customerEmail,children:s.customerEmail})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Date:"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:new Date(s.date).toLocaleDateString()})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Price:"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:t(s.price)})]})]}),e.jsx("div",{className:"mt-6 pt-4 border-t border-gray-100 dark:border-gray-700",children:e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2",children:"Digital Key / Credentials"}),s.digitalItem.code&&e.jsx("div",{className:"mb-2",children:e.jsxs("div",{className:"flex items-center justify-between bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded p-2",children:[e.jsx("code",{className:"text-sm font-mono text-blue-600 dark:text-blue-400 font-bold truncate mr-2 select-all",children:s.digitalItem.code}),e.jsx("button",{onClick:()=>c(s.digitalItem.code,`code-${s.id}`),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",title:"Copy Code",children:v===`code-${s.id}`?e.jsx(Tt,{className:"w-4 h-4 text-green-500"}):e.jsx(st,{className:"w-4 h-4"})})]})}),(s.digitalItem.email||s.digitalItem.password)&&e.jsxs("div",{className:"space-y-2 mt-2",children:[s.digitalItem.email&&e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-gray-500",children:"Email:"}),e.jsx("span",{className:"font-mono bg-white px-1 rounded select-all",children:s.digitalItem.email})]}),s.digitalItem.password&&e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-gray-500",children:"Pass:"}),e.jsx("span",{className:"font-mono bg-white px-1 rounded select-all",children:s.digitalItem.password})]})]}),!s.digitalItem.code&&!s.digitalItem.email&&!s.digitalItem.password&&e.jsx("div",{className:"text-center text-sm text-gray-500 italic",children:"No digital content recorded"})]})})]},s.id))})]})}function ua({className:t,type:n,...g}){return e.jsx("input",{type:n,"data-slot":"input",className:fe("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...g})}function ya({className:t,...n}){return e.jsx("textarea",{"data-slot":"textarea",className:fe("resize-none border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-input-background px-3 py-2 text-base transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),...n})}function pa({className:t,...n}){return e.jsx(Es,{"data-slot":"tabs",className:fe("flex flex-col gap-2",t),...n})}function ba({className:t,...n}){return e.jsx(Ts,{"data-slot":"tabs-list",className:fe("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-xl p-[3px] flex",t),...n})}function Ye({className:t,...n}){return e.jsx($s,{"data-slot":"tabs-trigger",className:fe("data-[state=active]:bg-card dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-xl border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...n})}function fa(){const[t,n]=d.useState([]),[g,b]=d.useState(!0),[o,h]=d.useState(!1),[x,v]=d.useState("registration"),[m,i]=d.useState(""),[c,a]=d.useState("");d.useEffect(()=>{s()},[]),d.useEffect(()=>{if(t.length>0){const k=t.find(r=>r.type===x);k&&(i(k.subject),a(k.body))}},[x,t]);const s=async()=>{try{b(!0);const k=await Oe.get("/email-templates");if(n(k),k.length>0){const r=k.find(y=>y.type===x)||k[0];i(r.subject),a(r.body)}}catch(k){qe.error("Failed to load email templates"),console.error(k)}finally{b(!1)}},l=async()=>{try{h(!0),await Oe.put(`/email-templates/${x}`,{subject:m,body:c}),qe.success("Template updated successfully"),n(k=>k.map(r=>r.type===x?{...r,subject:m,body:c}:r))}catch(k){qe.error("Failed to update template"),console.error(k)}finally{h(!1)}};return g?e.jsx("div",{className:"p-8 flex justify-center",children:"Loading templates..."}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight text-gray-900 dark:text-white",children:"Email Templates"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Manage automated email content"})]})}),e.jsx(E,{className:"p-6 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 shadow-sm",children:e.jsxs(pa,{value:x,onValueChange:v,className:"w-full",children:[e.jsxs(ba,{className:"mb-6 bg-gray-100 dark:bg-gray-700 p-1 rounded-lg",children:[e.jsx(Ye,{value:"registration",className:"flex-1 px-4 py-2 rounded-md data-[state=active]:bg-white dark:data-[state=active]:bg-gray-600 data-[state=active]:text-red-600 dark:data-[state=active]:text-red-400 data-[state=active]:shadow-sm data-[state=active]:font-bold transition-all",children:"Registration"}),e.jsx(Ye,{value:"order",className:"flex-1 px-4 py-2 rounded-md data-[state=active]:bg-white dark:data-[state=active]:bg-gray-600 data-[state=active]:text-red-600 dark:data-[state=active]:text-red-400 data-[state=active]:shadow-sm data-[state=active]:font-bold transition-all",children:"Order Confirmation"}),e.jsx(Ye,{value:"reset_password",className:"flex-1 px-4 py-2 rounded-md data-[state=active]:bg-white dark:data-[state=active]:bg-gray-600 data-[state=active]:text-red-600 dark:data-[state=active]:text-red-400 data-[state=active]:shadow-sm data-[state=active]:font-bold transition-all",children:"Reset Password"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300",children:"Subject"}),e.jsx(ua,{value:m,onChange:k=>i(k.target.value),placeholder:"Email Subject",className:"max-w-xl bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-white border-gray-300 dark:border-gray-600 focus:ring-red-500 focus:border-red-500 placeholder:text-gray-400 dark:placeholder:text-gray-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300",children:"Content (HTML)"}),e.jsx(ya,{value:c,onChange:k=>a(k.target.value),placeholder:"<html>...</html>",className:"min-h-[400px] font-mono text-sm bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-white border-gray-300 dark:border-gray-600 focus:ring-red-500 focus:border-red-500 placeholder:text-gray-400 dark:placeholder:text-gray-500"}),e.jsxs("div",{className:"flex items-center gap-2 mt-2 p-3 bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 text-xs rounded-md border border-blue-100 dark:border-blue-800",children:[e.jsx("span",{className:"font-semibold",children:"Available placeholders:"}),e.jsxs("code",{className:"bg-white dark:bg-gray-800 px-1.5 py-0.5 rounded border border-blue-200 dark:border-blue-700",children:[x==="registration"&&" {{name}}",x==="order"&&" {{name}}, {{orderId}}",x==="reset_password"&&" {{link}}"]})]})]}),e.jsx("div",{className:"pt-4 flex justify-end border-t border-gray-100 dark:border-gray-700",children:e.jsx(R,{onClick:l,disabled:o,className:"bg-red-600 hover:bg-red-700 text-white min-w-[120px]",children:o?"Saving...":"Save Changes"})})]})]})})]})}function ja(){const[t,n]=d.useState(!1),[g,b]=d.useState(()=>localStorage.getItem("theme")==="dark"),[o,h]=d.useState(!1),[x,v]=d.useState(null),[m,i]=d.useState(null);d.useEffect(()=>{localStorage.setItem("theme",g?"dark":"light"),g?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[g]),d.useEffect(()=>{const s=localStorage.getItem("session"),l=localStorage.getItem("user");if(s&&l)try{const k=JSON.parse(s),r=JSON.parse(l);k&&k.access_token?(i(k),v(r),De(k.access_token),h(!0),console.log("Session restored from localStorage")):(console.log("Invalid session found, clearing..."),localStorage.removeItem("session"),localStorage.removeItem("user"))}catch(k){console.error("Error parsing saved session:",k),localStorage.removeItem("session"),localStorage.removeItem("user")}},[]);const c=(s,l)=>{v(s),i(l),De(l.access_token),h(!0),localStorage.setItem("user",JSON.stringify(s)),localStorage.setItem("session",JSON.stringify(l))},a=()=>{v(null),i(null),h(!1),De(null),localStorage.removeItem("user"),localStorage.removeItem("session")};return o?e.jsx("div",{className:g?"dark":"",children:e.jsxs("div",{className:"flex h-screen bg-white dark:bg-gray-900 transition-colors",children:[e.jsx(Fs,{collapsed:t,onToggleCollapse:()=>n(!t),onLogout:a,userRole:x?.user_metadata?.role||"admin",userPermissions:x?.user_metadata?.permissions}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsx(Us,{isDarkMode:g,onToggleTheme:()=>b(!g),user:x,onLogout:a}),e.jsx("main",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs(Rt,{children:[e.jsx(V,{path:"/",element:e.jsx(Ct,{to:"dashboard",replace:!0})}),e.jsx(V,{path:"dashboard",element:e.jsx(Gs,{})}),e.jsx(V,{path:"products",element:e.jsx(Ws,{})}),e.jsx(V,{path:"data-overview",element:e.jsx(Qs,{})}),e.jsx(V,{path:"orders",element:e.jsx(Ks,{})}),e.jsx(V,{path:"sold-products",element:e.jsx(ha,{})}),e.jsx(V,{path:"pos",element:e.jsx(ca,{})}),e.jsx(V,{path:"analytics",element:e.jsx(Zs,{})}),e.jsx(V,{path:"customers",element:e.jsx(Xs,{})}),e.jsx(V,{path:"banners",element:e.jsx(ia,{})}),e.jsx(V,{path:"outlook",element:e.jsx(na,{})}),e.jsx(V,{path:"hr",element:e.jsx(oa,{})}),e.jsx(V,{path:"tasks",element:e.jsx(sa,{})}),e.jsx(V,{path:"team",element:e.jsx(aa,{})}),e.jsx(V,{path:"roles",element:e.jsx(la,{})}),e.jsx(V,{path:"system",element:e.jsx(ma,{})}),e.jsx(V,{path:"settings",element:e.jsx(ra,{})}),e.jsx(V,{path:"delivery",element:e.jsx(ga,{})}),e.jsx(V,{path:"email-templates",element:e.jsx(fa,{})}),e.jsx(V,{path:"*",element:e.jsx(Ct,{to:"dashboard",replace:!0})})]})})]})]})}):e.jsx(Bs,{onLogin:c})}function Na({isOpen:t,onClose:n,onCheckout:g,onNavigate:b}){const[o,h]=d.useState([]);d.useEffect(()=>{x()},[t]);const x=()=>{const l=JSON.parse(localStorage.getItem("cart")||"[]");h(l)},v=(l,k)=>{if(k<1)return;const r=o.map(y=>y.id===l?{...y,quantity:k}:y);h(r),localStorage.setItem("cart",JSON.stringify(r))},m=l=>{const k=o.filter(r=>r.id!==l);h(k),localStorage.setItem("cart",JSON.stringify(k))},i=()=>{h([]),localStorage.setItem("cart",JSON.stringify([]))},c=o.reduce((l,k)=>l+k.price*k.quantity,0),a=c*.1,s=c+a;return e.jsx(ue,{children:t&&e.jsxs(e.Fragment,{children:[e.jsx($.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:n,className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50"}),e.jsxs($.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",damping:30,stiffness:300},className:"fixed right-0 top-0 h-full w-full sm:w-[480px] bg-white shadow-2xl z-50 flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-red-500 to-red-700 flex items-center justify-center",children:e.jsx(vt,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Shopping Cart"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[o.length," items"]})]})]}),e.jsx("button",{onClick:n,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(Z,{className:"w-6 h-6 text-gray-600"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:o.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center py-12",children:[e.jsx("div",{className:"w-20 h-20 rounded-full bg-gray-100 flex items-center justify-center mb-4",children:e.jsx(vt,{className:"w-10 h-10 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Your cart is empty"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Add some products to get started!"}),e.jsx("button",{onClick:()=>{n(),b("shop")},className:"px-6 py-3 bg-gradient-to-r from-red-600 to-red-500 text-white rounded-lg font-medium shadow-lg shadow-red-500/30 hover:shadow-xl transition-all",children:"Continue Shopping"})]}):e.jsxs(e.Fragment,{children:[o.map(l=>e.jsxs($.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"flex gap-4 p-4 bg-gray-50 rounded-xl hover:bg-gray-100 transition-colors",children:[e.jsx("div",{className:"w-20 h-20 rounded-lg bg-white overflow-hidden flex-shrink-0 shadow-sm",children:e.jsx("img",{src:l.image,alt:l.name,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-gray-900 truncate",children:l.name}),l.category&&e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:l.category}),e.jsxs("p",{className:"text-lg font-bold text-red-600",children:["$",l.price.toFixed(2)]}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx("button",{onClick:()=>v(l.id,l.quantity-1),className:"w-7 h-7 rounded-lg bg-white border border-gray-300 flex items-center justify-center hover:bg-gray-50 transition-colors",children:e.jsx(Lt,{className:"w-3 h-3 text-gray-600"})}),e.jsx("span",{className:"w-8 text-center font-semibold text-gray-900",children:l.quantity}),e.jsx("button",{onClick:()=>v(l.id,l.quantity+1),className:"w-7 h-7 rounded-lg bg-white border border-gray-300 flex items-center justify-center hover:bg-gray-50 transition-colors",children:e.jsx(me,{className:"w-3 h-3 text-gray-600"})})]})]}),e.jsx("button",{onClick:()=>m(l.id),className:"p-2 h-fit hover:bg-red-50 rounded-lg transition-colors group",children:e.jsx(ae,{className:"w-5 h-5 text-gray-400 group-hover:text-red-600 transition-colors"})})]},l.id)),o.length>0&&e.jsx("button",{onClick:i,className:"w-full py-2 text-sm text-red-600 hover:text-red-700 font-medium",children:"Clear Cart"})]})}),o.length>0&&e.jsxs("div",{className:"border-t border-gray-200 p-6 bg-gray-50",children:[e.jsxs("div",{className:"space-y-3 mb-4",children:[e.jsxs("div",{className:"flex justify-between text-gray-600",children:[e.jsx("span",{children:"Subtotal"}),e.jsxs("span",{className:"font-semibold",children:["$",c.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-gray-600",children:[e.jsx("span",{children:"Tax (10%)"}),e.jsxs("span",{className:"font-semibold",children:["$",a.toFixed(2)]})]}),e.jsxs("div",{className:"border-t border-gray-300 pt-3 flex justify-between text-lg font-bold text-gray-900",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{className:"text-red-600",children:["$",s.toFixed(2)]})]})]}),e.jsxs("button",{onClick:()=>{g(),n()},className:"w-full py-4 bg-gradient-to-r from-red-600 to-red-500 text-white rounded-xl font-semibold shadow-lg shadow-red-500/30 hover:shadow-xl transition-all flex items-center justify-center gap-2 group",children:["Proceed to Checkout",e.jsx(Ie,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]}),e.jsx("button",{onClick:()=>{n(),b("shop")},className:"w-full mt-3 py-3 text-gray-600 hover:text-gray-900 font-medium",children:"Continue Shopping"})]})]})]})})}function va({isOpen:t,onClose:n,onNavigate:g}){const[b,o]=d.useState(""),[h,x]=d.useState([]),[v,m]=d.useState(!1);return d.useEffect(()=>{if(!t){o(""),x([]);return}},[t]),d.useEffect(()=>{const c=setTimeout(async()=>{if(!b.trim()){x([]);return}m(!0);try{const a=await ne.getPublic(void 0,b),s=a.products||(Array.isArray(a)?a:[]);x(s)}catch(a){console.error("Search failed:",a)}finally{m(!1)}},300);return()=>clearTimeout(c)},[b]),t?e.jsx(ue,{children:e.jsx($.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-start justify-center pt-24 px-4",onClick:n,children:e.jsxs($.div,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},exit:{y:-20,opacity:0},className:"bg-white w-full max-w-2xl rounded-xl shadow-2xl overflow-hidden",onClick:i=>i.stopPropagation(),children:[e.jsxs("div",{className:"p-4 border-b flex items-center gap-3",children:[e.jsx(re,{className:"w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search games, consoles, accessories...",className:"flex-1 outline-none text-lg text-gray-800 placeholder-gray-400",value:b,onChange:i=>o(i.target.value),autoFocus:!0}),v?e.jsx(hs,{className:"w-5 h-5 text-blue-600 animate-spin"}):e.jsx("button",{onClick:n,className:"p-1 hover:bg-gray-100 rounded-full",children:e.jsx(Z,{className:"w-5 h-5 text-gray-500"})})]}),e.jsx("div",{className:"max-h-[60vh] overflow-y-auto",children:h.length>0?e.jsx("div",{className:"p-2",children:h.map(i=>e.jsxs("button",{onClick:()=>{g("product",i.id),n()},className:"w-full flex items-center gap-4 p-3 hover:bg-gray-50 rounded-lg transition-colors text-left",children:[e.jsx("img",{src:i.image,alt:i.name,className:"w-16 h-16 object-cover rounded-md"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:i.name}),e.jsx("p",{className:"text-sm text-gray-500 line-clamp-1",children:i.description})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"font-bold text-blue-600",children:["$",i.price]}),e.jsx(Ie,{className:"w-4 h-4 text-gray-400"})]})]},i.id))}):b.trim()?e.jsx("div",{className:"p-8 text-center text-gray-500",children:!v&&"No results found"}):e.jsx("div",{className:"p-8 text-center text-gray-400",children:"Start typing to search..."})})]})})}):null}const wa="/assets/games%20up%20word%20black-gfQRNsdU.png",ka="/assets/games%20up%20word%20white-0QJbyY9j.png";function Sa({variant:t="color",className:n="h-10 w-auto object-contain"}){const g=t==="white"?ka:wa;return e.jsx("img",{src:g,alt:"Games Up",className:n})}const qt="/assets/gamesupnew-cCEpXIR9.png";function Ca({children:t,currentPage:n,onNavigate:g,isCartOpen:b,onOpenCart:o,onCloseCart:h}){const[x,v]=d.useState(!1),[m,i]=d.useState(!1),[c,a]=d.useState(!1),[s,l]=d.useState(null),[k,r]=d.useState(0),[y,j]=d.useState(!1);d.useEffect(()=>{const A=localStorage.getItem("customerSession");if(A)try{const T=JSON.parse(A);l(T.user)}catch(T){console.error("Error parsing customer session:",T)}P();const u=()=>{v(window.scrollY>20)};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[]);const P=()=>{const A=JSON.parse(localStorage.getItem("cart")||"[]");r(A.length)},S=()=>{localStorage.removeItem("customerSession"),l(null),a(!1)},w=()=>{o(),P()},p=()=>{g("checkout")};return e.jsxs("div",{className:"min-h-screen bg-white",children:[e.jsxs($.header,{initial:{y:-100},animate:{y:0},className:`fixed top-0 left-0 right-0 z-50 transition-all duration-300 ${x?"bg-white/80 backdrop-blur-xl shadow-lg border-b border-gray-200":"bg-white/60 backdrop-blur-md"}`,children:[e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsx($.div,{whileHover:{scale:1.05},className:"flex items-center gap-2 cursor-pointer",onClick:()=>g("home"),children:e.jsx("img",{src:qt,alt:"Games Up",className:"h-6 w-auto object-contain"})}),e.jsxs("nav",{className:"hidden md:flex items-center gap-8",children:[e.jsxs("button",{onClick:()=>g("home"),className:`flex items-center gap-2 font-medium transition-colors ${n==="home"?"text-red-600":"text-gray-700 hover:text-red-600"}`,children:[e.jsx(wt,{className:"w-4 h-4"}),"Home"]}),e.jsxs("button",{onClick:()=>g("shop"),className:`flex items-center gap-2 font-medium transition-colors ${n==="shop"?"text-red-600":"text-gray-700 hover:text-red-600"}`,children:[e.jsx(kt,{className:"w-4 h-4"}),"Shop"]})]}),e.jsxs("div",{className:"hidden md:flex items-center gap-4",children:[e.jsx($.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"p-2 rounded-lg hover:bg-gray-100 text-gray-700",onClick:()=>j(!0),children:e.jsx(re,{className:"w-5 h-5"})}),e.jsxs($.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"relative p-2 rounded-lg hover:bg-gray-100 text-gray-700",onClick:w,children:[e.jsx(se,{className:"w-5 h-5"}),k>0&&e.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-600 text-white text-xs font-bold rounded-full flex items-center justify-center",children:k})]}),s?e.jsxs("div",{className:"relative",children:[e.jsxs($.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>a(!c),className:"flex items-center gap-2 px-4 py-2 rounded-lg hover:bg-gray-100 text-gray-700",children:[e.jsx(te,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:s.name})]}),e.jsx(ue,{children:c&&e.jsxs($.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute right-0 mt-2 w-48 bg-white/90 backdrop-blur-xl rounded-xl shadow-xl border border-gray-200 overflow-hidden",children:[e.jsxs("button",{onClick:()=>{g("profile"),a(!1)},className:"w-full px-4 py-3 text-left hover:bg-gray-100 flex items-center gap-2 text-gray-700",children:[e.jsx(te,{className:"w-4 h-4"}),"My Profile"]}),e.jsxs("button",{onClick:()=>{g("orders"),a(!1)},className:"w-full px-4 py-3 text-left hover:bg-gray-100 flex items-center gap-2 text-gray-700",children:[e.jsx(K,{className:"w-4 h-4"}),"My Orders"]}),e.jsxs("button",{onClick:()=>{g("favorites"),a(!1)},className:"w-full px-4 py-3 text-left hover:bg-gray-100 flex items-center gap-2 text-gray-700",children:[e.jsx(Ne,{className:"w-4 h-4"}),"Favorites"]}),e.jsxs("button",{onClick:S,className:"w-full px-4 py-3 text-left hover:bg-red-50 flex items-center gap-2 text-red-600 border-t border-gray-200",children:[e.jsx(Be,{className:"w-4 h-4"}),"Logout"]})]})})]}):e.jsxs(e.Fragment,{children:[e.jsxs($.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>g("login"),className:"flex items-center gap-2 px-4 py-2 rounded-lg hover:bg-gray-100 text-gray-700 font-medium",children:[e.jsx(Xe,{className:"w-4 h-4"}),"Login"]}),e.jsxs($.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>g("signup"),className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-gradient-to-r from-red-600 to-red-500 text-white font-medium shadow-lg shadow-red-500/30",children:[e.jsx(tt,{className:"w-4 h-4"}),"Sign Up"]})]})]}),e.jsx($.button,{whileTap:{scale:.95},onClick:()=>i(!m),className:"md:hidden p-2 rounded-lg hover:bg-gray-100",children:m?e.jsx(Z,{className:"w-6 h-6 text-gray-700"}):e.jsx(us,{className:"w-6 h-6 text-gray-700"})})]})}),e.jsx(ue,{children:m&&e.jsx($.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"md:hidden bg-white/95 backdrop-blur-xl border-t border-gray-200",children:e.jsxs("div",{className:"px-4 py-4 space-y-2",children:[e.jsxs("button",{onClick:()=>{g("home"),i(!1)},className:"w-full flex items-center gap-2 px-4 py-3 rounded-lg hover:bg-gray-100 text-gray-700 font-medium",children:[e.jsx(wt,{className:"w-5 h-5"}),"Home"]}),e.jsxs("button",{onClick:()=>{g("shop"),i(!1)},className:"w-full flex items-center gap-2 px-4 py-3 rounded-lg hover:bg-gray-100 text-gray-700 font-medium",children:[e.jsx(kt,{className:"w-5 h-5"}),"Shop"]}),e.jsx("div",{className:"border-t border-gray-200 my-2"}),s?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"px-4 py-2 text-sm text-gray-600",children:["Signed in as ",e.jsx("span",{className:"font-semibold",children:s.name})]}),e.jsxs("button",{className:"w-full flex items-center gap-2 px-4 py-3 rounded-lg hover:bg-gray-100 text-gray-700 font-medium",children:[e.jsx(K,{className:"w-5 h-5"}),"My Orders"]}),e.jsxs("button",{onClick:S,className:"w-full flex items-center gap-2 px-4 py-3 rounded-lg hover:bg-red-50 text-red-600 font-medium",children:[e.jsx(Be,{className:"w-5 h-5"}),"Logout"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>{g("login"),i(!1)},className:"w-full flex items-center gap-2 px-4 py-3 rounded-lg hover:bg-gray-100 text-gray-700 font-medium",children:[e.jsx(Xe,{className:"w-5 h-5"}),"Login"]}),e.jsxs("button",{onClick:()=>{g("signup"),i(!1)},className:"w-full flex items-center gap-2 px-4 py-3 rounded-lg bg-gradient-to-r from-red-600 to-red-500 text-white font-medium shadow-lg",children:[e.jsx(tt,{className:"w-5 h-5"}),"Sign Up"]})]})]})})})]}),e.jsx("main",{className:"pt-16",children:t}),e.jsx("footer",{className:"bg-gray-900 text-white py-12 mt-20",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center gap-2 mb-4",children:e.jsx(Sa,{variant:"white",className:"h-10 w-auto object-contain"})}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Your ultimate destination for gaming products and digital goods."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-4",children:"Quick Links"}),e.jsxs("ul",{className:"space-y-2 text-gray-400 text-sm",children:[e.jsx("li",{children:e.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"About Us"})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Contact"})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"FAQ"})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-4",children:"Shop"}),e.jsxs("ul",{className:"space-y-2 text-gray-400 text-sm",children:[e.jsx("li",{children:e.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"All Products"})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Featured"})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Best Sellers"})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-4",children:"Support"}),e.jsxs("ul",{className:"space-y-2 text-gray-400 text-sm",children:[e.jsx("li",{children:e.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Help Center"})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Terms of Service"})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Privacy Policy"})})]})]})]}),e.jsx("div",{className:"border-t border-gray-800 mt-8 pt-8 text-center text-gray-400 text-sm",children:e.jsx("p",{children:"© 2026 Games - Up. All rights reserved."})})]})}),e.jsx(Na,{isOpen:b,onClose:()=>{h(),P()},onCheckout:p,onNavigate:g}),e.jsx(va,{isOpen:y,onClose:()=>j(!1),onNavigate:g})]})}const Ze={consoles:at,games:vs,accessories:Ns,headsets:Ft,storage:js,monitors:fs,pc:bs,mobile:ps};function At({onNavigate:t,onOpenCart:n}){const[g,b]=d.useState([]),[o,h]=d.useState([]),[x,v]=d.useState(0),[m,i]=d.useState({title:"SPECIAL OFFER",subtitle:"Up to 50% Off on Selected Items"}),[c,a]=d.useState({badge:"🎮 Your Ultimate Gaming Destination",title:"GAMES UP",subtitle:"Discover exclusive gaming products, accessories, and digital content. Level up your gaming experience today.",ctaPrimary:"Shop Now",ctaSecondary:"Learn More"});d.useEffect(()=>{l(),k();const r=()=>{const y=localStorage.getItem("specialOfferConfig");y&&i(JSON.parse(y));const j=localStorage.getItem("heroConfig");j&&a(JSON.parse(j))};return r(),window.addEventListener("storage",r),window.addEventListener("specialOfferUpdated",r),window.addEventListener("heroConfigUpdated",r),()=>{window.removeEventListener("storage",r),window.removeEventListener("specialOfferUpdated",r),window.removeEventListener("heroConfigUpdated",r)}},[]);const s=r=>{const y=JSON.parse(localStorage.getItem("cart")||"[]");y.push({id:r.id||`temp-${Date.now()}`,name:r.name||"Product",price:r.price||0,image:r.image||"",quantity:1}),localStorage.setItem("cart",JSON.stringify(y)),n()},l=async()=>{try{const r=await fetch(`${_}/system/categories`,{headers:{Authorization:`Bearer ${q}`}});if(r.ok){const y=await r.json();h(y.filter(j=>j.isActive).slice(0,6))}}catch(r){console.error("Error loading categories:",r)}},k=async()=>{try{const r=await fetch(`${_}/products`,{headers:{Authorization:`Bearer ${q}`}});if(r.ok){const y=await r.json();b((y.products||[]).slice(0,8))}}catch(r){console.error("Error loading products:",r)}};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsxs("section",{className:"relative bg-gradient-to-br from-red-600 via-red-500 to-orange-500 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-black/10"}),e.jsx("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI2MCIgaGVpZ2h0PSI2MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSAxMCAwIEwgMCAwIDAgMTAiIGZpbGw9Im5vbmUiIHN0cm9rZT0id2hpdGUiIHN0cm9rZS1vcGFjaXR5PSIwLjA1IiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiLz48L3N2Zz4=')] opacity-30"}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20 md:py-32 relative z-10",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 items-center",children:[e.jsxs($.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8},children:[e.jsx("div",{className:"inline-block px-4 py-2 bg-white/20 backdrop-blur-sm text-white rounded-full text-sm font-semibold mb-6 border border-white/30",children:c.badge}),e.jsx("h1",{className:"text-5xl md:text-6xl lg:text-7xl font-black mb-6 text-white leading-tight",children:c.title}),e.jsx("p",{className:"text-xl md:text-2xl text-white/90 mb-8 leading-relaxed font-light",children:c.subtitle}),e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsxs($.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t("shop"),className:"px-8 py-4 bg-white text-red-600 font-bold rounded-lg shadow-2xl flex items-center gap-2 hover:bg-gray-50 transition-all",children:[c.ctaPrimary,e.jsx(Ie,{className:"w-5 h-5"})]}),e.jsx($.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"px-8 py-4 bg-transparent border-2 border-white text-white font-bold rounded-lg hover:bg-white/10 transition-all",children:c.ctaSecondary})]})]}),e.jsx($.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.8,delay:.2},className:"relative",children:e.jsx("div",{className:"relative aspect-[4/3] bg-white/10 backdrop-blur-lg rounded-3xl border-2 border-white/20 overflow-hidden shadow-2xl",children:e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"text-center text-white",children:[e.jsx(at,{className:"w-24 h-24 mx-auto mb-4 opacity-50"}),e.jsx("div",{className:"text-4xl font-bold",children:"1000+"}),e.jsx("div",{className:"text-lg opacity-80",children:"Products Available"})]})})})})]})})]}),e.jsx("section",{className:"py-16 bg-white border-b border-gray-200",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"BROWSE BY CATEGORY"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>v(r=>Math.max(0,r-1)),disabled:x===0,className:"p-2 rounded-full border border-gray-300 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:e.jsx(Dt,{className:"w-5 h-5 text-gray-600"})}),e.jsx("button",{onClick:()=>v(r=>Math.min((o.length||6)-4,r+1)),disabled:x>=(o.length||6)-4,className:"p-2 rounded-full border border-gray-300 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:e.jsx(ys,{className:"w-5 h-5 text-gray-600"})})]}),e.jsxs("button",{onClick:()=>t("shop"),className:"text-red-600 font-semibold hover:text-red-700 flex items-center gap-2",children:["View All",e.jsx(Ie,{className:"w-4 h-4"})]})]})]}),e.jsx("div",{className:"overflow-hidden",children:e.jsx($.div,{className:"flex gap-6",animate:{x:`calc(-${x} * (25% + 0.375rem))`},transition:{type:"spring",stiffness:300,damping:30},children:(o.length>0?o:[{icon:"🎮",name:"Consoles",slug:"consoles"},{icon:"🎯",name:"Games",slug:"games"},{icon:"🎧",name:"Headsets",slug:"headsets"},{icon:"📱",name:"Accessories",slug:"accessories"},{icon:"💾",name:"Storage",slug:"storage"},{icon:"🖥️",name:"Monitors",slug:"monitors"}]).map((r,y)=>{const j=r.slug||r.name.toLowerCase(),P=Ze[j]||Ze[Object.keys(Ze).find(S=>j.includes(S))||""]||K;return e.jsxs($.button,{onClick:()=>t("shop",void 0,j),className:"relative flex-shrink-0 w-[calc(25%-1.125rem)] flex flex-col items-center justify-center p-8 bg-white border border-gray-100 rounded-2xl shadow-sm hover:shadow-xl hover:border-red-100 transition-all duration-300 group overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-red-50 to-orange-50 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),e.jsx("div",{className:"relative z-10 mb-4 transform group-hover:scale-110 transition-transform duration-300",children:e.jsx(P,{className:"w-12 h-12 text-red-600",strokeWidth:1.5})}),e.jsx("span",{className:"relative z-10 text-sm font-bold text-gray-800 uppercase tracking-wider group-hover:text-red-600 transition-colors",children:r.name})]},r.id||y)})})})]})}),e.jsx("section",{className:"py-8 bg-gradient-to-r from-orange-500 to-red-600",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-lg flex items-center justify-center",children:e.jsx(ce,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"text-white",children:[e.jsx("p",{className:"text-sm font-semibold uppercase tracking-wide",children:m.title}),e.jsx("p",{className:"text-2xl font-bold",children:m.subtitle})]})]}),e.jsx("button",{onClick:()=>t("shop"),className:"hidden md:block px-6 py-3 bg-white text-red-600 font-bold rounded-lg hover:bg-gray-50 transition-all",children:"Shop Deals"})]})})}),e.jsx("section",{className:"py-16 bg-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"FEATURED PRODUCTS"}),e.jsxs("button",{onClick:()=>t("shop"),className:"text-red-600 font-semibold hover:text-red-700 flex items-center gap-2",children:["View All",e.jsx(Ie,{className:"w-4 h-4"})]})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:g.length>0?g.map((r,y)=>e.jsxs($.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:y*.1},whileHover:{y:-8},className:"bg-white border-2 border-gray-200 rounded-xl overflow-hidden hover:border-red-500 hover:shadow-xl transition-all cursor-pointer group",onClick:()=>t("shop"),children:[e.jsx("div",{className:"aspect-square bg-gray-100 overflow-hidden",children:r.image?e.jsx("img",{src:r.image,alt:r.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(K,{className:"w-16 h-16 text-gray-300"})})}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-2 line-clamp-2 text-sm",children:r.name}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-xl font-bold text-red-600",children:["$",r.price.toFixed(2)]}),e.jsx("button",{onClick:j=>{j.stopPropagation(),s(r)},className:"px-3 py-1.5 bg-red-600 text-white text-xs font-semibold rounded hover:bg-red-700 transition-colors",children:"Add to Cart"})]})]})]},r.id)):Array(8).fill(0).map((r,y)=>e.jsxs($.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:y*.1},whileHover:{y:-8},className:"bg-white border-2 border-gray-200 rounded-xl overflow-hidden hover:border-red-500 hover:shadow-xl transition-all cursor-pointer",onClick:()=>t("shop"),children:[e.jsx("div",{className:"aspect-square bg-gradient-to-br from-gray-100 to-gray-200",children:e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(K,{className:"w-16 h-16 text-gray-300"})})}),e.jsxs("div",{className:"p-4",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 mb-2 text-sm",children:["Gaming Product ",y+1]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xl font-bold text-red-600",children:"$59.99"}),e.jsx("button",{onClick:j=>{j.stopPropagation(),s({id:`placeholder-${y}`,name:`Gaming Product ${y+1}`,price:59.99,image:""})},className:"px-3 py-1.5 bg-red-600 text-white text-xs font-semibold rounded hover:bg-red-700 transition-colors",children:"Add to Cart"})]})]})]},y))})]})}),e.jsx("section",{className:"py-16 bg-gray-900",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs($.div,{whileHover:{scale:1.02},className:"bg-gradient-to-br from-red-600 to-red-500 rounded-2xl p-8 text-white",children:[e.jsx(at,{className:"w-12 h-12 mb-4"}),e.jsx("h3",{className:"text-2xl font-bold mb-2",children:"New Arrivals"}),e.jsx("p",{className:"text-red-100 mb-4",children:"Check out the latest gaming gear"}),e.jsx("button",{className:"text-white font-semibold underline hover:no-underline",children:"Shop Now →"})]}),e.jsxs($.div,{whileHover:{scale:1.02},className:"bg-gradient-to-br from-orange-600 to-orange-500 rounded-2xl p-8 text-white",children:[e.jsx(ke,{className:"w-12 h-12 mb-4"}),e.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Best Sellers"}),e.jsx("p",{className:"text-orange-100 mb-4",children:"Top-rated products this month"}),e.jsx("button",{className:"text-white font-semibold underline hover:no-underline",children:"View All →"})]}),e.jsxs($.div,{whileHover:{scale:1.02},className:"bg-gradient-to-br from-purple-600 to-purple-500 rounded-2xl p-8 text-white",children:[e.jsx(Ft,{className:"w-12 h-12 mb-4"}),e.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Accessories"}),e.jsx("p",{className:"text-purple-100 mb-4",children:"Enhance your gaming setup"}),e.jsx("button",{className:"text-white font-semibold underline hover:no-underline",children:"Explore →"})]})]})})}),e.jsx("section",{className:"py-16 bg-white border-t border-gray-200",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"flex items-center justify-between mb-8",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"DEALS OF THE WEEK"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Limited time offers - Don't miss out!"})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[1,2,3,4].map((r,y)=>e.jsxs($.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:y*.1},whileHover:{y:-8},className:"bg-white border-2 border-gray-200 rounded-xl overflow-hidden hover:border-red-500 hover:shadow-xl transition-all cursor-pointer relative",onClick:()=>t("shop"),children:[e.jsx("div",{className:"absolute top-4 right-4 z-10 px-3 py-1 bg-red-600 text-white text-xs font-bold rounded-full",children:"-30%"}),e.jsx("div",{className:"aspect-square bg-gradient-to-br from-gray-100 to-gray-200",children:e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(K,{className:"w-16 h-16 text-gray-300"})})}),e.jsxs("div",{className:"p-4",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 mb-2 text-sm",children:["Special Deal Product ",r]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-sm text-gray-400 line-through",children:"$99.99"}),e.jsx("span",{className:"text-xl font-bold text-red-600",children:"$69.99"})]}),e.jsx("button",{className:"w-full py-2 bg-red-600 text-white text-sm font-semibold rounded hover:bg-red-700 transition-colors",children:"Add to Cart"})]})]},r))})]})}),e.jsx("section",{className:"py-16 bg-gradient-to-br from-red-600 to-red-500",children:e.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:e.jsxs($.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-4 text-white",children:"Stay Updated"}),e.jsx("p",{className:"text-xl text-white/90 mb-8",children:"Subscribe to get special offers, exclusive deals, and gaming news"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 max-w-md mx-auto",children:[e.jsx("input",{type:"email",placeholder:"Enter your email",className:"flex-1 px-6 py-4 rounded-lg focus:outline-none focus:ring-4 focus:ring-white/30"}),e.jsx("button",{className:"px-8 py-4 bg-white text-red-600 font-bold rounded-lg hover:bg-gray-50 transition-all whitespace-nowrap",children:"Subscribe"})]})]})})}),e.jsx("section",{className:"py-16 bg-white border-t border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8",children:[{icon:"🚚",title:"Free Shipping",subtitle:"On orders over $50"},{icon:"🔒",title:"Secure Payment",subtitle:"100% protected"},{icon:"💬",title:"24/7 Support",subtitle:"Dedicated support"},{icon:"↩️",title:"Easy Returns",subtitle:"30-day guarantee"}].map((r,y)=>e.jsxs($.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:y*.1},className:"text-center",children:[e.jsx("div",{className:"text-4xl mb-3",children:r.icon}),e.jsx("h3",{className:"font-bold text-gray-900 mb-1",children:r.title}),e.jsx("p",{className:"text-sm text-gray-600",children:r.subtitle})]},y))})})})]})}function Pa({onNavigate:t,onOpenCart:n}){const{formatPrice:g}=le(),[b,o]=ut(),[h,x]=d.useState([]),[v,m]=d.useState([]),i=b.get("category"),[c,a]=d.useState(""),[s,l]=d.useState(!0);d.useEffect(()=>{k(),r()},[i]);const k=async()=>{try{const w=await fetch(`${_}/system/categories`,{headers:{Authorization:`Bearer ${q}`}});if(w.ok){const p=await w.json();m(p.filter(A=>A.isActive))}}catch(w){console.error("Error loading categories:",w)}},r=async()=>{l(!0);try{const w=i?`${_}/public/products?category=${i}`:`${_}/public/products`,p=await fetch(w,{headers:{Authorization:`Bearer ${q}`}});if(p.ok){const A=await p.json();x(A.products||[])}}catch(w){console.error("Error loading products:",w)}finally{l(!1)}},y=h.filter(w=>w.name.toLowerCase().includes(c.toLowerCase())||w.description?.toLowerCase().includes(c.toLowerCase())),j=w=>{const p=JSON.parse(localStorage.getItem("cart")||"[]");p.push({id:w.id,name:w.name,price:w.price,image:w.image,quantity:1}),localStorage.setItem("cart",JSON.stringify(p)),n()},P=w=>{const p=JSON.parse(localStorage.getItem("favorites")||"[]"),A=p.findIndex(u=>u.id===w.id);A>=0?(p.splice(A,1),alert("Removed from favorites!")):(p.push({id:w.id,name:w.name,price:w.price,image:w.image,category:w.categorySlug,rating:w.rating}),alert("Added to favorites!")),localStorage.setItem("favorites",JSON.stringify(p))},S=w=>JSON.parse(localStorage.getItem("favorites")||"[]").some(A=>A.id===w);return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-red-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[e.jsxs($.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-12",children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4 bg-gradient-to-r from-gray-900 to-red-600 bg-clip-text text-transparent",children:"Shop All Products"}),e.jsx("p",{className:"text-xl text-gray-600",children:"Browse our extensive collection of gaming products"})]}),e.jsxs("div",{className:"mb-8 flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(re,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search products...",value:c,onChange:w=>a(w.target.value),className:"w-full pl-12 pr-4 py-4 bg-white/80 backdrop-blur-sm border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent shadow-lg"})]}),e.jsxs($.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"px-6 py-4 bg-white/80 backdrop-blur-sm border border-gray-200 rounded-xl flex items-center gap-2 font-medium hover:bg-white shadow-lg",children:[e.jsx($t,{className:"w-5 h-5"}),"Filters"]})]}),e.jsxs("div",{className:"mb-8 flex flex-wrap gap-3",children:[e.jsx($.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>o({}),className:`px-6 py-3 rounded-xl font-medium transition-all ${i?"bg-white/80 backdrop-blur-sm text-gray-700 hover:bg-white border border-gray-200":"bg-gradient-to-r from-red-600 to-red-500 text-white shadow-lg shadow-red-500/30"}`,children:"All Products"}),v.map(w=>e.jsxs($.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>o({category:w.slug}),className:`px-6 py-3 rounded-xl font-medium transition-all flex items-center gap-2 ${i===w.slug?"bg-gradient-to-r from-red-600 to-red-500 text-white shadow-lg shadow-red-500/30":"bg-white/80 backdrop-blur-sm text-gray-700 hover:bg-white border border-gray-200"}`,children:[e.jsx("span",{children:w.icon}),w.name]},w.id))]}),s?e.jsxs("div",{className:"text-center py-20",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-red-600"}),e.jsx("p",{className:"text-gray-600 mt-4",children:"Loading products..."})]}):y.length===0?e.jsx("div",{className:"text-center py-20",children:e.jsx("p",{className:"text-gray-600 text-xl",children:"No products found."})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:y.map((w,p)=>e.jsxs($.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:p*.05},whileHover:{y:-10},onClick:()=>t("product",w.id),className:"bg-white/90 backdrop-blur-sm rounded-2xl overflow-hidden shadow-lg hover:shadow-2xl transition-all border border-gray-100 cursor-pointer group",children:[e.jsxs("div",{className:"aspect-square bg-gradient-to-br from-gray-100 to-gray-200 relative overflow-hidden",children:[w.image?e.jsx("img",{src:w.image,alt:w.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:"No Image"}),w.stock<=0&&e.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-lg",children:"Out of Stock"})})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-bold text-lg mb-2 text-gray-900 line-clamp-1",children:w.name}),e.jsx("p",{className:"text-gray-600 text-sm mb-3 line-clamp-2",children:w.description}),w.rating&&e.jsxs("div",{className:"flex items-center gap-1 mb-3",children:[[...Array(5)].map((A,u)=>e.jsx(ke,{className:`w-4 h-4 ${u<w.rating?"text-yellow-400 fill-yellow-400":"text-gray-300"}`},u)),e.jsxs("span",{className:"text-sm text-gray-600 ml-1",children:["(",w.rating,")"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-2xl font-bold text-red-600",children:g(w.price)}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx($.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:A=>{A.stopPropagation(),P(w)},className:"p-3 rounded-xl border-2 border-gray-300 hover:border-red-500 transition-colors",children:e.jsx(Ne,{className:`w-5 h-5 ${S(w.id)?"fill-red-500 text-red-500":"text-gray-400"}`})}),e.jsx($.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:A=>{A.stopPropagation(),j(w)},disabled:w.stock<=0,className:`p-3 rounded-xl flex items-center gap-2 font-medium ${w.stock>0?"bg-gradient-to-r from-red-600 to-red-500 text-white shadow-lg shadow-red-500/30 hover:shadow-xl":"bg-gray-200 text-gray-500 cursor-not-allowed"}`,children:e.jsx(se,{className:"w-5 h-5"})})]})]})]})]},w.id))})]})})}function Aa({onOpenCart:t,productId:n}){const g=ht(),{formatPrice:b}=le(),[o,h]=d.useState(null),[x,v]=d.useState(!0),[m,i]=d.useState(0),[c,a]=d.useState(1),[s,l]=d.useState(!1);d.useEffect(()=>{n?k(n):v(!1)},[n]),d.useEffect(()=>{if(o){const j=JSON.parse(localStorage.getItem("favorites")||"[]");l(j.some(P=>P.id===o.id))}},[o]);const k=async j=>{v(!0);try{console.log("Loading product:",j);const P=await fetch(`${_}/products?id=${j}`,{headers:{Authorization:`Bearer ${q}`}});if(P.ok){const S=await P.json();console.log("Product data:",S);const w=S.products?S.products.find(p=>p.id==j):null;w?h({...w,rating:w.rating||4.5,reviews:128,specs:{Platform:"PlayStation 5",Genre:"Action / Adventure",Publisher:"Sony Interactive Entertainment","Release Date":"Nov 09, 2022"}}):console.log("Product not found in list")}else console.error("Failed to fetch product:",P.status)}catch(P){console.error("Error loading product:",P)}finally{v(!1)}},r=()=>{if(!o)return;const j=JSON.parse(localStorage.getItem("cart")||"[]"),P=j.findIndex(S=>S.id===o.id);P>=0?j[P].quantity+=c:j.push({id:o.id,name:o.name,price:o.price,image:o.image,quantity:c}),localStorage.setItem("cart",JSON.stringify(j)),t()},y=()=>{if(!o)return;const j=JSON.parse(localStorage.getItem("favorites")||"[]"),P=j.findIndex(S=>S.id===o.id);P>=0?(j.splice(P,1),l(!1)):(j.push({id:o.id,name:o.name,price:o.price,image:o.image,category:o.categorySlug,rating:o.rating}),l(!0)),localStorage.setItem("favorites",JSON.stringify(j))};return x?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-red-600"})}):o?e.jsx("div",{className:"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("button",{onClick:()=>g("/shop"),className:"flex items-center gap-2 text-gray-600 hover:text-red-600 transition-colors mb-8 group",children:[e.jsx("div",{className:"p-2 bg-white rounded-full shadow-sm group-hover:shadow-md transition-all",children:e.jsx(_t,{className:"w-5 h-5"})}),e.jsx("span",{className:"font-medium",children:"Back to Shop"})]}),e.jsx("div",{className:"bg-white rounded-3xl shadow-xl overflow-hidden border border-gray-100",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-0",children:[e.jsxs("div",{className:"p-8 lg:p-12 bg-gray-50 flex flex-col items-center justify-center relative overflow-hidden",children:[e.jsx($.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5},className:"relative z-10 w-full max-w-lg aspect-square",children:e.jsx("img",{src:o.image,alt:o.name,className:"w-full h-full object-cover drop-shadow-2xl hover:scale-105 transition-transform duration-500"})}),e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-red-100 rounded-full blur-3xl opacity-50 -translate-y-1/2 translate-x-1/2"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-blue-100 rounded-full blur-3xl opacity-50 translate-y-1/2 -translate-x-1/2"})]}),e.jsxs("div",{className:"p-8 lg:p-12 flex flex-col",children:[e.jsxs("div",{className:"mb-auto",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx($.span,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"inline-block px-3 py-1 bg-red-100 text-red-600 text-xs font-bold rounded-full uppercase tracking-wider mb-3",children:o.categorySlug||"Gaming"}),e.jsx($.h1,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1},className:"text-3xl md:text-4xl font-bold text-gray-900 mb-2 leading-tight",children:o.name})]}),e.jsx("button",{className:"p-3 rounded-full bg-gray-50 hover:bg-red-50 text-gray-400 hover:text-red-500 transition-colors",children:e.jsx(ws,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-1 text-yellow-400",children:[e.jsx(ke,{className:"w-5 h-5 fill-current"}),e.jsx("span",{className:"font-bold text-gray-900 ml-1",children:o.rating})]}),e.jsx("span",{className:"text-gray-400",children:"|"}),e.jsxs("span",{className:"text-gray-600",children:[o.reviews," Reviews"]}),e.jsx("span",{className:"text-gray-400",children:"|"}),e.jsx("span",{className:`font-medium ${o.stock>0?"text-green-600":"text-red-600"}`,children:o.stock>0?"In Stock":"Out of Stock"})]}),e.jsx($.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},className:"text-gray-600 text-lg leading-relaxed mb-8",children:o.description}),e.jsx("div",{className:"grid grid-cols-2 gap-4 mb-8",children:o.specs&&Object.entries(o.specs).map(([j,P],S)=>e.jsxs($.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.3+S*.1},className:"bg-gray-50 p-3 rounded-lg border border-gray-100",children:[e.jsx("span",{className:"block text-xs text-gray-500 uppercase font-semibold mb-1",children:j}),e.jsx("span",{className:"block text-gray-900 font-medium",children:P})]},j))})]}),e.jsxs("div",{className:"pt-8 border-t border-gray-100 mt-8",children:[e.jsxs("div",{className:"flex items-end justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 text-sm font-medium mb-1 block",children:"Total Price"}),e.jsx("span",{className:"text-4xl font-bold text-gray-900",children:b(o.price*c)})]}),e.jsxs("div",{className:"flex items-center bg-gray-100 rounded-xl p-1",children:[e.jsx("button",{onClick:()=>a(Math.max(1,c-1)),className:"w-10 h-10 flex items-center justify-center text-gray-600 hover:bg-white hover:shadow-sm rounded-lg transition-all font-bold text-lg",children:"-"}),e.jsx("span",{className:"w-12 text-center font-bold text-gray-900",children:c}),e.jsx("button",{onClick:()=>a(c+1),className:"w-10 h-10 flex items-center justify-center text-gray-600 hover:bg-white hover:shadow-sm rounded-lg transition-all font-bold text-lg",children:"+"})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs($.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:r,disabled:o.stock<=0,className:`flex-1 py-4 rounded-xl font-bold text-lg flex items-center justify-center gap-2 shadow-xl shadow-red-500/20 ${o.stock>0?"bg-gradient-to-r from-red-600 to-red-500 text-white hover:from-red-700 hover:to-red-600":"bg-gray-200 text-gray-500 cursor-not-allowed"}`,children:[e.jsx(se,{className:"w-6 h-6"}),"Add to Cart"]}),e.jsx($.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:y,className:`p-4 rounded-xl border-2 transition-all ${s?"border-red-500 bg-red-50 text-red-500":"border-gray-200 hover:border-red-500 hover:bg-red-50 text-gray-400 hover:text-red-500"}`,children:e.jsx(Ne,{className:`w-6 h-6 ${s?"fill-current":""}`})})]}),e.jsxs("div",{className:"flex items-center justify-center gap-6 mt-6 text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xe,{className:"w-4 h-4"}),e.jsx("span",{children:"Free Shipping"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Je,{className:"w-4 h-4"}),e.jsx("span",{children:"2 Year Warranty"})]})]})]})]})]})})]})}):e.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-50",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Product not found"}),e.jsx("button",{onClick:()=>g("/shop"),className:"px-6 py-3 bg-red-600 text-white rounded-xl hover:bg-red-700 transition-colors",children:"Back to Shop"})]})}function Ia({mode:t,onSuccess:n,onSwitchMode:g}){const[b,o]=d.useState(""),[h,x]=d.useState(""),[v,m]=d.useState(""),[i,c]=d.useState(""),[a,s]=d.useState(!1),[l,k]=d.useState(!1),[r,y]=d.useState(""),j=async P=>{P.preventDefault(),y(""),k(!0);try{const S=t==="login"?"customer/login":"customer/signup",w=t==="login"?{email:b,password:h}:{email:b,password:h,name:v,phone:i},p=await fetch(`${_}/${S}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${q}`},body:JSON.stringify(w)}),A=await p.json();if(!p.ok)throw new Error(A.error||"Authentication failed");localStorage.setItem("customerSession",JSON.stringify(A.session)),n()}catch(S){y(S.message||"An error occurred")}finally{k(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-50 via-white to-red-50 flex items-center justify-center px-4 py-12",children:e.jsxs($.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"w-full max-w-md",children:[e.jsxs($.button,{whileHover:{x:-5},onClick:()=>n(),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-8 font-medium",children:[e.jsx(_t,{className:"w-5 h-5"}),"Back to Home"]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-xl rounded-3xl shadow-2xl p-8 border border-gray-100",children:[e.jsx("div",{className:"flex items-center justify-center gap-2 mb-8",children:e.jsx("img",{src:qt,alt:"Games Up",className:"h-12 w-auto object-contain"})}),e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2 bg-gradient-to-r from-gray-900 to-red-600 bg-clip-text text-transparent",children:t==="login"?"Welcome Back!":"Create Account"}),e.jsx("p",{className:"text-gray-600",children:t==="login"?"Sign in to continue shopping":"Join us and start shopping"})]}),r&&e.jsx($.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-xl mb-6",children:r}),e.jsxs("form",{onSubmit:j,className:"space-y-4",children:[t==="signup"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),e.jsxs("div",{className:"relative",children:[e.jsx(te,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",value:v,onChange:P=>m(P.target.value),required:!0,className:"w-full pl-12 pr-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"Enter your name"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),e.jsxs("div",{className:"relative",children:[e.jsx(Le,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"tel",value:i,onChange:P=>c(P.target.value),className:"w-full pl-12 pr-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"Enter your phone (optional)"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(ye,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"email",value:b,onChange:P=>o(P.target.value),required:!0,className:"w-full pl-12 pr-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"Enter your email"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(ks,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:a?"text":"password",value:h,onChange:P=>x(P.target.value),required:!0,className:"w-full pl-12 pr-12 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"Enter your password"}),e.jsx("button",{type:"button",onClick:()=>s(!a),className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:a?e.jsx(gt,{className:"w-5 h-5"}):e.jsx(we,{className:"w-5 h-5"})})]})]}),t==="login"&&e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("label",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx("input",{type:"checkbox",className:"rounded"}),"Remember me"]}),e.jsx("a",{href:"#",className:"text-red-600 hover:text-red-700 font-medium",children:"Forgot password?"})]}),e.jsx($.button,{whileHover:{scale:1.02},whileTap:{scale:.98},type:"submit",disabled:l,className:"w-full py-4 bg-gradient-to-r from-red-600 to-red-500 text-white font-semibold rounded-xl shadow-xl shadow-red-500/30 hover:shadow-2xl transition-shadow disabled:opacity-50 disabled:cursor-not-allowed",children:l?"Please wait...":t==="login"?"Sign In":"Create Account"})]}),e.jsxs("div",{className:"mt-6 text-center text-sm text-gray-600",children:[t==="login"?"Don't have an account? ":"Already have an account? ",e.jsx("button",{onClick:()=>g(t==="login"?"signup":"login"),className:"text-red-600 hover:text-red-700 font-semibold",children:t==="login"?"Sign up":"Sign in"})]})]}),e.jsx("p",{className:"text-center text-sm text-gray-500 mt-6",children:"By continuing, you agree to our Terms of Service and Privacy Policy"})]})})}function Da({onBack:t,onSuccess:n}){const{formatPrice:g}=le(),[b]=ut(),o=d.useRef(null),[h,x]=d.useState("info"),[v,m]=d.useState(!1),[i,c]=d.useState([]),[a,s]=d.useState([]),[l,k]=d.useState([]),[r,y]=d.useState(""),[j,P]=d.useState(!1),[S,w]=d.useState("card"),[p,A]=d.useState(null),[u,T]=d.useState({fullName:"",email:"",phone:"",address:"",city:"",state:"",zipCode:"",cardNumber:"",cardName:"",expiryDate:"",cvv:""});d.useEffect(()=>{const D=b.get("payment_ref")||b.get("tran_ref"),F=b.get("cart_id")||b.get("orderNumber");D&&F?W(D,F):(C(),H())},[b]);const W=async(D,F)=>{P(!0),x("payment");try{const I=await(await fetch(`${_}/payment/verify`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${q}`},body:JSON.stringify({tranRef:D,orderNumber:F})})).json();if(I.success){const N=JSON.parse(localStorage.getItem("cart")||"[]");s(N),c(N),localStorage.setItem("cart",JSON.stringify([])),x("success")}else alert("Payment verification failed: "+I.message),x("payment")}catch(f){console.error("Payment verification error:",f),alert("Payment verification failed. Please contact support.")}finally{P(!1)}},C=()=>{const D=JSON.parse(localStorage.getItem("cart")||"[]");c(D)},H=async()=>{try{const D=await fetch(`${_}/delivery-options`,{headers:{Authorization:`Bearer ${q}`}});if(D.ok){const F=await D.json();k(F.deliveryOptions||[]),F.deliveryOptions?.length>0&&y(F.deliveryOptions[0].id)}}catch(D){console.error("Error loading delivery options:",D)}},U=D=>{T({...u,[D.target.name]:D.target.value})},de=D=>{D.target.files&&D.target.files[0]&&A(D.target.files[0])},ie=async()=>{m(!0),await new Promise(F=>setTimeout(F,100));const D=o.current;if(!D){m(!1);return}try{const F=await pt(D,{scale:2,logging:!1,useCORS:!0,windowWidth:794}),f=F.toDataURL("image/png"),I=new bt("p","mm","a4"),N=I.internal.pageSize.getWidth(),L=F.height*N/F.width;I.addImage(f,"PNG",0,0,N,L),I.save(`receipt-${u.fullName.replace(/\s+/g,"-")}-${new Date().toISOString().split("T")[0]}.pdf`)}catch(F){console.error("Error generating PDF:",F),alert("Failed to generate PDF receipt.")}finally{m(!1)}},oe=async D=>{if(D.preventDefault(),h==="info")x("delivery");else if(h==="delivery")x("payment");else if(h==="payment"){if(["instapay","vodafone_cash","telda"].includes(S)&&!p){alert("Please upload a screenshot of your payment.");return}P(!0);try{let F=null;if(["instapay","vodafone_cash","telda"].includes(S)&&p){const G=new FormData;G.append("image",p);const Q=await fetch(`${_}/upload`,{method:"POST",body:G});if(Q.ok)F=(await Q.json()).url;else throw new Error("Failed to upload payment proof")}const f=localStorage.getItem("customerSession");let I="guest@gamesup.com",N=u.fullName;if(f){const G=JSON.parse(f);I=G.user.email,N=G.user.name}const L=l.find(G=>G.id===r),M={customerEmail:I,customerName:N,items:i,total:ee,deliveryMethod:L?.name||"Standard Shipping",shippingAddress:{fullName:u.fullName,email:u.email,phone:u.phone,address:u.address,city:u.city,state:u.state,zipCode:u.zipCode},paymentMethod:S,paymentProof:F},J=await fetch(`${_}/customer-orders`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${q}`},body:JSON.stringify(M)});if(J.ok){const Q=(await J.json()).orderNumber;if(S==="card"){const ge=await(await fetch(`${_}/payment/create`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${q}`},body:JSON.stringify({orderNumber:Q,customerName:N,customerEmail:I,total:ee,shippingAddress:M.shippingAddress,items:i})})).json();ge.success&&ge.redirect_url?window.location.href=ge.redirect_url:(alert("Failed to initiate payment. Please try again."),P(!1))}else{const X=JSON.parse(localStorage.getItem("cart")||"[]");s(X),c(X),localStorage.setItem("cart",JSON.stringify([])),x("success"),P(!1)}}else alert("Failed to create order. Please try again."),P(!1)}catch(F){console.error("Error creating order:",F),alert("Failed to create order. Please try again.")}finally{S==="card"||S!=="card"&&P(!1)}}},O=i.reduce((D,F)=>D+F.price*F.quantity,0),B=O*.1,Y=r&&l.find(D=>D.id===r)?.price||0,ee=O+B+Y;return h==="success"?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-white py-12 px-4",children:e.jsx($.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"max-w-3xl mx-auto",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 text-center",children:[e.jsx($.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring"},className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(Ee,{className:"w-12 h-12 text-green-600"})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Order Successful!"}),e.jsx("p",{className:"text-gray-600 mb-8",children:"Your order has been placed successfully. You'll receive a confirmation email shortly."}),a.length>0&&e.jsxs("div",{className:"bg-gray-50 rounded-xl p-6 mb-6 text-left",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Your Digital Items"}),e.jsx("div",{className:"space-y-4",children:a.map((D,F)=>e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[e.jsx("img",{src:D.image,alt:D.name,className:"w-16 h-16 object-cover rounded-md"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-gray-900",children:D.name}),D.attributes&&Object.keys(D.attributes).length>0&&e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:Object.entries(D.attributes).map(([f,I])=>e.jsxs("span",{className:"mr-2",children:[f,": ",String(I)]},f))}),e.jsx("p",{className:"text-sm text-gray-500",children:"Digital Product"})]})]}),D.digitalItem?e.jsxs("div",{className:"mt-3 p-3 bg-blue-50 rounded-md border border-blue-100",children:[D.digitalItem.code&&e.jsxs("div",{className:"mb-2",children:[e.jsx("span",{className:"text-xs font-semibold text-blue-600 uppercase tracking-wider block mb-1",children:"Code"}),e.jsx("div",{className:"font-mono text-lg font-bold text-gray-800 bg-white px-3 py-1 rounded border border-blue-200 inline-block select-all",children:D.digitalItem.code})]}),D.digitalItem.email&&e.jsxs("div",{className:"mb-2",children:[e.jsx("span",{className:"text-xs font-semibold text-blue-600 uppercase tracking-wider block mb-1",children:"Email"}),e.jsx("div",{className:"font-mono text-gray-800 bg-white px-3 py-1 rounded border border-blue-200 inline-block select-all",children:D.digitalItem.email})]}),D.digitalItem.password&&e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-semibold text-blue-600 uppercase tracking-wider block mb-1",children:"Password"}),e.jsx("div",{className:"font-mono text-gray-800 bg-white px-3 py-1 rounded border border-blue-200 inline-block select-all",children:D.digitalItem.password})]})]}):e.jsx("div",{className:"mt-3 text-amber-600 text-sm italic",children:"Product details will be sent to your email."})]},F))})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-6 mb-6",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Order Total"}),e.jsx("p",{className:"text-3xl font-bold text-red-600",children:g(ee)})]}),e.jsxs("div",{className:"flex gap-4 justify-center",children:[e.jsxs("button",{onClick:ie,className:"px-8 py-4 bg-gray-100 text-gray-900 rounded-xl font-semibold hover:bg-gray-200 transition-all flex items-center gap-2",children:[e.jsx(he,{className:"w-5 h-5"}),"Download Receipt"]}),e.jsx("button",{onClick:n,className:"px-8 py-4 bg-gradient-to-r from-red-600 to-red-500 text-white rounded-xl font-semibold shadow-lg shadow-red-500/30 hover:shadow-xl transition-all",children:"Continue Shopping"})]})]})})}):e.jsxs("div",{className:"min-h-screen bg-gray-50 py-12 px-4",children:[e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("button",{onClick:t,className:"text-gray-600 hover:text-gray-900 font-medium mb-4",children:"← Back to Cart"}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Checkout"})]}),e.jsx("div",{className:"flex items-center justify-center mb-8 gap-4",children:["info","delivery","payment"].map((D,F)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-semibold ${h===D?"bg-red-600 text-white":["info","delivery"].includes(D)&&["delivery","payment"].includes(h)?"bg-green-500 text-white":"bg-gray-200 text-gray-600"}`,children:F+1}),F<2&&e.jsx("div",{className:`w-16 h-1 ${["delivery","payment"].includes(h)&&F===0||h==="payment"&&F===1?"bg-green-500":"bg-gray-200"}`})]},D))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("form",{onSubmit:oe,className:"bg-white rounded-2xl shadow-lg p-8",children:[h==="info"&&e.jsxs($.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-red-100 flex items-center justify-center",children:e.jsx(te,{className:"w-5 h-5 text-red-600"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Contact Information"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),e.jsx("input",{type:"text",name:"fullName",value:u.fullName,onChange:U,className:"w-full px-4 py-3 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:"John Doe",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),e.jsx("input",{type:"email",name:"email",value:u.email,onChange:U,className:"w-full px-4 py-3 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:"john@example.com",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),e.jsx("input",{type:"tel",name:"phone",value:u.phone,onChange:U,className:"w-full px-4 py-3 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:"+1 (555) 000-0000",required:!0})]}),e.jsxs("div",{className:"flex items-center gap-3 mt-8 mb-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-red-100 flex items-center justify-center",children:e.jsx(Se,{className:"w-5 h-5 text-red-600"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Shipping Address"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Street Address"}),e.jsx("input",{type:"text",name:"address",value:u.address,onChange:U,className:"w-full px-4 py-3 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:"123 Main St, Apt 4B",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"City"}),e.jsx("input",{type:"text",name:"city",value:u.city,onChange:U,className:"w-full px-4 py-3 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:"New York",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"State"}),e.jsx("input",{type:"text",name:"state",value:u.state,onChange:U,className:"w-full px-4 py-3 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:"NY",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ZIP Code"}),e.jsx("input",{type:"text",name:"zipCode",value:u.zipCode,onChange:U,className:"w-full px-4 py-3 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:"10001",required:!0})]})]})]}),h==="delivery"&&e.jsxs($.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-red-100 flex items-center justify-center",children:e.jsx(xe,{className:"w-5 h-5 text-red-600"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Delivery Method"})]}),e.jsx("div",{className:"space-y-4",children:l.length===0?e.jsx("p",{className:"text-gray-600",children:"Loading delivery options..."}):l.map(D=>e.jsxs("label",{className:`flex items-center justify-between p-4 border-2 rounded-xl cursor-pointer transition-all ${r===D.id?"border-red-500 bg-red-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("input",{type:"radio",name:"delivery",value:D.id,checked:r===D.id,onChange:F=>y(F.target.value),className:"w-5 h-5 text-red-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900",children:D.name}),e.jsx("p",{className:"text-sm text-gray-600",children:D.description}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:D.estimatedDays})]})]}),e.jsx("p",{className:"font-bold text-red-600",children:D.price===0?"FREE":`$${D.price.toFixed(2)}`})]},D.id))})]}),h==="payment"&&e.jsxs($.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-red-100 flex items-center justify-center",children:e.jsx(Ue,{className:"w-5 h-5 text-red-600"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Payment Method"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("label",{className:`flex items-center p-4 border-2 rounded-xl cursor-pointer transition-all ${S==="card"?"border-red-500 bg-red-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx("input",{type:"radio",name:"paymentMethod",value:"card",checked:S==="card",onChange:D=>w(D.target.value),className:"w-5 h-5 text-red-600 mr-4"}),e.jsx(Ue,{className:"w-6 h-6 text-gray-700 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900",children:"Credit Card (PayTabs)"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Secure payment via PayTabs gateway"})]})]}),e.jsxs("label",{className:`flex items-center p-4 border-2 rounded-xl cursor-pointer transition-all ${S==="cod"?"border-red-500 bg-red-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx("input",{type:"radio",name:"paymentMethod",value:"cod",checked:S==="cod",onChange:D=>w(D.target.value),className:"w-5 h-5 text-red-600 mr-4"}),e.jsx(xe,{className:"w-6 h-6 text-gray-700 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900",children:"Cash on Delivery"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Pay when you receive your order"})]})]}),e.jsxs("label",{className:`flex items-center p-4 border-2 rounded-xl cursor-pointer transition-all ${S==="instapay"?"border-red-500 bg-red-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx("input",{type:"radio",name:"paymentMethod",value:"instapay",checked:S==="instapay",onChange:D=>w(D.target.value),className:"w-5 h-5 text-red-600 mr-4"}),e.jsx("div",{className:"w-6 h-6 mr-3 flex items-center justify-center text-lg",children:"🏦"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900",children:"Instapay Transfer"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Transfer and upload screenshot"})]})]}),e.jsxs("label",{className:`flex items-center p-4 border-2 rounded-xl cursor-pointer transition-all ${S==="vodafone_cash"?"border-red-500 bg-red-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx("input",{type:"radio",name:"paymentMethod",value:"vodafone_cash",checked:S==="vodafone_cash",onChange:D=>w(D.target.value),className:"w-5 h-5 text-red-600 mr-4"}),e.jsx("div",{className:"w-6 h-6 mr-3 flex items-center justify-center text-lg",children:"📱"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900",children:"Vodafone Cash"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Transfer and upload screenshot"})]})]}),e.jsxs("label",{className:`flex items-center p-4 border-2 rounded-xl cursor-pointer transition-all ${S==="telda"?"border-red-500 bg-red-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx("input",{type:"radio",name:"paymentMethod",value:"telda",checked:S==="telda",onChange:D=>w(D.target.value),className:"w-5 h-5 text-red-600 mr-4"}),e.jsx("div",{className:"w-6 h-6 mr-3 flex items-center justify-center text-lg",children:"💳"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900",children:"Telda"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Transfer and upload screenshot"})]})]})]}),e.jsxs("div",{className:"mt-6 p-6 bg-gray-50 rounded-xl border border-gray-200",children:[S==="card"&&e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-gray-700 mb-2",children:"You will be redirected to PayTabs to complete your purchase securely."})}),S==="cod"&&e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-gray-700",children:"Please have the exact amount ready upon delivery."})}),S==="instapay"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[e.jsx("p",{className:"font-bold text-gray-900 mb-2",children:"Instapay Details:"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Instapay ID: ",e.jsx("span",{className:"font-mono font-bold text-gray-900",children:"username@instapay"})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Phone: ",e.jsx("span",{className:"font-mono font-bold text-gray-900",children:"01234567890"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Upload Payment Screenshot"}),e.jsx("input",{type:"file",accept:"image/*",onChange:de,className:"w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-red-50 file:text-red-700 hover:file:bg-red-100"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Please upload a clear screenshot of the transaction receipt."})]})]}),S==="vodafone_cash"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[e.jsx("p",{className:"font-bold text-gray-900 mb-2",children:"Vodafone Cash Details:"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Phone: ",e.jsx("span",{className:"font-mono font-bold text-gray-900",children:"010xxxxxxxx"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Upload Payment Screenshot"}),e.jsx("input",{type:"file",accept:"image/*",onChange:de,className:"w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-red-50 file:text-red-700 hover:file:bg-red-100"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Please upload a clear screenshot of the transaction receipt."})]})]}),S==="telda"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[e.jsx("p",{className:"font-bold text-gray-900 mb-2",children:"Telda Details:"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Telda ID: ",e.jsx("span",{className:"font-mono font-bold text-gray-900",children:"username@telda"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Upload Payment Screenshot"}),e.jsx("input",{type:"file",accept:"image/*",onChange:de,className:"w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-red-50 file:text-red-700 hover:file:bg-red-100"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Please upload a clear screenshot of the transaction receipt."})]})]})]})]}),e.jsxs("div",{className:"flex gap-4 mt-8",children:[h!=="info"&&e.jsx("button",{type:"button",onClick:()=>{h==="delivery"&&x("info"),h==="payment"&&x("delivery")},className:"flex-1 py-3 px-6 border-2 border-gray-300 text-gray-700 rounded-lg font-semibold hover:bg-gray-50 transition-colors",children:"Back"}),e.jsx("button",{type:"submit",disabled:j,className:"flex-1 py-3 px-6 bg-gradient-to-r from-red-600 to-red-500 text-white rounded-lg font-semibold shadow-lg shadow-red-500/30 hover:shadow-xl transition-all disabled:opacity-50",children:j?"Processing...":h==="payment"?"Place Order":"Continue"})]})]})}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 sticky top-24",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Order Summary"}),e.jsx("div",{className:"space-y-3 mb-4 max-h-64 overflow-y-auto",children:i.map(D=>e.jsxs("div",{className:"flex gap-3",children:[e.jsx("img",{src:D.image,alt:D.name,className:"w-16 h-16 rounded-lg object-cover"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-sm text-gray-900 line-clamp-1",children:D.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Qty: ",D.quantity]}),e.jsxs("p",{className:"text-sm font-bold text-red-600",children:["$",(D.price*D.quantity).toFixed(2)]})]})]},D.id))}),e.jsxs("div",{className:"border-t border-gray-200 pt-4 space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-gray-600",children:[e.jsx("span",{children:"Subtotal"}),e.jsxs("span",{className:"font-semibold",children:["$",O.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-gray-600",children:[e.jsx("span",{children:"Delivery"}),e.jsx("span",{className:"font-semibold",children:Y===0?"FREE":`$${Y.toFixed(2)}`})]}),e.jsxs("div",{className:"flex justify-between text-gray-600",children:[e.jsx("span",{children:"Tax"}),e.jsxs("span",{className:"font-semibold",children:["$",B.toFixed(2)]})]}),e.jsxs("div",{className:"border-t border-gray-300 pt-2 flex justify-between text-lg font-bold text-gray-900",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{className:"text-red-600",children:["$",ee.toFixed(2)]})]})]})]})})]})]}),e.jsxs("div",{ref:o,className:`${v?"fixed left-[-9999px] top-0 z-[-1]":"hidden"} w-[210mm] min-h-[297mm] bg-white p-8`,children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-2xl font-bold mb-2",children:"GamesUp Store"}),e.jsx("p",{className:"text-gray-600",children:"Order Receipt"}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:new Date().toLocaleString()})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:"font-semibold",children:"Customer:"}),e.jsx("span",{children:u.fullName})]}),e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:"font-semibold",children:"Email:"}),e.jsx("span",{children:u.email})]})]}),e.jsxs("table",{className:"w-full mb-8",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b-2 border-gray-200",children:[e.jsx("th",{className:"text-left py-2",children:"Item"}),e.jsx("th",{className:"text-right py-2",children:"Qty"}),e.jsx("th",{className:"text-right py-2",children:"Price"})]})}),e.jsx("tbody",{children:a.map((D,F)=>e.jsxs("tr",{className:"border-b border-gray-100",children:[e.jsxs("td",{className:"py-2",children:[e.jsx("div",{children:D.name}),D.attributes&&Object.keys(D.attributes).length>0&&e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:Object.entries(D.attributes).map(([f,I])=>e.jsxs("span",{className:"mr-2",children:[f,": ",String(I)]},f))})]}),e.jsx("td",{className:"text-right py-2",children:"1"}),e.jsx("td",{className:"text-right py-2",children:g(D.price||D.amount||0)})]},F))})]}),e.jsx("div",{className:"border-t border-gray-200 pt-4 space-y-2",children:e.jsxs("div",{className:"flex justify-between text-lg font-bold",children:[e.jsx("span",{children:"Total:"}),e.jsx("span",{children:g(ee)})]})}),e.jsxs("div",{className:"mt-12 text-center text-sm text-gray-500",children:[e.jsx("p",{children:"Thank you for your purchase!"}),e.jsx("p",{children:"www.gamesup.com"})]})]})]})}function Oa({onBack:t}){const[n,g]=d.useState(!1),[b,o]=d.useState(!1),[h,x]=d.useState(null),[v,m]=d.useState({name:"",email:"",phone:"",address:"",city:"",state:"",zipCode:""});d.useEffect(()=>{i()},[]);const i=()=>{const s=localStorage.getItem("customerSession");if(s)try{const l=JSON.parse(s);x(l.user),m({name:l.user.name||"",email:l.user.email||"",phone:l.user.phone||"",address:l.user.address||"",city:l.user.city||"",state:l.user.state||"",zipCode:l.user.zipCode||""})}catch(l){console.error("Error loading user profile:",l)}},c=s=>{m({...v,[s.target.name]:s.target.value})},a=async()=>{o(!0);try{const s=localStorage.getItem("customerSession");if(s){const l=JSON.parse(s);l.user={...l.user,...v},localStorage.setItem("customerSession",JSON.stringify(l)),x(l.user)}g(!1)}catch(s){console.error("Error saving profile:",s)}finally{o(!1)}};return e.jsx("div",{className:"min-h-screen bg-gray-50 py-12 px-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("button",{onClick:t,className:"text-gray-600 hover:text-gray-900 font-medium mb-4",children:"← Back to Home"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"My Profile"}),!n&&e.jsxs("button",{onClick:()=>g(!0),className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-red-600 to-red-500 text-white rounded-lg font-medium shadow-lg shadow-red-500/30 hover:shadow-xl transition-all",children:[e.jsx(je,{className:"w-4 h-4"}),"Edit Profile"]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-red-600 to-red-500 p-8 text-white",children:e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("div",{className:"w-24 h-24 rounded-full bg-white/20 backdrop-blur-sm flex items-center justify-center border-4 border-white/30",children:e.jsx(te,{className:"w-12 h-12"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-1",children:h?.name||"Guest User"}),e.jsx("p",{className:"text-red-100",children:h?.email||"No email provided"})]})]})}),e.jsx("div",{className:"p-8",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(te,{className:"w-5 h-5 text-red-600"}),"Personal Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),e.jsx("input",{type:"text",name:"name",value:v.name,onChange:c,disabled:!n,className:"w-full px-4 py-3 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 disabled:bg-gray-100 disabled:cursor-not-allowed",placeholder:"John Doe"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(ye,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"email",name:"email",value:v.email,onChange:c,disabled:!0,className:"w-full pl-10 pr-4 py-3 bg-gray-100 border border-gray-300 rounded-lg cursor-not-allowed",placeholder:"john@example.com"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Email cannot be changed"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),e.jsxs("div",{className:"relative",children:[e.jsx(Le,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"tel",name:"phone",value:v.phone,onChange:c,disabled:!n,className:"w-full pl-10 pr-4 py-3 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 disabled:bg-gray-100 disabled:cursor-not-allowed",placeholder:"+1 (555) 000-0000"})]})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(Se,{className:"w-5 h-5 text-red-600"}),"Default Shipping Address"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Street Address"}),e.jsx("input",{type:"text",name:"address",value:v.address,onChange:c,disabled:!n,className:"w-full px-4 py-3 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 disabled:bg-gray-100 disabled:cursor-not-allowed",placeholder:"123 Main St, Apt 4B"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"City"}),e.jsx("input",{type:"text",name:"city",value:v.city,onChange:c,disabled:!n,className:"w-full px-4 py-3 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 disabled:bg-gray-100 disabled:cursor-not-allowed",placeholder:"New York"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"State"}),e.jsx("input",{type:"text",name:"state",value:v.state,onChange:c,disabled:!n,className:"w-full px-4 py-3 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 disabled:bg-gray-100 disabled:cursor-not-allowed",placeholder:"NY"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ZIP Code"}),e.jsx("input",{type:"text",name:"zipCode",value:v.zipCode,onChange:c,disabled:!n,className:"w-full px-4 py-3 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 disabled:bg-gray-100 disabled:cursor-not-allowed",placeholder:"10001"})]})]})]})]}),n&&e.jsxs("div",{className:"flex gap-4 pt-4 border-t border-gray-200",children:[e.jsx("button",{onClick:()=>{g(!1),i()},className:"flex-1 px-6 py-3 border-2 border-gray-300 text-gray-700 rounded-lg font-semibold hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:a,disabled:b,className:"flex-1 px-6 py-3 bg-gradient-to-r from-red-600 to-red-500 text-white rounded-lg font-semibold shadow-lg shadow-red-500/30 hover:shadow-xl transition-all disabled:opacity-50 flex items-center justify-center gap-2",children:[e.jsx(ze,{className:"w-5 h-5"}),b?"Saving...":"Save Changes"]})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mt-6",children:[e.jsxs($.div,{whileHover:{scale:1.02},className:"bg-white rounded-xl shadow-lg p-6 text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx(te,{className:"w-6 h-6 text-red-600"})}),e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Member Since"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:new Date().toLocaleDateString("en-US",{month:"short",year:"numeric"})})]}),e.jsxs($.div,{whileHover:{scale:1.02},className:"bg-white rounded-xl shadow-lg p-6 text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx(te,{className:"w-6 h-6 text-green-600"})}),e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Orders"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:"0"})]}),e.jsxs($.div,{whileHover:{scale:1.02},className:"bg-white rounded-xl shadow-lg p-6 text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx(te,{className:"w-6 h-6 text-blue-600"})}),e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Wishlist Items"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:"0"})]})]})]})})}function Ea({onBack:t,onOrderAgain:n,onTrackOrder:g}){const[b,o]=d.useState([]),[h,x]=d.useState(!0),[v,m]=d.useState(null),[i,c]=d.useState(null);d.useEffect(()=>{a()},[]);const a=async()=>{const y=localStorage.getItem("customerSession");if(y)try{const j=JSON.parse(y);c(j.user),await s(j.user.email)}catch(j){console.error("Error loading user session:",j)}x(!1)},s=async y=>{try{const j=await fetch(`${_}/customer-orders?email=${encodeURIComponent(y)}`,{headers:{Authorization:`Bearer ${q}`}});if(j.ok){const P=await j.json();o(P.orders||[])}}catch(j){console.error("Error loading orders:",j)}},l=y=>{n(y.items)},k=y=>{switch(y){case"pending":return"bg-yellow-100 text-yellow-800";case"processing":return"bg-blue-100 text-blue-800";case"shipped":return"bg-purple-100 text-purple-800";case"delivered":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},r=y=>{switch(y){case"pending":return e.jsx($e,{className:"w-4 h-4"});case"processing":return e.jsx(St,{className:"w-4 h-4"});case"shipped":return e.jsx(xe,{className:"w-4 h-4"});case"delivered":return e.jsx(Ee,{className:"w-4 h-4"});default:return e.jsx(K,{className:"w-4 h-4"})}};return e.jsx("div",{className:"min-h-screen bg-gray-50 py-12 px-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("button",{onClick:t,className:"text-gray-600 hover:text-gray-900 font-medium mb-4",children:"← Back to Home"}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"My Orders"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"View and track your order history"})]}),h?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-red-200 border-t-red-600 rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading your orders..."})]}):b.length===0?e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-12 text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(se,{className:"w-10 h-10 text-gray-400"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"No orders yet"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Start shopping to see your orders here!"}),e.jsx("button",{onClick:t,className:"px-6 py-3 bg-gradient-to-r from-red-600 to-red-500 text-white rounded-lg font-medium shadow-lg shadow-red-500/30 hover:shadow-xl transition-all",children:"Start Shopping"})]}):e.jsx("div",{className:"space-y-4",children:b.map(y=>e.jsxs($.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-red-600 to-red-500 p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-red-100 mb-1",children:["Order #",y.orderNumber]}),e.jsxs("p",{className:"text-2xl font-bold",children:["$",y.total.toFixed(2)]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-red-100 mb-1",children:"Order Date"}),e.jsx("p",{className:"font-semibold",children:new Date(y.date).toLocaleDateString()})]})]})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:`flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-semibold ${k(y.status)}`,children:[r(y.status),y.status.charAt(0).toUpperCase()+y.status.slice(1)]}),e.jsxs("span",{className:"text-sm text-gray-600",children:["via ",y.deliveryMethod]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>m(v?.id===y.id?null:y),className:"flex items-center gap-2 px-4 py-2 border-2 border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50 transition-colors",children:[e.jsx(we,{className:"w-4 h-4"}),v?.id===y.id?"Hide":"View"," Details"]}),e.jsxs("button",{onClick:()=>l(y),className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-red-600 to-red-500 text-white rounded-lg font-medium shadow-lg shadow-red-500/30 hover:shadow-xl transition-all",children:[e.jsx(St,{className:"w-4 h-4"}),"Order Again"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(K,{className:"w-4 h-4"}),e.jsxs("span",{children:[y.items.length," item(s)"]})]}),v?.id===y.id&&e.jsxs($.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mt-6 pt-6 border-t border-gray-200",children:[e.jsx("h4",{className:"font-bold text-gray-900 mb-4",children:"Order Items"}),e.jsx("div",{className:"space-y-3",children:y.items.map((j,P)=>e.jsxs("div",{className:"flex gap-4 p-4 bg-gray-50 rounded-lg",children:[e.jsx("img",{src:j.image,alt:j.name,className:"w-20 h-20 rounded-lg object-cover"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h5",{className:"font-semibold text-gray-900",children:j.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Quantity: ",j.quantity]}),e.jsxs("p",{className:"text-sm font-bold text-red-600 mt-1",children:["$",(j.price*j.quantity).toFixed(2)]}),["delivered","completed","paid"].includes(y.status)&&(j.digital_email||j.digital_code||j.digital_password)&&e.jsxs("div",{className:"mt-3 p-4 bg-green-50 rounded-xl border border-green-200",children:[e.jsxs("h4",{className:"font-bold text-sm text-green-800 mb-3 flex items-center gap-2",children:[e.jsx(Ee,{className:"w-4 h-4"}),"Digital Account Credentials"]}),e.jsxs("div",{className:"space-y-3",children:[j.digital_email&&e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-xs font-semibold text-green-700 uppercase tracking-wider",children:"Email"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("code",{className:"flex-1 bg-white px-3 py-2 rounded-lg border border-green-200 text-green-900 text-sm font-mono select-all shadow-sm",children:j.digital_email}),e.jsx("button",{onClick:()=>navigator.clipboard.writeText(j.digital_email),className:"p-2 text-green-600 hover:text-green-800 hover:bg-green-100 rounded-lg transition-colors",title:"Copy Email",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})})]})]}),j.digital_password&&e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-xs font-semibold text-green-700 uppercase tracking-wider",children:"Password"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("code",{className:"flex-1 bg-white px-3 py-2 rounded-lg border border-green-200 text-green-900 text-sm font-mono select-all shadow-sm",children:j.digital_password}),e.jsx("button",{onClick:()=>navigator.clipboard.writeText(j.digital_password),className:"p-2 text-green-600 hover:text-green-800 hover:bg-green-100 rounded-lg transition-colors",title:"Copy Password",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})})]})]}),j.digital_code&&e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-xs font-semibold text-green-700 uppercase tracking-wider",children:"License Code"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("code",{className:"flex-1 bg-white px-3 py-2 rounded-lg border border-green-200 text-green-900 text-sm font-mono select-all shadow-sm tracking-wide",children:j.digital_code}),e.jsx("button",{onClick:()=>navigator.clipboard.writeText(j.digital_code),className:"p-2 text-green-600 hover:text-green-800 hover:bg-green-100 rounded-lg transition-colors",title:"Copy Code",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})})]})]})]})]})]})]},P))}),y.shippingAddress&&e.jsxs("div",{className:"mt-6",children:[e.jsx("h4",{className:"font-bold text-gray-900 mb-2",children:"Shipping Address"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[y.shippingAddress.street,", ",y.shippingAddress.city,", ",y.shippingAddress.state,", ",y.shippingAddress.zipCode]}),e.jsx("p",{className:"text-sm text-gray-600",children:y.shippingAddress.country})]}),e.jsx("div",{className:"mt-6",children:e.jsxs("button",{onClick:()=>g(y.orderNumber),className:"px-4 py-2 bg-gradient-to-r from-red-600 to-red-500 text-white rounded-lg font-medium shadow-lg shadow-red-500/30 hover:shadow-xl transition-all",children:[e.jsx(Se,{className:"w-4 h-4 mr-2"}),"Track Order"]})})]})]})]},y.id))})]})})}function Ta({onBack:t,onAddToCart:n}){const[g,b]=d.useState([]),[o,h]=d.useState(!0);d.useEffect(()=>{x()},[]);const x=()=>{try{const i=localStorage.getItem("favorites");i&&b(JSON.parse(i))}catch(i){console.error("Error loading favorites:",i)}finally{h(!1)}},v=i=>{const c=g.filter(a=>a.id!==i);b(c),localStorage.setItem("favorites",JSON.stringify(c))},m=i=>{n(i),alert("Added to cart!")};return e.jsx("div",{className:"min-h-screen bg-gray-50 py-12 px-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("button",{onClick:t,className:"text-gray-600 hover:text-gray-900 font-medium mb-4",children:"← Back to Home"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-xl flex items-center justify-center",children:e.jsx(Ne,{className:"w-6 h-6 text-red-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"My Favorites"}),e.jsxs("p",{className:"text-gray-600",children:[g.length," item(s) in your wishlist"]})]})]})]}),o?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-red-200 border-t-red-600 rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading your favorites..."})]}):g.length===0?e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-12 text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Ne,{className:"w-10 h-10 text-red-600"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"No favorites yet"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Start adding products to your wishlist!"}),e.jsx("button",{onClick:t,className:"px-6 py-3 bg-gradient-to-r from-red-600 to-red-500 text-white rounded-lg font-medium shadow-lg shadow-red-500/30 hover:shadow-xl transition-all",children:"Browse Products"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:g.map(i=>e.jsxs($.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-2xl transition-all group",children:[e.jsxs("div",{className:"relative h-64 bg-gray-100 overflow-hidden",children:[e.jsx("img",{src:i.image,alt:i.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"}),e.jsx("button",{onClick:()=>v(i.id),className:"absolute top-4 right-4 p-2 bg-white/90 backdrop-blur-sm rounded-full shadow-lg hover:bg-red-50 transition-colors group",children:e.jsx(Ne,{className:"w-5 h-5 text-red-600 fill-red-600"})}),i.category&&e.jsx("div",{className:"absolute top-4 left-4 px-3 py-1 bg-black/60 backdrop-blur-sm rounded-full",children:e.jsx("span",{className:"text-white text-xs font-semibold",children:i.category})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2 line-clamp-2",children:i.name}),i.rating&&e.jsxs("div",{className:"flex items-center gap-1 mb-3",children:[[...Array(5)].map((c,a)=>e.jsx(ke,{className:`w-4 h-4 ${a<i.rating?"text-yellow-400 fill-yellow-400":"text-gray-300"}`},a)),e.jsxs("span",{className:"text-sm text-gray-600 ml-1",children:["(",i.rating,")"]})]}),e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("p",{className:"text-2xl font-bold text-red-600",children:["$",i.price.toFixed(2)]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>m(i),className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-red-600 to-red-500 text-white rounded-lg font-medium shadow-lg shadow-red-500/30 hover:shadow-xl transition-all",children:[e.jsx(se,{className:"w-4 h-4"}),"Add to Cart"]}),e.jsx("button",{onClick:()=>v(i.id),className:"px-4 py-3 border-2 border-gray-300 text-gray-600 rounded-lg hover:bg-red-50 hover:border-red-300 hover:text-red-600 transition-colors",children:e.jsx(ae,{className:"w-4 h-4"})})]})]})]},i.id))}),g.length>0&&e.jsx("div",{className:"mt-8 bg-white rounded-xl shadow-lg p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-gray-900 mb-1",children:"Add All to Cart"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Quickly add all ",g.length," favorite items to your cart"]})]}),e.jsxs("button",{onClick:()=>{g.forEach(i=>n(i)),alert(`Added ${g.length} items to cart!`)},className:"px-6 py-3 bg-gradient-to-r from-red-600 to-red-500 text-white rounded-lg font-medium shadow-lg shadow-red-500/30 hover:shadow-xl transition-all flex items-center gap-2",children:[e.jsx(se,{className:"w-5 h-5"}),"Add All to Cart"]})]})})]})})}function $a({onBack:t}){const[n,g]=d.useState(""),[b,o]=d.useState(null),[h,x]=d.useState(!1),[v,m]=d.useState(""),i=async s=>{s.preventDefault(),x(!0),m(""),o(null);try{const l=await fetch(`${_}/track-order/${n}`,{headers:{Authorization:`Bearer ${q}`}});if(l.ok){const k=await l.json();o(k.order)}else m("Order not found. Please check your order number and try again.")}catch(l){console.error("Error tracking order:",l),m("Failed to track order. Please try again later.")}finally{x(!1)}},c=s=>["pending","processing","shipped","delivered"].indexOf(s),a=[{id:"pending",label:"Order Placed",icon:K,description:"Your order has been received"},{id:"processing",label:"Processing",icon:$e,description:"We are preparing your order"},{id:"shipped",label:"Shipped",icon:xe,description:"Your order is on the way"},{id:"delivered",label:"Delivered",icon:Ee,description:"Order delivered successfully"}];return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-red-50 py-12 px-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("button",{onClick:t,className:"text-gray-600 hover:text-gray-900 font-medium mb-4",children:"← Back to Home"}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Track Your Order"}),e.jsx("p",{className:"text-gray-600",children:"Enter your order number to track your delivery"})]}),e.jsx($.form,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},onSubmit:i,className:"bg-white rounded-2xl shadow-xl p-8 mb-8",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(re,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",value:n,onChange:s=>g(s.target.value),placeholder:"Enter order number (e.g., GU12345678)",className:"w-full pl-12 pr-4 py-4 bg-gray-50 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-red-500 text-lg",required:!0})]}),e.jsx("button",{type:"submit",disabled:h,className:"px-8 py-4 bg-gradient-to-r from-red-600 to-red-500 text-white rounded-xl font-semibold shadow-lg shadow-red-500/30 hover:shadow-xl transition-all disabled:opacity-50 flex items-center justify-center gap-2",children:h?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Tracking..."]}):e.jsxs(e.Fragment,{children:[e.jsx(re,{className:"w-5 h-5"}),"Track Order"]})})]})}),v&&e.jsx($.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-red-50 border-2 border-red-200 rounded-xl p-6 mb-8 text-center",children:e.jsx("p",{className:"text-red-800 font-medium",children:v})}),b&&e.jsxs($.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-red-600 to-red-500 p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-red-100 mb-1",children:"Order Number"}),e.jsx("p",{className:"text-2xl font-bold",children:b.orderNumber})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-red-100 mb-1",children:"Order Date"}),e.jsx("p",{className:"font-semibold",children:new Date(b.date).toLocaleDateString()})]})]})}),e.jsxs("div",{className:"p-8",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-6",children:"Delivery Status"}),e.jsx("div",{className:"relative",children:a.map((s,l)=>{const k=c(b.status),r=l<=k,y=l===k,j=s.icon;return e.jsxs("div",{className:"relative flex gap-4 pb-8 last:pb-0",children:[l<a.length-1&&e.jsx("div",{className:`absolute left-6 top-12 w-0.5 h-full ${r?"bg-green-500":"bg-gray-200"}`}),e.jsx("div",{className:`relative z-10 w-12 h-12 rounded-full flex items-center justify-center ${r?"bg-green-500 text-white":"bg-gray-200 text-gray-400"} ${y?"ring-4 ring-green-200":""}`,children:e.jsx(j,{className:"w-6 h-6"})}),e.jsxs("div",{className:"flex-1 pt-1",children:[e.jsx("p",{className:`font-bold ${r?"text-gray-900":"text-gray-400"}`,children:s.label}),e.jsx("p",{className:`text-sm ${r?"text-gray-600":"text-gray-400"}`,children:s.description}),y&&e.jsx("span",{className:"inline-block mt-2 px-3 py-1 bg-green-100 text-green-800 text-xs font-semibold rounded-full",children:"Current Status"})]})]},s.id)})})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(Se,{className:"w-5 h-5 text-red-600"}),"Shipping Address"]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:b.shippingAddress?.fullName}),e.jsx("p",{className:"text-gray-600 mt-1",children:b.shippingAddress?.address}),e.jsxs("p",{className:"text-gray-600",children:[b.shippingAddress?.city,", ",b.shippingAddress?.state," ",b.shippingAddress?.zipCode]}),e.jsxs("p",{className:"text-gray-600 mt-2",children:[e.jsx("span",{className:"font-medium",children:"Phone:"})," ",b.shippingAddress?.phone]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(K,{className:"w-5 h-5 text-red-600"}),"Order Items (",b.items?.length||0,")"]}),e.jsx("div",{className:"space-y-3",children:b.items?.map((s,l)=>e.jsxs("div",{className:"flex gap-4 p-4 bg-gray-50 rounded-xl",children:[e.jsx("img",{src:s.image,alt:s.name,className:"w-20 h-20 rounded-lg object-cover"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:s.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Quantity: ",s.quantity]}),e.jsxs("p",{className:"text-sm font-bold text-red-600 mt-1",children:["$",(s.price*s.quantity).toFixed(2)]})]})]},l))}),e.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:e.jsxs("div",{className:"flex justify-between text-lg font-bold text-gray-900",children:[e.jsx("span",{children:"Order Total"}),e.jsxs("span",{className:"text-red-600",children:["$",b.total?.toFixed(2)]})]})})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(xe,{className:"w-5 h-5 text-red-600"}),"Delivery Method"]}),e.jsx("p",{className:"text-gray-700 font-medium",children:b.deliveryMethod})]})]})]})})}function La(){const t=Is(),n=ht();ut();const[g,b]=d.useState(!1),h=(()=>{const a=t.pathname;return a==="/"||a===""?"home":a==="/shop"?"shop":a==="/checkout"?"checkout":a==="/login"?"login":a==="/signup"?"signup":a==="/profile"?"profile":a==="/orders"?"orders":a==="/favorites"?"favorites":a==="/track"?"track":a.startsWith("/product/")?"product":"home"})(),x=t.pathname.startsWith("/product/")?t.pathname.split("/product/")[1]:null,v=(a,s,l)=>{a==="home"?n("/"):a==="shop"?n(l?`/shop?category=${l}`:"/shop"):a==="product"&&s?n(`/product/${s}`):a==="checkout"?n("/checkout"):a==="login"?n("/login"):a==="signup"?n("/signup"):a==="profile"?n("/profile"):a==="orders"?n("/orders"):a==="favorites"?n("/favorites"):a==="track"&&n("/track"),window.scrollTo({top:0,behavior:"smooth"})},m=a=>{const l=[...JSON.parse(localStorage.getItem("cart")||"[]")];a.forEach(k=>{const r=l.findIndex(y=>y.id===k.id);r>=0?l[r].quantity+=k.quantity:l.push({...k})}),localStorage.setItem("cart",JSON.stringify(l)),alert("Items added to cart!"),v("shop")},i=a=>{const s=JSON.parse(localStorage.getItem("cart")||"[]"),l=s.findIndex(k=>k.id===a.id);l>=0?s[l].quantity+=1:s.push({...a,quantity:1}),localStorage.setItem("cart",JSON.stringify(s))};if(h==="login"||h==="signup")return e.jsx(Ia,{mode:h,onSuccess:()=>v("home"),onSwitchMode:a=>v(a)});if(h==="checkout")return e.jsx(Da,{onBack:()=>v("shop"),onSuccess:()=>v("shop")});if(h==="profile")return e.jsx(Oa,{onBack:()=>v("home")});if(h==="orders")return e.jsx(Ea,{onBack:()=>v("home"),onOrderAgain:m,onTrackOrder:a=>{v("track")}});if(h==="favorites")return e.jsx(Ta,{onBack:()=>v("home"),onAddToCart:i});if(h==="track")return e.jsx($a,{onBack:()=>v("home")});const c=()=>{switch(h){case"home":return e.jsx(At,{onNavigate:v,onOpenCart:()=>b(!0)});case"shop":return e.jsx(Pa,{onNavigate:v,onOpenCart:()=>b(!0)});case"product":return e.jsx(Aa,{onOpenCart:()=>b(!0),productId:x});default:return e.jsx(At,{onNavigate:v,onOpenCart:()=>b(!0)})}};return e.jsx(Ca,{currentPage:h,onNavigate:v,isCartOpen:g,onOpenCart:()=>b(!0),onCloseCart:()=>b(!1),children:c()})}function Fa(){return e.jsx(zs,{children:e.jsx(Ds,{children:e.jsxs(Rt,{children:[e.jsx(V,{path:"/admin/*",element:e.jsx(ja,{})}),e.jsx(V,{path:"/*",element:e.jsx(La,{})})]})})})}class _a extends d.Component{state={hasError:!1,error:null};static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,g){console.error("Uncaught error:",n,g)}render(){return this.state.hasError?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 bg-gray-50 dark:bg-gray-900 text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Something went wrong"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6 max-w-md",children:this.state.error?.message||"An unexpected error occurred."}),e.jsx(R,{onClick:()=>window.location.reload(),children:"Reload Page"})]}):this.props.children}}Vt.createRoot(document.getElementById("root")).render(e.jsx(_a,{children:e.jsx(Fa,{})}));
